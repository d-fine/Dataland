FROM ghcr.io/d-fine/dataland/temurinbase:latest
COPY ./gradle/ /app/gradle/
COPY ./build.gradle.kts ./gradle.properties ./settings.gradle.kts ./gradlew /app/
COPY ./dataland-backend/ /app/dataland-backend
COPY ./.git/ /app/.git
WORKDIR /app
RUN ./gradlew dataland-backend:bootJar --no-daemon --stacktrace

CMD ./gradlew :dataland-backend:bootRun --args='--spring.profiles.active=ci' --no-daemon --stacktrace
