var Fe=Object.defineProperty;var Oe=(e,t,a)=>t in e?Fe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var k=(e,t,a)=>(Oe(e,typeof t!="symbol"?t+"":t,a),a);import{d as w,_ as P,r as h,o,c as r,a as l,F as D,t as T,n as C,w as v,h as F,v as b,s as fe,i as E,y as Ee,al as Me,M as ke,N as _e,e as I,L as $e,f as g,j as y,R as de,I as X,J as $,x as K,p as Z,g as ee,H as R,Y as me,U}from"./index-17bd392c.js";import{B as Le}from"./BackButton-d912ea90.js";import{T as Ne,a as Ke}from"./TheHeader-f0aa2367.js";import{C as Be}from"./CompanyInformation-2a2f3400.js";import{F as He}from"./FrameworkDataSearchBar-a21bec15.js";import{M as qe}from"./MarginWrapper-a5e1aa1a.js";import{A as M,a as Ue}from"./ApiClients-491035fa.js";import{s as he}from"./dropdown.esm-ee047f36.js";import{T as Ge}from"./TheFooter-46e8b4f5.js";import{h as S}from"./StringHumanizer-b303955c.js";import{s as ze,l as je,c as J,p as We,A as Ve}from"./P2pDataModel-672f5117.js";import{s as Ye}from"./card.esm-ab7d22cc.js";import{s as xe,r as Qe,c as ge}from"./NumberConversionUtils-eff754a5.js";import{g as Je}from"./PredefinedComponentOptionsGetter-75a9d332.js";import{Q as q}from"./qa-status-272129d3.js";import{s as B,a as H}from"./column.esm-325e5fea.js";import{T as ye}from"./tooltip.esm-60532e01.js";import{g as ce}from"./CountryCodeConverter-4eb888e2.js";import"./SearchResultHighlighter-97e70783.js";import"./virtualscroller.esm-2abd6d6c.js";import"./index.esm-363b09da.js";import"./inputtext.esm-03a7b169.js";import"./index.esm-1a2ee9c0.js";import"./index.esm-fe6eeb6c.js";import"./index.esm-d48fd520.js";const Xe={Deviation:"Deviation",NoDeviation:"NoDeviation"},x={Yes:"Yes",No:"No"};function te(e){return e.sort((t,a)=>be(t.reportingPeriod,a.reportingPeriod))}function be(e,t){return!isNaN(Number(e))&&!isNaN(Number(t))?Number(e)<Number(t)?1:-1:isNaN(Number(e))?isNaN(Number(t))?e>t?1:-1:1:-1}const Q="row-header-id";function ve(e,t,a){const n=new Map;let i=[];const u=Array.from(document.querySelectorAll(`[data-table-id="${e}"][data-row-header-click]`)),c=u.map(p=>{var d;const f=(d=p.parentNode)==null?void 0:d.querySelector('button[data-pc-section="rowgrouptoggler"]');if(f)return f.setAttribute(Q,p.id),f}).filter(p=>!!p);return[...u,...c].forEach(p=>{const f=s=>{if(p.getAttribute(Q)){s.stopImmediatePropagation();return}i=t(),i.includes(p.id)?i=i.filter(m=>m!==p.id):i.push(p.id),a(i)};let d;p.getAttribute(Q)?d=p:d=p.parentNode,d&&(n.set(d,f),d.addEventListener("click",f))}),n}function De(e){const t="data-parent-id";e.forEach((a,n)=>{var i;n!=null&&n.getAttribute(t)?n.removeEventListener("click",a):(i=n.parentNode)==null||i.removeEventListener("click",a),e.delete(n)})}const Ze=w({name:"SelectReportingPeriodDialog",data(){return{dataTableContents:[]}},props:{mapOfReportingPeriodToActiveDataset:{type:Map}},mounted(){this.setReportingPeriodDataTableContents()},methods:{setReportingPeriodDataTableContents(){if(this.mapOfReportingPeriodToActiveDataset){const e=Array.from(this.mapOfReportingPeriodToActiveDataset.entries()).sort((t,a)=>be(t[0],a[0]));for(const[t,a]of e)this.dataTableContents.push({reportingPeriod:t,editUrl:`/companies/${a.companyId}/frameworks/${a.dataType}/upload?templateDataId=${a.dataId}`})}}}}),et={"data-test":"select-reporting-period-dialog"},tt=l("h4",{class:"title"},"SELECT YEAR",-1),at={class:"three-in-row","data-test":"reporting-periods"};function nt(e,t,a,n,i,u){const c=h("router-link");return o(),r("div",et,[tt,l("div",at,[(o(!0),r(D,null,T(e.dataTableContents,(p,f)=>(o(),C(c,{key:f,class:"link",to:p.editUrl},{default:v(()=>[F(b(p.reportingPeriod),1)]),_:2},1032,["to"]))),128))])])}const ot=P(Ze,[["render",nt]]),it=w({name:"ViewFrameworkBase",components:{TheContent:Ne,TheHeader:Ke,BackButton:Le,MarginWrapper:qe,FrameworkDataSearchBar:He,Dropdown:he,CompanyInformation:Be,TheFooter:Ge,PrimeButton:fe,OverlayPanel:ze,SelectReportingPeriodDialog:ot},emits:["updateActiveDataMetaInfoForChosenFramework"],props:{companyID:{type:String},dataType:{type:String},singleDataMetaInfoToDisplay:{type:Object,required:!1},viewInPreviewMode:{type:Boolean,default:!1}},setup(){return{getKeycloakPromise:E("getKeycloakPromise"),frameworkDataSearchBar:Ee()}},data(){return{chosenDataTypeInDropdown:"",dataTypesInDropdown:[],humanizeString:S,windowScrollHandler:()=>{this.handleScroll()},mapOfReportingPeriodToActiveDataset:new Map,isDataProcessedSuccesfully:!0,hasUserUploaderRights:void 0}},computed:{canEdit(){return Me.includes(this.dataType)&&(!this.singleDataMetaInfoToDisplay||this.singleDataMetaInfoToDisplay.currentlyActive||this.singleDataMetaInfoToDisplay.qaStatus==="Rejected")},addNewDatasetLinkTarget(){return`/companies/${this.companyID??""}/frameworks/upload`}},created(){this.chosenDataTypeInDropdown=this.dataType??"",this.getFrameworkDropdownOptionsAndActiveDataMetaInfoForEmit(),ke(_e,this.getKeycloakPromise).then(e=>{this.hasUserUploaderRights=e}).catch(e=>console.log(e)),window.addEventListener("scroll",this.windowScrollHandler)},methods:{editDataset(e){if(this.singleDataMetaInfoToDisplay)this.gotoUpdateForm(this.singleDataMetaInfoToDisplay.companyId,this.singleDataMetaInfoToDisplay.dataType,this.singleDataMetaInfoToDisplay.dataId);else if(this.mapOfReportingPeriodToActiveDataset.size>1&&!this.singleDataMetaInfoToDisplay){const t=this.$refs.reportingPeriodsOverlayPanel;t&&t.toggle(e)}else this.mapOfReportingPeriodToActiveDataset.size==1&&!this.singleDataMetaInfoToDisplay&&this.gotoUpdateForm(I(this.companyID),this.dataType,Array.from(this.mapOfReportingPeriodToActiveDataset.values())[0].dataId)},gotoUpdateForm(e,t,a){this.$router.push(`/companies/${I(e)}/frameworks/${I(t)}/upload?templateDataId=${a}`)},handleScroll(){var e;(e=this.frameworkDataSearchBar)==null||e.$refs.autocomplete.hide()},handleChangeFrameworkEvent(e){this.dataType!=e.value&&this.$router.push(`/companies/${this.companyID}/frameworks/${this.chosenDataTypeInDropdown}`)},async handleSearchConfirm(e){await this.$router.push({name:"Search Companies for Framework Data",query:{input:e}})},getDistinctAvailableFrameworksAndPutThemSortedIntoDropdown(e){this.dataTypesInDropdown=[];const t=[...new Set(e.map(n=>n.dataType))],a=[];t.forEach(n=>{$e.includes(n)&&a.push(n)}),a.sort((n,i)=>n.localeCompare(i)),a.forEach(n=>{this.dataTypesInDropdown.push({label:S(n),value:n})})},setMapOfReportingPeriodToActiveDatasetFromListOfActiveMetaDataInfo(e){this.mapOfReportingPeriodToActiveDataset=new Map,e.forEach(t=>{if(t.dataType===this.dataType)if(t.currentlyActive)this.mapOfReportingPeriodToActiveDataset.set(t.reportingPeriod,t);else throw TypeError("Received inactive dataset meta info from Dataland Backend")})},async getFrameworkDropdownOptionsAndActiveDataMetaInfoForEmit(){try{const a=(await(await new M(I(this.getKeycloakPromise)()).getMetaDataControllerApi()).getListOfDataMetaInfo(this.companyID)).data;this.getDistinctAvailableFrameworksAndPutThemSortedIntoDropdown(a),this.setMapOfReportingPeriodToActiveDatasetFromListOfActiveMetaDataInfo(a),this.$emit("updateActiveDataMetaInfoForChosenFramework",this.mapOfReportingPeriodToActiveDataset),this.isDataProcessedSuccesfully=!0}catch(e){this.isDataProcessedSuccesfully=!1,console.error(e)}}},watch:{companyID(){this.getFrameworkDropdownOptionsAndActiveDataMetaInfoForEmit()},dataType(e){this.chosenDataTypeInDropdown=e,this.getFrameworkDropdownOptionsAndActiveDataMetaInfoForEmit()}}}),rt={class:"grid align-items-end"},st={class:"col-9"},lt={key:0},dt={class:"flex justify-content-between align-items-center d-search-filters-panel"},ct={class:"flex"},ut={key:0,class:"flex align-content-end align-items-center"},pt=l("span",{class:"px-2"},"EDIT DATA",-1),ft={key:0,class:"material-icons-outlined"},mt=l("span",{class:"material-icons-outlined px-2"},"queue",-1),ht=l("span",{class:"px-2"},"NEW DATASET",-1),gt={key:1,"data-test":"noDataCouldBeLoadedErrorIndicator"};function yt(e,t,a,n,i,u){const c=h("TheHeader"),p=h("BackButton"),f=h("FrameworkDataSearchBar"),d=h("MarginWrapper"),s=h("CompanyInformation"),m=h("Dropdown"),A=h("PrimeButton"),O=h("router-link"),L=h("SelectReportingPeriodDialog"),z=h("OverlayPanel"),j=h("TheContent"),W=h("TheFooter");return o(),r(D,null,[g(c,{showUserProfileDropdown:!e.viewInPreviewMode},null,8,["showUserProfileDropdown"]),g(j,{class:"paper-section min-h-screen"},{default:v(()=>[g(d,{class:"text-left surface-0",style:{"margin-right":"0"}},{default:v(()=>[g(p),e.viewInPreviewMode?y("",!0):(o(),C(f,{key:0,companyIdIfOnViewPage:e.companyID,class:"mt-2",ref:"frameworkDataSearchBar",onSearchConfirmed:e.handleSearchConfirm},null,8,["companyIdIfOnViewPage","onSearchConfirmed"]))]),_:1}),g(d,{class:"surface-0",style:{"margin-right":"0"}},{default:v(()=>[l("div",rt,[l("div",st,[g(s,{companyID:e.companyID},null,8,["companyID"])])])]),_:1}),e.isDataProcessedSuccesfully?(o(),r("div",lt,[g(d,{class:"text-left surface-0",style:{"margin-right":"0"}},{default:v(()=>[l("div",dt,[l("div",ct,[g(m,{id:"chooseFrameworkDropdown",modelValue:e.chosenDataTypeInDropdown,"onUpdate:modelValue":t[0]||(t[0]=V=>e.chosenDataTypeInDropdown=V),options:e.dataTypesInDropdown,optionLabel:"label",optionValue:"value",placeholder:e.humanizeString(e.dataType),"aria-label":"Choose framework",class:"fill-dropdown always-fill",dropdownIcon:"pi pi-angle-down",onChange:e.handleChangeFrameworkEvent},null,8,["modelValue","options","placeholder","onChange"]),de(e.$slots,"reportingPeriodDropdown")]),e.hasUserUploaderRights?(o(),r("div",ut,[e.canEdit?(o(),C(A,{key:0,class:"uppercase p-button-outlined p-button p-button-sm d-letters mr-3","aria-label":"EDIT DATA",onClick:e.editDataset,"data-test":"editDatasetButton"},{default:v(()=>[pt,e.mapOfReportingPeriodToActiveDataset.size>1&&!e.singleDataMetaInfoToDisplay?(o(),r("span",ft,"arrow_drop_down")):y("",!0)]),_:1},8,["onClick"])):y("",!0),g(O,{to:e.addNewDatasetLinkTarget,class:"no-underline","data-test":"gotoNewDatasetButton"},{default:v(()=>[g(A,{class:"uppercase p-button-sm d-letters","aria-label":"New Dataset"},{default:v(()=>[mt,ht]),_:1})]),_:1},8,["to"])])):y("",!0),g(z,{ref:"reportingPeriodsOverlayPanel"},{default:v(()=>[g(L,{mapOfReportingPeriodToActiveDataset:e.mapOfReportingPeriodToActiveDataset},null,8,["mapOfReportingPeriodToActiveDataset"])]),_:1},512)])]),_:3}),g(d,{style:{"margin-right":"0"}},{default:v(()=>[de(e.$slots,"content")]),_:3})])):(o(),r("h1",gt,"No data could be loaded."))]),_:3}),g(W)],64)}const Ie=P(it,[["render",yt]]);function bt(e,t){const a=[{value:1,symbol:""},{value:1e3,symbol:"K"},{value:1e6,symbol:"M"},{value:1e9,symbol:"B"},{value:1e12,symbol:"T"},{value:1e15,symbol:"QA"},{value:1e18,symbol:"QI"}];if(e!==void 0){const n=/\.0+$|(\.d*[1-9])0+$/,i=a.slice().reverse().find(u=>e>=u.value);return i?(e/i.value).toFixed(t).replace(n,"$1")+" "+i.symbol:"0"}else return""}const vt=w({name:"TaxoCard",components:{Card:Ye,PrimeProgressBar:xe},props:{title:{type:String},total:{type:Number},percent:{type:Number},amount:{type:Number}},computed:{percentCalculation(){return typeof this.percent=="number"?Math.round(this.percent*100*100)/100:typeof this.amount=="number"&&typeof this.total=="number"&&this.total>0?Math.round(this.amount/this.total*100*100)/100:void 0}},methods:{valueWithOrderOfMagnitudeSuffix(e){return bt(e,2)}}});const Dt={class:"grid"},It={class:"col-6 text-left"},Ct={key:0,class:"col-6 text-right text-primary"},wt={class:"font-medium text-3xl","data-test":"value"},Pt=l("span",null,"%",-1),Tt={key:1,class:"col-6 grid align-items-center text-right"},At=l("span",{class:"pl-4 font-semibold"},"No data has been reported ",-1),St=[At],Rt={class:"grid mt-4"},Ft={class:"col-12 text-left p-0 pl-2"},Ot=l("span",{class:"font-medium text-3xl"},"€ ",-1),Et={class:"font-bold text-4xl"},Mt={key:1,class:"left-align"};function kt(e,t,a,n,i,u){const c=h("PrimeProgressBar"),p=h("Card");return o(),C(p,{class:"bg-white d-card mr-2","data-test":"taxocard"},{title:v(()=>[]),content:v(()=>[l("div",Dt,[l("div",It,[l("strong",null,b(e.title),1)]),e.percent!==void 0&&e.percent!==null?(o(),r("div",Ct,[l("span",wt,b(e.percentCalculation),1),Pt])):e.total==null&&e.amount==null?(o(),r("div",Tt,St)):y("",!0)]),e.percentCalculation!==void 0?(o(),C(c,{key:0,value:e.percentCalculation,showValue:!1,class:"bg-black-alpha-20 d-progressbar"},null,8,["value"])):y("",!0),l("div",Rt,[l("div",Ft,[e.amount!==void 0&&e.amount!==null?(o(),r(D,{key:0},[Ot,l("span",Et,b(e.valueWithOrderOfMagnitudeSuffix(e.amount)),1)],64)):y("",!0),e.total!==void 0&&e.total!==null?(o(),r("p",Mt,[l("strong",null,"With a total of € "+b(e.valueWithOrderOfMagnitudeSuffix(e.total)),1)])):y("",!0)])])]),_:1})}const _t=P(vt,[["render",kt]]),$t=w(Je("TaxoInfoCard")),Lt={class:"grid"},Nt={class:"col-6 text-left"},Kt={class:"col-2 col-offset-4 text-right"},Bt=["title"],Ht={class:"col-12 text-left"};function qt(e,t,a,n,i,u){const c=h("Card"),p=X("tooltip");return o(),C(c,{class:"bg-white d-infocard d-card mr-2"},{title:v(()=>[]),content:v(()=>[l("div",Lt,[l("div",Nt,[l("strong",null,b(e.title),1)]),l("div",Kt,[$((o(),r("i",{title:e.title,class:"material-icons","aria-hidden":"true"},[F("info ")],8,Bt)),[[p,e.tooltipText?{value:e.tooltipText,class:"d-tooltip-mw25"}:"",void 0,{top:!0}]])]),l("div",Ht,[l("span",null,b(e.humanizedValue),1)])])]),_:1})}const Ut=P($t,[["render",qt]]),Gt=w({setup(){return{getKeycloakPromise:E("getKeycloakPromise")}},name:"DocumentLink",props:{label:String,downloadName:{type:String,required:!0},reference:{type:String,required:!0},showIcon:Boolean,fontStyle:String},methods:{async downloadDocument(){const e=this.reference;try{const t=document.createElement("a");await(await new M(I(this.getKeycloakPromise)()).getDocumentControllerApi()).getDocument(e,{headers:{accept:"application/pdf"},responseType:"arraybuffer"}).then(n=>{const i=new Blob([n.data],{type:"application/pdf"});t.href=URL.createObjectURL(i),t.setAttribute("download",`${this.downloadName}.pdf`),document.body.appendChild(t),t.click()})}catch(t){console.error(t)}}}}),zt=["data-test"],jt={class:"underline"},Wt={key:0,class:"pi pi-download pl-1","data-test":"download-icon","aria-hidden":"true",style:{"font-size":"12px"}};function Vt(e,t,a,n,i,u){return o(),r("span",{onClick:t[0]||(t[0]=c=>e.downloadDocument()),class:K(["text-primary cursor-pointer",e.fontStyle]),"data-test":"Report-Download-"+e.downloadName},[l("span",jt,b(e.label??e.downloadName),1),e.showIcon?(o(),r("i",Wt)):y("",!0)],10,zt)}const Y=P(Gt,[["render",Vt]]),Yt=w({name:"ShowReportsBanner",components:{DocumentLink:Y},props:{reports:{type:Object,required:!0}},computed:{numberOfReports(){return Object.keys(this.reports).length}}});const xt=e=>(Z("data-v-738eba4b"),e=e(),ee(),e),Qt={style:{display:"flex"}},Jt={class:"text-left bg-white mb-4 mr-2 p-3 all-sides-blue-border","data-test":"reportsBanner"},Xt=xt(()=>l("span",{class:"font-bold text-gray-800 mt-0 mb-0 mp-0 ml-0 mr-1",style:{"font-size":"11pt"}}," Data extracted from the company report. Company reports: ",-1)),Zt={id:"reportList"},ea={key:0};function ta(e,t,a,n,i,u){const c=h("DocumentLink");return o(),r("div",Qt,[l("div",Jt,[Xt,l("span",Zt,[(o(!0),r(D,null,T(e.reports,(p,f,d)=>(o(),r("span",{key:d},[g(c,{"download-name":f,reference:p.reference,"font-style":"font-semibold"},null,8,["download-name","reference"]),d<e.numberOfReports-1?(o(),r("span",ea," | ")):y("",!0)]))),128))])])])}const aa=P(Yt,[["render",ta],["__scopeId","data-v-738eba4b"]]),na=w({name:"EuTaxonomyPanelFinancials",components:{TaxoCard:_t,TaxoInfoCard:Ut,ShowReportsBanner:aa},data(){return{dataSet:null}},props:{dataID:{type:String,default:"loading"},viewInPreviewMode:{type:Boolean,default:!1}},mounted(){this.getCompanyEuDataset()},watch:{dataID(){this.getCompanyEuDataset()}},setup(){return{getKeycloakPromise:E("getKeycloakPromise"),waitingForData:!0}},methods:{async getCompanyEuDataset(){try{if(this.waitingForData=!0,this.dataID!="loading"){const t=await(await new M(I(this.getKeycloakPromise)()).getEuTaxonomyDataForFinancialsControllerApi()).getCompanyAssociatedEuTaxonomyDataForFinancials(I(this.dataID));this.dataSet=t.data.data,this.waitingForData=!1}}catch(e){console.error(e)}},getSectionHeading(e){return{CreditInstitution:"Credit Institution",AssetManagement:"Asset Management",InsuranceOrReinsurance:"Insurance and Reinsurance",InvestmentFirm:"Investment Firm"}[e]}}}),oa={key:0,class:"d-center-div text-center px-7 py-4"},ia=l("p",{class:"font-medium text-xl"},"Loading Eu Taxonomy Data..",-1),ra=l("i",{class:"pi pi-spinner pi-spin","aria-hidden":"true",style:{"z-index":"20",color:"#e67f3f"}},null,-1),sa=[ia,ra],la={key:1},da={key:1,class:"pb-3"},ca={class:"grid"},ua={class:"col-6"},pa={class:"col-6"},fa={class:"card-section-title"},ma={class:"font-medium text-xl font-semibold"},ha=l("span",{class:"pl-2 font-italic"},"In percentage of the total assets",-1),ga={class:"col-6"},ya={class:"col-6"},ba={class:"col-6"},va={class:"col-6"},Da={class:"col-6"},Ia=l("div",{class:"card-section-title"},[l("span",{class:"font-medium text-xl font-semibold"},"Credit Institution KPIs"),l("span",{class:"pl-2 font-italic"},"In percentage of the total assets")],-1),Ca={key:0,class:"col-6"},wa={key:1,class:"col-6"},Pa={key:2,class:"col-6"},Ta={class:"col-6"},Aa=l("div",{class:"card-section-title"},[l("span",{class:"font-medium text-xl font-semibold"},"Insurance and Reinsurance KPIs"),l("span",{class:"pl-2 font-italic"},"In percentage of the total assets")],-1),Sa={class:"col-6"},Ra=l("div",{class:"card-section-title"},[l("span",{class:"font-medium text-xl font-semibold"},"Investment Firm KPIs"),l("span",{class:"pl-2 font-italic"},"In percentage of the total assets")],-1),Fa={class:"col-6"};function Oa(e,t,a,n,i,u){var d,s;const c=h("ShowReportsBanner"),p=h("TaxoInfoCard"),f=h("TaxoCard");return o(),r(D,null,[e.waitingForData?(o(),r("div",oa,sa)):y("",!0),e.dataSet&&!e.waitingForData?(o(),r("div",la,[(d=e.dataSet)!=null&&d.referencedReports&&Object.keys(e.dataSet.referencedReports).length>0&&!e.viewInPreviewMode?(o(),C(c,{key:0,reports:e.dataSet.referencedReports},null,8,["reports"])):(o(),r("div",da)),l("div",ca,[l("div",ua,[g(p,{title:"NFRD required",value:e.dataSet.nfrdMandatory,tooltipText:"The NFRD (Non financial disclosure directive) applies to companies with more than 500 employees with a > €20M balance or > €40M net turnover."},null,8,["value"])]),l("div",pa,[g(p,{title:"Level of Assurance",value:(s=e.dataSet.assurance)==null?void 0:s.assurance,tooltipText:`The Level of Assurance specifies the confidence level of the data reported.
                  Reasonable assurance:  relatively high degree of comfort that the subject matter is not materially misstated.
                  Limited assurance: moderate level of comfort that the subject matter is not materially misstated.
                  None: low level of comfort that the subject matter is not materially misstated.`},null,8,["value"])]),(o(!0),r(D,null,T(e.dataSet.financialServicesTypes,m=>{var A,O,L,z,j,W,V,ie,re,se,le;return o(),r(D,{key:m},[l("div",fa,[l("span",ma,"Exposures for "+b(e.getSectionHeading(m)),1),ha]),l("div",ga,[g(f,{name:`taxonomyEligibleActivity${m}`,title:"Taxonomy-eligible economic activity",percent:(A=e.dataSet.eligibilityKpis[m].taxonomyEligibleActivity)==null?void 0:A.value},null,8,["name","percent"])]),l("div",ya,[g(f,{name:`derivatives${m}`,title:"Derivatives","taxonomy-kind":"",percent:(O=e.dataSet.eligibilityKpis[m].derivatives)==null?void 0:O.value},null,8,["name","percent"])]),l("div",ba,[g(f,{name:`banksAndIssuers${m}`,title:"Banks and issuers",percent:(L=e.dataSet.eligibilityKpis[m].banksAndIssuers)==null?void 0:L.value},null,8,["name","percent"])]),l("div",va,[g(f,{name:`investmentNonNfrd${m}`,title:"Non-NFRD",percent:(z=e.dataSet.eligibilityKpis[m].investmentNonNfrd)==null?void 0:z.value},null,8,["name","percent"])]),l("div",Da,[g(f,{name:`taxonomyNonEligibleActivity${m}`,title:"Taxonomy-non-eligible economic activity",percent:(j=e.dataSet.eligibilityKpis[m].taxonomyNonEligibleActivity)==null?void 0:j.value},null,8,["name","percent"])]),m==="CreditInstitution"?(o(),r(D,{key:0},[Ia,e.dataSet.creditInstitutionKpis.tradingPortfolioAndInterbankLoans||!e.dataSet.creditInstitutionKpis.tradingPortfolio&&!e.dataSet.creditInstitutionKpis.interbankLoans?(o(),r("div",Ca,[g(f,{title:"Trading portfolio & on demand interbank loans",name:"tradingPortfolioAndOnDemandInterbankLoans","taxonomy-kind":"",percent:(W=e.dataSet.creditInstitutionKpis.tradingPortfolioAndInterbankLoans)==null?void 0:W.value},null,8,["percent"])])):y("",!0),e.dataSet.creditInstitutionKpis.tradingPortfolio||!e.dataSet.creditInstitutionKpis.tradingPortfolioAndInterbankLoans?(o(),r("div",wa,[g(f,{name:"tradingPortfolio",title:"Trading portfolio",percent:(V=e.dataSet.creditInstitutionKpis.tradingPortfolio)==null?void 0:V.value},null,8,["percent"])])):y("",!0),e.dataSet.creditInstitutionKpis.interbankLoans||!e.dataSet.creditInstitutionKpis.tradingPortfolioAndInterbankLoans?(o(),r("div",Pa,[g(f,{name:"onDemandInterbankLoans",title:"On demand interbank loans",percent:(ie=e.dataSet.creditInstitutionKpis.interbankLoans)==null?void 0:ie.value},null,8,["percent"])])):y("",!0),l("div",Ta,[g(f,{name:"greenAssetRatioCreditInstitution",title:"Green asset ratio",percent:(re=e.dataSet.creditInstitutionKpis.greenAssetRatio)==null?void 0:re.value},null,8,["percent"])])],64)):y("",!0),m==="InsuranceOrReinsurance"?(o(),r(D,{key:1},[Aa,l("div",Sa,[g(f,{name:"taxonomyEligibleNonLifeInsuranceActivities",title:"Taxonomy-eligible non-life insurance economic activities",percent:(se=e.dataSet.insuranceKpis.taxonomyEligibleNonLifeInsuranceActivities)==null?void 0:se.value},null,8,["percent"])])],64)):y("",!0),m==="InvestmentFirm"?(o(),r(D,{key:2},[Ra,l("div",Fa,[g(f,{name:"greenAssetRatioInvestmentFirm",title:"Green asset ratio",percent:(le=e.dataSet.investmentFirmKpis.greenAssetRatio)==null?void 0:le.value},null,8,["percent"])])],64)):y("",!0)],64)}),128))])])):y("",!0)],64)}const Ea=P(na,[["render",Oa]]),Ma=w({name:"DatasetDisplayStatusIndicator",components:{PrimeButton:fe},props:{displayedDataset:{type:Object},receivedMapOfReportingPeriodsToActiveDataMetaInfo:{type:Object,required:!0},isMultiview:{type:Boolean,default:!1}},computed:{displayWarning(){var e,t;return((e=this.displayedDataset)==null?void 0:e.currentlyActive)===!1||((t=this.displayedDataset)==null?void 0:t.qaStatus)&&this.displayedDataset.qaStatus!==q.Accepted||this.areMoreDatasetsViewableSimultaneously},warningMessage(){var e,t,a;return((e=this.displayedDataset)==null?void 0:e.qaStatus)===q.Pending?"This dataset is currently pending review":((t=this.displayedDataset)==null?void 0:t.qaStatus)===q.Rejected?"This dataset has been rejected":((a=this.displayedDataset)==null?void 0:a.currentlyActive)===!1?"This dataset is superseded":this.areMoreDatasetsViewableSimultaneously?"You are only viewing a single available dataset":"ERROR"},buttonLabel(){var e,t;return((e=this.displayedDataset)==null?void 0:e.qaStatus)===q.Pending||((t=this.displayedDataset)==null?void 0:t.currentlyActive)===!1?"View Active":this.areMoreDatasetsViewableSimultaneously?"View All":"ERROR"},link(){var e,t,a,n;return(e=this.displayedDataset)!=null&&e.qaStatus&&this.displayedDataset.qaStatus!==q.Accepted||((t=this.displayedDataset)==null?void 0:t.currentlyActive)===!1?`/companies/${this.displayedDataset.companyId}/frameworks/${this.displayedDataset.dataType}/reportingPeriods/${this.displayedDataset.reportingPeriod}`:this.areMoreDatasetsViewableSimultaneously?`/companies/${I((a=this.displayedDataset)==null?void 0:a.companyId)}/frameworks/${I((n=this.displayedDataset)==null?void 0:n.dataType)}`:void 0},existsAcceptedVersion(){var e;return this.receivedMapOfReportingPeriodsToActiveDataMetaInfo.has(((e=this.displayedDataset)==null?void 0:e.reportingPeriod)??"")},areMoreDatasetsViewableSimultaneously(){return this.isMultiview&&this.displayedDataset!=null&&this.receivedMapOfReportingPeriodsToActiveDataMetaInfo.size>1}}}),ka={key:0,"data-test":"datasetDisplayStatusContainer",class:"flex w-full info-bar",style:{"min-height":"2rem"}},_a={class:"flex-1"};function $a(e,t,a,n,i,u){const c=h("PrimeButton"),p=h("router-link");return e.displayWarning?(o(),r("div",ka,[l("span",_a,b(e.warningMessage),1),e.existsAcceptedVersion?(o(),C(p,{key:0,to:e.link,class:"no-underline","data-test":"datasetDisplayStatusLink"},{default:v(()=>[g(c,{label:e.buttonLabel,icon:"pi pi-stopwatch"},null,8,["label"])]),_:1},8,["to"])):y("",!0)])):y("",!0)}const Ce=P(Ma,[["render",$a]]),La=w({name:"ViewSingleDatasetDisplayBase",components:{DatasetDisplayStatusIndicator:Ce,ViewFrameworkBase:Ie,Dropdown:he,EuTaxonomyPanelFinancials:Ea},props:{companyId:{type:String},dataId:{type:String},reportingPeriod:{type:String},dataType:{type:String},viewInPreviewMode:{type:Boolean,default:!1}},data(){return{isWaitingForDataIdToDisplay:!0,receivedMapOfDistinctReportingPeriodsToActiveDataMetaInfo:{},reportingPeriodsInDropdown:[],chosenReportingPeriodInDropdown:"",dataMetaInfoForDisplay:null,isDataIdInUrlInvalid:!1,isReportingPeriodInUrlInvalid:!1,isDataIdToDisplayFound:!1,DataTypeEnum:R}},setup(){return{getKeycloakPromise:E("getKeycloakPromise")}},watch:{dataId(e){e&&this.getMetaDataForDataId(e)},reportingPeriod(e){this.switchToActiveDatasetForNewlyChosenReportingPeriod(e)}},computed:{humanizedDataDescription(){return S(this.dataType)},dataIdForPanelWithValidType(){var e,t;return((e=this.dataMetaInfoForDisplay)==null?void 0:e.dataType)===this.dataType?(t=this.dataMetaInfoForDisplay)==null?void 0:t.dataId:"loading"}},methods:{processDataMetaInfoForDisplay(e){this.chosenReportingPeriodInDropdown=e.reportingPeriod,this.isDataIdToDisplayFound=!0,this.dataMetaInfoForDisplay=e},handleChangeReportingPeriodEvent(e){this.routerPushToReportingPeriod(String(e.value))},switchToActiveDatasetForNewlyChosenReportingPeriod(e){this.isReportingPeriodInUrlInvalid=!1,this.isDataIdInUrlInvalid=!1;const t=this.receivedMapOfDistinctReportingPeriodsToActiveDataMetaInfo.get(e);t?(this.processDataMetaInfoForDisplay(t),this.routerPushToReportingPeriod(t.reportingPeriod)):e&&this.handleInvalidReportingPeriodPassedInUrl()},routerPushToReportingPeriod(e){this.companyId!=null&&this.dataType!=null&&this.$router.push(`/companies/${this.companyId}/frameworks/${this.dataType}/reportingPeriods/${e}`).catch(t=>console.log("Setting route for reporting period "+e+" failed with error "+String(t)))},getKeysFromMapAndReturnAsAlphabeticallySortedArray(e){return Array.from(e.keys()).sort((t,a)=>t>a?-1:0)},handleUpdateActiveDataMetaInfo(e){this.receivedMapOfDistinctReportingPeriodsToActiveDataMetaInfo=e,this.reportingPeriodsInDropdown=this.getKeysFromMapAndReturnAsAlphabeticallySortedArray(e),this.chooseDataMetaInfoForDisplayedDataset().catch(t=>console.log("Retrieving data meta info failed with error "+String(t))),this.isWaitingForDataIdToDisplay=!1},async chooseDataMetaInfoForDisplayedDataset(){this.dataId?await this.getMetaDataForDataId(this.dataId):!this.dataId&&this.reportingPeriod?this.switchToActiveDatasetForNewlyChosenReportingPeriod(this.reportingPeriod):this.switchToDefaultDatasetToDisplay()},async getMetaDataForDataId(e){var t;try{const i=(await(await new M(I(this.getKeycloakPromise)()).getMetaDataControllerApi()).getDataMetaInfo(e)).data;i.companyId!=this.companyId||i.dataType!=this.dataType?this.handleInvalidDataIdPassedInUrl():this.processDataMetaInfoForDisplay(i)}catch(a){((t=a.response)==null?void 0:t.status)==404&&this.handleInvalidDataIdPassedInUrl()}},handleInvalidDataIdPassedInUrl(){this.dataMetaInfoForDisplay=null,this.chosenReportingPeriodInDropdown="",this.isDataIdToDisplayFound=!1,this.isDataIdInUrlInvalid=!0},handleInvalidReportingPeriodPassedInUrl(){this.dataMetaInfoForDisplay=null,this.chosenReportingPeriodInDropdown="",this.isDataIdToDisplayFound=!1,this.isReportingPeriodInUrlInvalid=!0},switchToDefaultDatasetToDisplay(){const e=this.getActiveDataMetaInfoFromLatestReportingPeriodIfParsableAsNumber();e&&this.companyId&&this.dataType&&this.$router.replace(`/companies/${this.companyId}/frameworks/${this.dataType}/reportingPeriods/${e.reportingPeriod}`).catch(t=>console.log("Replacing route failed with error "+String(t)))},getActiveDataMetaInfoFromLatestReportingPeriodIfParsableAsNumber(){const[e]=this.receivedMapOfDistinctReportingPeriodsToActiveDataMetaInfo.values(),t=[];if(this.reportingPeriodsInDropdown.forEach(a=>{const n=parseInt(a);Number.isNaN(n)||t.push(n)}),t.length>0){const a=t.reduce((i,u)=>Math.max(i,u)).toString(),n=this.receivedMapOfDistinctReportingPeriodsToActiveDataMetaInfo.get(a);return n||e}else return e}}}),Na={key:0},Ka={class:"grid"},Ba={class:"col-12 text-left"},Ha={class:"mb-0","data-test":"frameworkDataTableTitle"},qa={class:"grid"},Ua={class:"col-7"},Ga={key:1,class:"col-12 text-left","data-test":"checkingIfAvailableIndicator"},za={key:2,"data-test":"noDataForThisFrameworkPresentErrorIndicator"},ja={key:3,"data-test":"noDataForThisDataIdPresentErrorIndicator"},Wa={key:4,"data-test":"noDataForThisReportingPeriodPresentErrorIndicator"};function Va(e,t,a,n,i,u){const c=h("Dropdown"),p=h("DatasetDisplayStatusIndicator"),f=h("EuTaxonomyPanelFinancials"),d=h("ViewFrameworkBase");return o(),C(d,{companyID:e.companyId,dataType:e.dataType,"single-data-meta-info-to-display":e.dataMetaInfoForDisplay,onUpdateActiveDataMetaInfoForChosenFramework:e.handleUpdateActiveDataMetaInfo,viewInPreviewMode:e.viewInPreviewMode},{reportingPeriodDropdown:v(()=>{var s;return[g(c,{id:"chooseReportingPeriodDropdown",modelValue:e.chosenReportingPeriodInDropdown,"onUpdate:modelValue":t[0]||(t[0]=m=>e.chosenReportingPeriodInDropdown=m),options:e.reportingPeriodsInDropdown,placeholder:((s=e.dataMetaInfoForDisplay)==null?void 0:s.reportingPeriod)||"Select...","aria-label":"Choose reporting period",class:K([[e.dataMetaInfoForDisplay?["always-fill"]:""],"fill-dropdown ml-4"]),dropdownIcon:"pi pi-angle-down",onChange:e.handleChangeReportingPeriodEvent},null,8,["modelValue","options","placeholder","class","onChange"])]}),content:v(()=>[e.isDataIdToDisplayFound?(o(),r("div",Na,[g(p,{"displayed-dataset":e.dataMetaInfoForDisplay,"received-map-of-reporting-periods-to-active-data-meta-info":e.receivedMapOfDistinctReportingPeriodsToActiveDataMetaInfo},null,8,["displayed-dataset","received-map-of-reporting-periods-to-active-data-meta-info"]),l("div",Ka,[l("div",Ba,[l("h2",Ha,b(e.humanizedDataDescription),1)])]),l("div",qa,[l("div",Ua,[e.dataType===e.DataTypeEnum.EutaxonomyFinancials?(o(),C(f,{key:0,dataID:e.dataIdForPanelWithValidType,viewInPreviewMode:e.viewInPreviewMode},null,8,["dataID","viewInPreviewMode"])):y("",!0)])])])):y("",!0),e.isWaitingForDataIdToDisplay?(o(),r("div",Ga,[l("h2",null,"Checking if "+b(e.humanizedDataDescription)+" data available...",1)])):y("",!0),!e.dataMetaInfoForDisplay&&!e.isWaitingForDataIdToDisplay?(o(),r("div",za,[l("h2",null,"No "+b(e.humanizedDataDescription)+" data present for this company.",1)])):y("",!0),e.isDataIdInUrlInvalid?(o(),r("div",ja,[l("h2",null," No "+b(e.humanizedDataDescription)+" data could be found for the data ID passed in the URL for this company and framework. ",1)])):y("",!0),e.isReportingPeriodInUrlInvalid?(o(),r("div",Wa,[l("h2",null," No "+b(e.humanizedDataDescription)+" data could be found for the reporting period passed in the URL for this company. ",1)])):y("",!0)]),_:1},8,["companyID","dataType","single-data-meta-info-to-display","onUpdateActiveDataMetaInfoForChosenFramework","viewInPreviewMode"])}const Ya=P(La,[["render",Va]]),G={companyId:{type:String},singleDataMetaInfoToDisplay:{type:Object}},xa=w({inject:["dialogRef"],name:"DetailsCompanyDataTable",components:{DataTable:B,Column:H},data(){return{listOfRowContents:[],kpiKeyOfTable:"",keysOfValuesForColumnDisplay:[],keysWithValuesToBeHumanized:["isInHouseProductionOrIsContractProcessing","sectors"],humanizeString:S,columnHeaders:{}}},mounted(){const t=this.dialogRef.data;this.kpiKeyOfTable=t.kpiKeyOfTable,this.columnHeaders=t.columnHeaders,typeof t.listOfRowContents[0]=="string"?(this.keysOfValuesForColumnDisplay.push(this.kpiKeyOfTable),this.listOfRowContents=t.listOfRowContents.map(a=>({[this.kpiKeyOfTable]:a}))):(this.listOfRowContents=t.listOfRowContents,this.generateColsNames())},methods:{generateColsNames(){const e=this.listOfRowContents.reduce(function(t,a){for(const n of Object.keys(a))t.indexOf(n)===-1&&t.push(n);return t},[]);for(const t of e)this.keysOfValuesForColumnDisplay.push(t)},humanizeStringIfNecessary(e,t){return this.keysWithValuesToBeHumanized.includes(e)?S(t):t}}}),Qa={key:0},Ja={key:1},Xa={key:2};function Za(e,t,a,n,i,u){const c=h("Column"),p=h("DataTable");return o(),C(p,{value:e.listOfRowContents},{default:v(()=>[(o(!0),r(D,null,T(e.keysOfValuesForColumnDisplay,f=>(o(),C(c,{field:f,key:f,header:e.columnHeaders[e.kpiKeyOfTable]?e.columnHeaders[e.kpiKeyOfTable][f]:e.humanizeString(e.kpiKeyOfTable),headerStyle:"width: 15vw;"},{body:v(({data:d})=>[d[f]?(o(),r(D,{key:0},[Array.isArray(d[f])?(o(),r("ul",Qa,[(o(!0),r(D,null,T(d[f],s=>(o(),r("li",{key:s},b(s),1))),128))])):typeof d[f]=="object"?(o(),r("div",Ja,[(o(!0),r(D,null,T(Object.entries(d[f]),([s,m])=>(o(),r("p",{key:s,style:{margin:"0",padding:"0"}},b(m),1))),128))])):(o(),r("span",Xa,b(e.humanizeStringIfNecessary(f,d[f])),1))],64)):y("",!0)]),_:2},1032,["field","header"]))),128))]),_:1},8,["value"])}const we=P(xa,[["render",Za]]);var en={name:"BaseColumnGroup",extends:me,props:{type:{type:String,default:null}},provide:function(){return{$parentInstance:this}}},tn={name:"ColumnGroup",extends:en,render:function(){return null}},an={name:"Row",extends:me,render:function(){return null}};function Pe(e){return I(Object.entries(Te).find(([t])=>t==e))[1]}var Te=(e=>(e.Afforestation="Afforestation",e.RehabilitationAndRestorationOfForestsIncludingReforestationAndNaturalForestRegenerationAfterAnExtremeEvent="Rehabilitation and restoration of forests, including reforestation and natural forest regeneration after an extreme event",e.ForestManagement="Forest management",e.ConservationForestry="Conservation forestry",e.RestorationOfWetlands="Restoration of wetlands",e.ManufactureOfRenewableEnergyTechnologies="Manufacture of renewable energy technologies",e.ManufactureOfEquipmentForTheProductionAndUseOfHydrogen="Manufacture of equipment for the production and use of hydrogen",e.ManufactureOfLowCarbonTechnologiesForTransport="Manufacture of low carbon technologies for transport",e.ManufactureOfBatteries="Manufacture of batteries",e.ManufactureOfEnergyEfficiencyEquipmentForBuildings="Manufacture of energy efficiency equipment for buildings",e.ManufactureOfOtherLowCarbonTechnologies="Manufacture of other low carbon technologies",e.ManufactureOfCement="Manufacture of cement",e.ManufactureOfAluminium="Manufacture of aluminium",e.ManufactureOfIronAndSteel="Manufacture of iron and steel",e.ManufactureOfHydrogen="Manufacture of hydrogen",e.ManufactureOfCarbonBlack="Manufacture of carbon black",e.ManufactureOfSodaAsh="Manufacture of soda ash",e.ManufactureOfChlorine="Manufacture of chlorine",e.ManufactureOfOrganicBasicChemicals="Manufacture of organic basic chemicals",e.ManufactureOfAnhydrousAmmonia="Manufacture of anhydrous ammonia",e.ManufactureOfNitricAcid="Manufacture of nitric acid",e.ManufactureOfPlasticsInPrimaryForm="Manufacture of plastics in primary form",e.ElectricityGenerationUsingSolarPhotovoltaicTechnology="Electricity generation using solar photovoltaic technology",e.ElectricityGenerationUsingConcentratedSolarPowerCspTechnology="Electricity generation using concentrated solar power (CSP) technology",e.ElectricityGenerationFromWindPower="Electricity generation from wind power",e.ElectricityGenerationFromOceanEnergyTechnologies="Electricity generation from ocean energy technologies",e.ElectricityGenerationFromHydropower="Electricity generation from hydropower",e.ElectricityGenerationFromGeothermalEnergy="Electricity generation from geothermal energy",e.ElectricityGenerationFromRenewableNonFossilGaseousAndLiquidFuels="Electricity generation from renewable non-fossil gaseous and liquid fuels",e.ElectricityGenerationFromBioenergy="Electricity generation from bioenergy",e.TransmissionAndDistributionOfElectricity="Transmission and distribution of electricity",e.StorageOfElectricity="Storage of electricity",e.StorageOfThermalEnergy="Storage of thermal energy",e.StorageOfHydrogen="Storage of hydrogen",e.ManufactureOfBiogasAndBiofuelsForUseInTransportAndOfBioliquids="Manufacture of biogas and biofuels for use in transport and of bioliquids",e.TransmissionAndDistributionNetworksForRenewableAndLowCarbonGases="Transmission and distribution networks for renewable and low-carbon gases",e.DistrictHeatingCoolingDistribution="District heating/cooling distribution",e.InstallationAndOperationOfElectricHeatPumps="Installation and operation of electric heat pumps",e.CogenerationOfHeatCoolAndPowerFromSolarEnergy="Cogeneration of heat/cool and power from solar energy",e.CogenerationOfHeatCoolAndPowerFromGeothermalEnergy="Cogeneration of heat/cool and power from geothermal energy",e.CogenerationOfHeatCoolAndPowerFromRenewableNonFossilGaseousAndLiquidFuels="Cogeneration of heat/cool and power from renewable non-fossil gaseous and liquid fuels",e.CogenerationOfHeatCoolAndPowerFromBioenergy="Cogeneration of heat/cool and power from bioenergy",e.ProductionOfHeatCoolFromSolarThermalHeating="Production of heat/cool from solar thermal heating",e.ProductionOfHeatCoolFromGeothermalEnergy="Production of heat/cool from geothermal energy",e.ProductionOfHeatCoolFromRenewableNonFossilGaseousAndLiquidFuels="Production of heat/cool from renewable non-fossil gaseous and liquid fuels",e.ProductionOfHeatCoolFromBioenergy="Production of heat/cool from bioenergy",e.ProductionOfHeatCoolUsingWasteHeat="Production of heat/cool using waste heat",e.PreCommercialStagesOfAdvancedTechnologiesToProduceEnergyFromNuclearProcessesWithMinimalWasteFromTheFuelCycle="Pre-commercial stages of advanced technologies to produce energy from nuclear processes with minimal waste from the fuel cycle",e.ConstructionAndSafeOperationOfNewNuclearPowerPlantsForTheGenerationOfElectricityAndOrHeatIncludingForHydrogenProductionUsingBestAvailableTechnologies="Construction and safe operation of new nuclear power plants, for the generation of electricity and/or heat, including for hydrogen production, using best-available technologies",e.ElectricityGenerationFromNuclearEnergyInExistingInstallations="Electricity generation from nuclear energy in existing installations",e.ElectricityGenerationFromFossilGaseousFuels="Electricity generation from fossil gaseous fuels",e.HighEfficiencyCoGenerationOfHeatCoolAndPowerFromFossilGaseousFuels="High-efficiency co-generation of heat/cool and power from fossil gaseous fuels",e.ProductionOfHeatCoolFromFossilGaseousFuelsInAnEfficientDistrictHeatingAndCoolingSystem="Production of heat/cool from fossil gaseous fuels in an efficient district heating and cooling system",e.ConstructionExtensionAndOperationOfWaterCollectionTreatmentAndSupplySystems="Construction, extension and operation of water collection, treatment and supply systems",e.RenewalOfWaterCollectionTreatmentAndSupplySystems="Renewal of water collection, treatment and supply systems",e.ConstructionExtensionAndOperationOfWasteWaterCollectionAndTreatment="Construction, extension and operation of waste water collection and treatment",e.RenewalOfWasteWaterCollectionAndTreatment="Renewal of waste water collection and treatment",e.CollectionAndTransportOfNonHazardousWasteInSourceSegregatedFractions="Collection and transport of non-hazardous waste in source segregated fractions",e.AnaerobicDigestionOfSewageSludge="Anaerobic digestion of sewage sludge",e.AnaerobicDigestionOfBioWaste="Anaerobic digestion of bio-waste",e.CompostingOfBioWaste="Composting of bio-waste",e.MaterialRecoveryFromNonHazardousWaste="Material recovery from non-hazardous waste",e.LandfillGasCaptureAndUtilisation="Landfill gas capture and utilisation",e.TransportOfCo2="Transport of CO2",e.UndergroundPermanentGeologicalStorageOfCo2="Underground permanent geological storage of CO2",e.PassengerInterurbanRailTransport="Passenger interurban rail transport",e.FreightRailTransport="Freight rail transport",e.UrbanAndSuburbanTransportRoadPassengerTransport="Urban and suburban transport, road passenger transport",e.OperationOfPersonalMobilityDevicesCycleLogistics="Operation of personal mobility devices, cycle logistics",e.TransportByMotorbikesPassengerCarsAndLightCommercialVehicles="Transport by motorbikes, passenger cars and light commercial vehicles",e.FreightTransportServicesByRoad="Freight transport services by road",e.InlandPassengerWaterTransport="Inland passenger water transport",e.InlandFreightWaterTransport="Inland freight water transport",e.RetrofittingOfInlandWaterPassengerAndFreightTransport="Retrofitting of inland water passenger and freight transport",e.SeaAndCoastalFreightWaterTransportVesselsForPortOperationsAndAuxiliaryActivities="Sea and coastal freight water transport, vessels for port operations and auxiliary activities",e.SeaAndCoastalPassengerWaterTransport="Sea and coastal passenger water transport",e.RetrofittingOfSeaAndCoastalFreightAndPassengerWaterTransport="Retrofitting of sea and coastal freight and passenger water transport",e.InfrastructureForPersonalMobilityCycleLogistics="Infrastructure for personal mobility, cycle logistics",e.InfrastructureForRailTransport="Infrastructure for rail transport",e.InfrastructureEnablingLowCarbonRoadTransportAndPublicTransport="Infrastructure enabling low-carbon road transport and public transport",e.InfrastructureEnablingLowCarbonWaterTransport="Infrastructure enabling low carbon water transport",e.LowCarbonAirportInfrastructure="Low carbon airport infrastructure",e.ConstructionOfNewBuildings="Construction of new buildings",e.RenovationOfExistingBuildings="Renovation of existing buildings",e.InstallationMaintenanceAndRepairOfEnergyEfficiencyEquipment="Installation, maintenance and repair of energy efficiency equipment",e.InstallationMaintenanceAndRepairOfChargingStationsForElectricVehiclesInBuildingsAndParkingSpacesAttachedToBuildings="Installation, maintenance and repair of charging stations for electric vehicles in buildings (and parking spaces attached to buildings)",e.InstallationMaintenanceAndRepairOfInstrumentsAndDevicesForMeasuringRegulationAndControllingEnergyPerformanceOfBuildings="Installation, maintenance and repair of instruments and devices for measuring, regulation and controlling energy performance of buildings",e.InstallationMaintenanceAndRepairOfRenewableEnergyTechnologies="Installation, maintenance and repair of renewable energy technologies",e.AcquisitionAndOwnershipOfBuildings="Acquisition and ownership of buildings",e.DataProcessingHostingAndRelatedActivities="Data processing, hosting and related activities",e.DataDrivenSolutionsForGhgEmissionsReductions="Data-driven solutions for GHG emissions reductions",e.CloseToMarketResearchDevelopmentAndInnovation="Close to market research, development and innovation",e.ResearchDevelopmentAndInnovationForDirectAirCaptureOfCo2="Research, development and innovation for direct air capture of CO2",e.ProfessionalServicesRelatedToEnergyPerformanceOfBuildings="Professional services related to energy performance of buildings",e.InfrastructureEnablingRoadTransportAndPublicTransport="Infrastructure enabling road transport and public transport",e.InfrastructureForWaterTransport="Infrastructure for water transport",e.AirportInfrastructure="Airport infrastructure",e.ComputerProgrammingConsultancyAndRelatedActivities="Computer programming, consultancy and related activities",e.ProgrammingAndBroadcastingActivities="Programming and broadcasting activities",e.EngineeringActivitiesAndRelatedTechnicalConsultancyDedicatedToAdaptationToClimateChange="Engineering activities and related technical consultancy dedicated to adaptation to climate change",e.NonLifeInsuranceUnderwritingOfClimateRelatedPerils="Non-life insurance: underwriting of climate-related perils",e.Reinsurance="Reinsurance",e.Education="Education",e.ResidentialCareActivities="Residential care activities",e.CreativeArtsAndEntertainmentActivities="Creative, arts and entertainment activities",e.LibrariesArchivesMuseumsAndCulturalActivities="Libraries, archives, museums and cultural activities",e.MotionPictureVideoAndTelevisionProgrammeProductionSoundRecordingAndMusicPublishingActivities="Motion picture, video and television programme production, sound recording and music publishing activities",e))(Te||{});function N(e,t=2){return e==null?"":`${Qe(e*100,t)} %`}function ae(e){return(e==null?void 0:e.amount)==null?"":`${e.amount.toLocaleString("en-GB",{minimumFractionDigits:2,maximumFractionDigits:2})}${e.currency?" "+e.currency:""}`}function ne(e){return e==null?"":e==0?"0":e.toLocaleString("en-GB",{maximumFractionDigits:2})}const nn={alignedActivities:{activityName:"Activity",naceCodes:"NACE Code(s)",share:"Share",revenue:"Revenue",revenuePercent:"Revenue (%)",substantialContributionToClimateChangeMitigationInPercent:"Climate Change Mitigation",substantialContributionToClimateChangeAdaptionInPercent:"Climate Change Adaptation",substantialContributionToSustainableUseAndProtectionOfWaterAndMarineResourcesInPercent:"Water and Marine Resources",substantialContributionToTransitionToACircularEconomyInPercent:"Circular Economy",substantialContributionToPollutionPreventionAndControlInPercent:"Pollution Prevention",substantialContributionToProtectionAndRestorationOfBiodiversityAndEcosystemsInPercent:"Biodiversity and Ecosystems",dnshToClimateChangeMitigation:"Climate Change Mitigation",dnshToClimateChangeAdaption:"Climate Change Adaptation",dnshToSustainableUseAndProtectionOfWaterAndMarineResources:"Water and Marine Resources",dnshToTransitionToACircularEconomy:"Circular Economy",dnshToPollutionPreventionAndControl:"Pollution Prevention",dnshToProtectionAndRestorationOfBiodiversityAndEcosystems:"Biodiversity and Ecosystems",minimumSafeguards:"Minimum safeguards",substantialContributionCriteria:"Substantial Contribution Criteria",dnshCriteria:"DNSH Criteria"},nonAlignedActivities:{activityName:"Activity",naceCodes:"NACE Code(s)",share:"Share",revenue:"Revenue",revenuePercent:"Revenue (%)"}},ue=["ClimateChangeMitigation","ClimateChangeAdaption","SustainableUseAndProtectionOfWaterAndMarineResources","TransitionToACircularEconomy","PollutionPreventionAndControl","ProtectionAndRestorationOfBiodiversityAndEcosystems"],on=w({inject:["dialogRef"],name:"AlignedActivitiesDataTable",components:{DataTable:B,Column:H,ColumnGroup:tn,Row:an},data(){return{listOfRowContents:[],kpiKeyOfTable:"",columnHeaders:{},frozenColumnDefinitions:[],mainColumnGroups:[],mainColumnDefinitions:[],frozenColumnData:[],mainColumnData:[]}},mounted(){const t=this.dialogRef.data;this.kpiKeyOfTable=t.kpiKeyOfTable,this.columnHeaders=t.columnHeaders,typeof t.listOfRowContents[0]=="string"?this.listOfRowContents=t.listOfRowContents.map(a=>({[this.kpiKeyOfTable]:a})):this.listOfRowContents=t.listOfRowContents,this.frozenColumnDefinitions=[{field:"activity",header:this.humanizeHeaderName("activity"),frozen:!0,group:"_frozen"},{field:"naceCodes",header:this.humanizeHeaderName("naceCodes"),frozen:!0,group:"_frozen"}],this.mainColumnDefinitions=[{field:"revenue",header:this.humanizeHeaderName("revenue"),group:"_revenue",groupIndex:0},{field:"revenuePercent",header:this.humanizeHeaderName("revenuePercent"),group:"_revenue",groupIndex:1},...this.makeGroupColumns("substantialContributionCriteria","substantialContribution"),...this.makeGroupColumns("dnshCriteria","dnsh"),{field:"minimumSafeguards",header:this.humanizeHeaderName("minimumSafeguards"),group:"_minimumSafeguards",groupIndex:0}],this.frozenColumnData=this.listOfRowContents.map(a=>({activity:a.activityName,naceCodes:a.naceCodes})),this.mainColumnData=this.listOfRowContents.map(a=>[...rn(a),...pe(a.activityName,"substantialContributionCriteria",{substantialContributionToClimateChangeMitigationInPercent:a.substantialContributionToClimateChangeMitigationInPercent,substantialContributionToClimateChangeAdaptionInPercent:a.substantialContributionToClimateChangeAdaptionInPercent,substantialContributionToSustainableUseAndProtectionOfWaterAndMarineResourcesInPercent:a.substantialContributionToSustainableUseAndProtectionOfWaterAndMarineResourcesInPercent,substantialContributionToTransitionToACircularEconomyInPercent:a.substantialContributionToTransitionToACircularEconomyInPercent,substantialContributionToPollutionPreventionAndControlInPercent:a.substantialContributionToPollutionPreventionAndControlInPercent,substantialContributionToProtectionAndRestorationOfBiodiversityAndEcosystemsInPercent:a.substantialContributionToProtectionAndRestorationOfBiodiversityAndEcosystemsInPercent},N),...pe(a.activityName,"dnshCriteria",{dnshToClimateChangeMitigation:a.dnshToClimateChangeMitigation,dnshToClimateChangeAdaption:a.dnshToClimateChangeAdaption,dnshToSustainableUseAndProtectionOfWaterAndMarineResources:a.dnshToSustainableUseAndProtectionOfWaterAndMarineResources,dnshToTransitionToACircularEconomy:a.dnshToTransitionToACircularEconomy,dnshToPollutionPreventionAndControl:a.dnshToPollutionPreventionAndControl,dnshToProtectionAndRestorationOfBiodiversityAndEcosystems:a.dnshToProtectionAndRestorationOfBiodiversityAndEcosystems},n=>n?`${n}`:""),...sn(a)]).flat(),this.mainColumnGroups=[{key:"_revenue",label:"",colspan:this.findMaxColspanForGroup("_revenue")},{key:"substantialContributionCriteria",label:this.humanizeHeaderName("substantialContributionCriteria"),colspan:this.findMaxColspanForGroup("substantialContributionCriteria")},{key:"dnshCriteria",label:this.humanizeHeaderName("dnshCriteria"),colspan:this.findMaxColspanForGroup("dnshCriteria")},{key:"_minimumSafeguards",label:"",colspan:this.findMaxColspanForGroup("_minimumSafeguards")}]},methods:{activityApiNameToHumanizedName:Pe,findMaxColspanForGroup(e){const t=ue.length;return{_revenue:2,substantialContributionCriteria:t,dnshCriteria:t,_minimumSafeguards:1}[e]},findContentFromActivityGroupAndField(e,t,a){const n=this.mainColumnData.find(i=>i.activity===e&&i.group===t&&i.field===a);return n?n.content:""},makeGroupColumns(e,t){return ue.map(n=>{const i=`${t}To${n}`;return t==="dnsh"?i:`${i}InPercent`}).map((n,i)=>({field:n,header:this.humanizeHeaderName(n),group:e,groupIndex:i}))},columnCss(e){switch(e){case"activity":return"col-activity";case"naceCodes":return"col-nace-codes";default:return""}},groupColumnCssClasses(e,t=""){return e.groupIndex===0?`first-group-column ${t}`:t},humanizeHeaderName(e){return this.columnHeaders[this.kpiKeyOfTable][e]}}});function rn(e){var t,a;return[{activity:e.activityName,group:"_revenue",field:"revenue",content:ae((t=e.share)==null?void 0:t.absoluteShare)},{activity:e.activityName,group:"_revenue",field:"revenuePercent",content:N((a=e.share)==null?void 0:a.relativeShareInPercent)}]}function pe(e,t,a,n){return Object.entries(a??{}).filter(([,u])=>u!=null).map(([u,c])=>({activity:e,group:t,field:u,content:n(c)??""}))}function sn(e){return[{activity:e.activityName,group:"_minimumSafeguards",field:"minimumSafeguards",content:e.minimumSafeguards??""}]}const ln={key:1,class:"unstyled-ul-list grid4"};function dn(e,t,a,n,i,u){const c=h("Column"),p=h("Row"),f=h("ColumnGroup"),d=h("DataTable");return o(),C(d,{"data-test":"dataTableTest",scrollable:"",value:e.frozenColumnData,class:"activities-data-table"},{default:v(()=>[g(f,{"data-test":"columnGroupTest",type:"header"},{default:v(()=>[g(p,null,{default:v(()=>[g(c,{header:"",frozen:!0,alignFrozen:"left",colspan:2,class:"frozen-row-header border-right",style:{"background-color":"#fff"}}),(o(!0),r(D,null,T(e.mainColumnGroups,s=>(o(),C(c,{"data-test":"mainColumnTest",key:s.key,header:s.label,colspan:s.colspan,class:"group-row-header"},null,8,["header","colspan"]))),128))]),_:1}),g(p,null,{default:v(()=>[g(c,{"data-test":"headerActivity",header:"Activity",frozen:!0,alignFrozen:"left",class:"frozen-row-header"}),g(c,{header:"NACE Code(s)",frozen:!0,alignFrozen:"left",class:"frozen-row-header border-right"}),(o(!0),r(D,null,T(e.mainColumnDefinitions,s=>(o(),C(c,{key:s.field,header:s.header,field:s.field,class:K(e.groupColumnCssClasses(s,"non-frozen-header"))},null,8,["header","field","class"]))),128))]),_:1})]),_:1}),(o(!0),r(D,null,T(e.frozenColumnDefinitions,s=>(o(),C(c,{field:s.field,key:s.field,header:s.header,frozen:s.frozen,class:K(e.columnCss(s.field)),bodyClass:"headers-bg",headerClass:"horizontal-headers-size"},{body:v(({data:m})=>[s.field==="activity"?(o(),r(D,{key:0},[F(b(e.activityApiNameToHumanizedName(m.activity)),1)],64)):(o(),r("ul",ln,[(o(!0),r(D,null,T(m.naceCodes,A=>(o(),r("li",{key:A},b(A),1))),128))]))]),_:2},1032,["field","header","frozen","class"]))),128)),(o(!0),r(D,null,T(e.mainColumnDefinitions,s=>(o(),C(c,{field:s.field,key:s.field,header:s.header,bodyClass:"col-value",headerClass:"horizontal-headers-size",class:K(e.groupColumnCssClasses(s))},{body:v(({data:m})=>[F(b(e.findContentFromActivityGroupAndField(m.activity,s.group,s.field)),1)]),_:2},1032,["field","header","class"]))),128))]),_:1},8,["value"])}const cn=P(on,[["render",dn]]),un=w({inject:["dialogRef"],name:"NonAlignedActivitiesDataTable",components:{DataTable:B,Column:H},data(){return{listOfRowContents:[],kpiKeyOfTable:"",columnHeaders:{},mainColumnDefinitions:[],mainColumnData:[]}},mounted(){const t=this.dialogRef.data;this.kpiKeyOfTable=t.kpiKeyOfTable,this.columnHeaders=t.columnHeaders,typeof t.listOfRowContents[0]=="string"?this.listOfRowContents=t.listOfRowContents.map(a=>({[this.kpiKeyOfTable]:a})):this.listOfRowContents=t.listOfRowContents,this.mainColumnDefinitions=[{field:"activity",header:this.humanizeHeaderName("activityName")},{field:"naceCodes",header:this.humanizeHeaderName("naceCodes")},{field:"revenue",header:this.humanizeHeaderName("revenue")},{field:"revenuePercent",header:this.humanizeHeaderName("revenuePercent")}],this.mainColumnData=this.listOfRowContents.map(a=>{var n,i;return{activity:a.activityName,naceCodes:a.naceCodes,revenue:ae((n=a.share)==null?void 0:n.absoluteShare),revenuePercent:N((i=a.share)==null?void 0:i.relativeShareInPercent)}})},methods:{activityApiNameToHumanizedName:Pe,humanizeHeaderName(e){return this.columnHeaders[this.kpiKeyOfTable][e]},cellClass(e){return e.field==="activity"?"col-activity headers-bg border-bottom":e.field==="naceCodes"?"col-nace-codes headers-bg border-bottom":"horizontal-headers-size border-bottom"}}}),pn={key:1,class:"unstyled-ul-list"};function fn(e,t,a,n,i,u){const c=h("Column"),p=h("DataTable");return o(),C(p,{"data-test":"dataTableTest",value:e.mainColumnData,class:"activities-data-table"},{default:v(()=>[(o(!0),r(D,null,T(e.mainColumnDefinitions,f=>(o(),C(c,{field:f.field,key:f.field,header:f.header,headerClass:e.cellClass(f),bodyClass:e.cellClass(f)},{body:v(({data:d})=>[f.field==="activity"?(o(),r(D,{key:0},[F(b(e.activityApiNameToHumanizedName(d.activity)),1)],64)):f.field==="naceCodes"?(o(),r("ul",pn,[(o(!0),r(D,null,T(d.naceCodes,s=>(o(),r("li",{key:s},b(s),1))),128))])):(o(),r(D,{key:2},[F(b(d[f.field]),1)],64))]),_:2},1032,["field","header","headerClass","bodyClass"]))),128))]),_:1},8,["value"])}const mn=P(un,[["render",fn]]),hn=w({name:"TwoLayerDataTable",components:{DataTable:B,Column:H,DocumentLink:Y},directives:{tooltip:ye},data(){return{expandedRowGroups:["_masterData","_general","_basicInformation"],yesLabelMap:new Map([[!0,"Certified"],[!1,"Yes"]]),noLabelMap:new Map([[!0,"Uncertified"],[!1,"No"]]),YesNo:x,rowClickHandlersMap:new Map,dataTableIdentifier:""}},props:{arrayOfKpiDataObjects:{type:Array,default:()=>[]},headerInputStyle:{type:String},listOfReportingPeriodsWithDataId:{type:Array,default:()=>[]},modalColumnHeaders:{type:Object,default:()=>({})},sortBySubcategoryKey:{type:Boolean,default:!0},unfoldSubcategories:{type:Boolean,default:!1}},created(){var e;this.unfoldSubcategories&&(this.expandedRowGroups=((e=this.arrayOfKpiDataObjects)==null?void 0:e.map(t=>t.subcategoryKey))??[]),this.dataTableIdentifier=(Math.random()+1).toString(36).substring(2),setTimeout(()=>{this.rowClickHandlersMap=ve(this.dataTableIdentifier,()=>this.expandedRowGroups,t=>this.expandedRowGroups=t)})},unmounted(){De(this.rowClickHandlersMap),this.rowClickHandlersMap=new Map},methods:{hasDocument(e){var t;return(e==null?void 0:e.value)===x.Yes&&((t=e==null?void 0:e.dataSource)==null?void 0:t.reference)!=null&&e.dataSource.reference.length>0},isCertificate(e){const t=e.toLowerCase();return t.includes("certificate")||t.includes("certification")},isYesNo(e){return Object.values(x).includes(e)},openModalAndDisplayValuesInSubTable(e,t,a,n="DetailsCompanyDataTable"){let i;n==="AlignedActivitiesDataTable"?i=cn:n==="NonAlignedActivitiesDataTable"?i=mn:i=we;const u={listOfRowContents:e,kpiKeyOfTable:a,columnHeaders:this.modalColumnHeaders};this.$dialog.open(i,{props:{header:t,modal:!0,dismissableMask:!0},data:u})}}});const gn=e=>(Z("data-v-5c7017b6"),e=e(),ee(),e),yn={class:"card"},bn=["data-test"],vn=["title"],Dn=["data-test"],In=["onClick"],Cn=gn(()=>l("em",{class:"material-icons","aria-hidden":"true",title:""}," dataset ",-1)),wn={key:1},Pn={key:1},Tn={key:2},An={key:0},Sn={key:1},Rn={key:2},Fn={key:3,style:{"white-space":"pre-wrap"}},On=["data-test","data-table-id","id"];function En(e,t,a,n,i,u){const c=h("Column"),p=h("DocumentLink"),f=h("DataTable"),d=X("tooltip");return o(),r("div",yn,[g(f,{value:e.arrayOfKpiDataObjects,rowGroupMode:"subheader",groupRowsBy:"subcategoryKey",dataKey:"subcategoryKey",sortField:e.sortBySubcategoryKey?"subcategoryKey":void 0,sortOrder:e.sortBySubcategoryKey?1:void 0,sortMode:"single",expandableRowGroups:!0,headerInputStyle:e.headerInputStyle,expandedRowGroups:e.expandedRowGroups,"onUpdate:expandedRowGroups":t[0]||(t[0]=s=>e.expandedRowGroups=s)},{groupheader:v(s=>[l("span",{"data-test":s.data.subcategoryKey,"data-table-id":e.dataTableIdentifier,id:s.data.subcategoryKey,"data-row-header-click":"",style:{cursor:"pointer"}},b(s.data.subcategoryLabel?s.data.subcategoryLabel:s.data.subcategoryKey),9,On)]),default:v(()=>[g(c,{bodyClass:"headers-bg",headerClass:"horizontal-headers-size",headerStyle:e.headerInputStyle,field:"kpiKey",header:"KPIs"},{body:v(s=>[l("span",{class:"table-left-label","data-test":s.data.kpiKey},b(s.data.kpiLabel),9,bn),s.data.kpiDescription?$((o(),r("em",{key:0,class:"material-icons info-icon","aria-hidden":"true",title:s.data.kpiLabel?s.data.kpiLabel:""},[F("info")],8,vn)),[[d,{value:s.data.kpiDescription?s.data.kpiDescription:""},void 0,{top:!0}]]):y("",!0)]),_:1},8,["headerStyle"]),(o(!0),r(D,null,T(e.listOfReportingPeriodsWithDataId,s=>(o(),C(c,{headerClass:"horizontal-headers-size",headerStyle:e.headerInputStyle,field:s.dataId,header:s.reportingPeriod,key:s.dataId},{body:v(m=>{var A;return[m.data.content[s.dataId]!==void 0&&m.data.content[s.dataId]!==null?(o(),r("span",{key:0,"data-test":`${s.reportingPeriod}_${m.data.categoryKey}_${m.data.kpiKey}`},[Array.isArray(m.data.content[s.dataId])?(o(),r(D,{key:0},[m.data.content[s.dataId].length>1||m.data.content[s.dataId].some(O=>typeof O=="object")?(o(),r("a",{key:0,onClick:O=>e.openModalAndDisplayValuesInSubTable(m.data.content[s.dataId],m.data.kpiLabel,m.data.kpiKey,m.data.kpiFormFieldComponent),class:"link"},[F('Show "'+b(m.data.kpiLabel)+'" ',1),Cn],8,In)):(o(),r("span",wn,b(m.data.content[s.dataId][0]),1))],64)):m.data.kpiFormFieldComponent==="PercentageFormField"&&m.data.content[s.dataId]!==""?(o(),r("span",Pn,b(m.data.content[s.dataId]),1)):typeof m.data.content[s.dataId]=="object"&&((A=m.data.content[s.dataId])==null?void 0:A.value)!==void 0?(o(),r("span",Tn,[e.isYesNo(m.data.content[s.dataId].value)&&e.hasDocument(m.data.content[s.dataId])?(o(),r("span",An,[g(p,{label:e.yesLabelMap.get(e.isCertificate(m.data.kpiLabel)),"download-name":m.data.content[s.dataId].dataSource.name,reference:m.data.content[s.dataId].dataSource.reference,"show-icon":""},null,8,["label","download-name","reference"])])):e.isYesNo(m.data.content[s.dataId].value)&&e.isCertificate(m.data.kpiLabel)?(o(),r("span",Sn,b(m.data.content[s.dataId].value===e.YesNo.Yes?e.yesLabelMap.get(!0):e.noLabelMap.get(!0)),1)):(o(),r("span",Rn,b(m.data.content[s.dataId].value),1))])):(o(),r("span",Fn,b(m.data.content[s.dataId]),1))],8,Dn)):y("",!0)]}),_:2},1032,["headerStyle","field","header"]))),128)),g(c,{field:"subcategoryKey"})]),_:1},8,["value","sortField","sortOrder","headerInputStyle","expandedRowGroups"])])}const Ae=P(hn,[["render",En],["__scopeId","data-v-5c7017b6"]]),Se={listOfProductionSites:{nameOfProductionSite:"Name",addressOfProductionSite:"Address",listOfGoodsOrServices:"List of Goods or Services"},mostImportantProducts:{name:"Product Name",productionSteps:"Production Steps",relatedCorporateSupplyChain:"Related Corporate Supply Chain"},procurementCategories:{procurementCategory:"Procurement Category",definitionsOfProductTypeOrService:"Definitions of Product Type or Service",suppliersAndCountries:"Number of Direct Suppliers and Countries",percentageOfTotalProcurement:"Order Volume"},industry:{industry:"NACE Code"},subcontractingCompaniesIndustries:{subcontractingCompaniesIndustries:"NACE Code"},highRiskCountriesRawMaterialsLocation:{highRiskCountriesRawMaterialsLocation:"Countries"},highRiskCountries:{highRiskCountries:"Countries"},subcontractingCompaniesCountries:{subcontractingCompaniesCountries:"Countries"}},Mn=w({name:"LksgPanel",components:{TwoLayerDataTable:Ae},data(){return{firstRender:!0,waitingForData:!0,lksgDataAndMetaInfo:[],arrayOfReportingPeriodWithDataId:[],mapOfKpiKeysToDataObjects:new Map,lksgModalColumnHeaders:Se}},props:G,watch:{companyId(){this.arrayOfReportingPeriodWithDataId=[],this.fetchLksgData()},singleDataMetaInfoToDisplay(){this.firstRender||(this.arrayOfReportingPeriodWithDataId=[],this.fetchLksgData())}},setup(){return{getKeycloakPromise:E("getKeycloakPromise")}},created(){this.fetchLksgData(),this.firstRender=!1},methods:{async fetchLksgData(){try{this.waitingForData=!0;const e=await new M(I(this.getKeycloakPromise)()).getLksgDataControllerApi();if(this.singleDataMetaInfoToDisplay){const t=(await e.getCompanyAssociatedLksgData(this.singleDataMetaInfoToDisplay.dataId)).data.data;this.lksgDataAndMetaInfo=[{metaInfo:this.singleDataMetaInfoToDisplay,data:t}]}else this.lksgDataAndMetaInfo=(await e.getAllCompanyLksgData(I(this.companyId))).data;this.convertLksgDataToFrontendFormat(),this.waitingForData=!1}catch(e){console.error(e)}},createKpiDataObjects(e,t,a,n){var c;const i=I(a.fields.find(p=>p.name===e)),u={subcategoryKey:a.name=="masterData"?`_${a.name}`:a.name,subcategoryLabel:a.label?a.label:a.name,kpiKey:e,kpiLabel:i!=null&&i.label?i.label:e,kpiDescription:i!=null&&i.description?i.description:"",kpiFormFieldComponent:(i==null?void 0:i.component)??"",content:{[n]:this.reformatValueForDisplay(i,t??"")}};this.mapOfKpiKeysToDataObjects.has(e)&&Object.assign(u.content,(c=this.mapOfKpiKeysToDataObjects.get(e))==null?void 0:c.content),this.mapOfKpiKeysToDataObjects.set(e,u)},convertLksgDataToFrontendFormat(){this.lksgDataAndMetaInfo.length&&this.lksgDataAndMetaInfo.forEach(e=>{var n,i;const t=((n=e.metaInfo)==null?void 0:n.dataId)??"",a=((i=e.metaInfo)==null?void 0:i.reportingPeriod)??"";this.arrayOfReportingPeriodWithDataId.push({dataId:t,reportingPeriod:a}),this.addKpisOfOneDatasetToTableModel(e.data,t)}),this.arrayOfReportingPeriodWithDataId=te(this.arrayOfReportingPeriodWithDataId)},addKpisOfOneDatasetToTableModel(e,t){var a;for(const[n,i]of Object.entries(e))if(i!=null){for(const[u,c]of Object.entries(i))if(c!=null)for(const[p,f]of Object.entries(c)){const d=I((a=je.find(s=>s.name===n))==null?void 0:a.subcategories.find(s=>s.name===u));this.createKpiDataObjects(p,f??"",d,t)}}},reformatCountriesValue(e){return Array.isArray(e)?e.map(t=>ce(t)):ce(e)??e},generateReadableCombinationOfNumberOfSuppliersAndCountries(e){if(e!=null){const t=Array.from(e.entries()).map(([a,n])=>{const i=this.reformatCountriesValue(a);return n!=null?String(n)+" suppliers from "+i:"There are suppliers from "+i});return t.length>1?t:t[0]}else return null},reformatProcurementCategoriesValue(e){return e==null?null:Object.entries(e).map(a=>{const[n,i]=a,u=i.procuredProductTypesAndServicesNaceCodes.length>1?i.procuredProductTypesAndServicesNaceCodes:i.procuredProductTypesAndServicesNaceCodes[0]??"";return{procurementCategory:n,procuredProductTypesAndServicesNaceCodes:J(u),suppliersAndCountries:this.generateReadableCombinationOfNumberOfSuppliersAndCountries(new Map(Object.entries(i.numberOfSuppliersPerCountryCode??{}))),percentageOfTotalProcurement:i.percentageOfTotalProcurement!=null?N(i.percentageOfTotalProcurement):null}})},reformatValueForDisplay(e,t){var n;e.name==="totalRevenue"&&typeof t=="number"&&(t=ge(t)),(e.name==="industry"||e.name==="subcontractingCompaniesIndustries")&&(t=J(t)),e.name.includes("Countries")&&e.component!=="YesNoFormField"&&(t=this.reformatCountriesValue(t)),e.component=="PercentageFormField"&&(t=N(t)),e.name==="productsServicesCategoriesPurchased"&&(t=this.reformatProcurementCategoriesValue(t)),typeof t=="number"&&e.component!="PercentageFormField"&&(t=ne(t));let a;if((n=e.options)!=null&&n.length){const i=e.options.find(u=>u.value===t);i&&(a=i.label)}return a??t}}}),kn={key:0,class:"d-center-div text-center px-7 py-4"},_n=l("p",{class:"font-medium text-xl"},"Loading LkSG Data...",-1),$n=l("em",{class:"pi pi-spinner pi-spin","aria-hidden":"true",style:{"z-index":"20",color:"#e67f3f"}},null,-1),Ln=[_n,$n],Nn={key:1};function Kn(e,t,a,n,i,u){const c=h("TwoLayerDataTable");return o(),r(D,null,[e.waitingForData?(o(),r("div",kn,Ln)):y("",!0),e.mapOfKpiKeysToDataObjects.size>0&&!e.waitingForData?(o(),r("div",Nn,[g(c,{arrayOfKpiDataObjects:Array.from(e.mapOfKpiKeysToDataObjects.values()),"list-of-reporting-periods-with-data-id":e.arrayOfReportingPeriodWithDataId,"modal-column-headers":e.lksgModalColumnHeaders},null,8,["arrayOfKpiDataObjects","list-of-reporting-periods-with-data-id","modal-column-headers"])])):y("",!0)],64)}const Bn=P(Mn,[["render",Kn]]),Hn=w({name:"SfdrDataTable",components:{DataTable:B,Column:H},directives:{tooltip:ye},data(){return{kpiDataObjectsToDisplay:[],expandedRowGroups:["_general"],listOfProductionSitesConvertedNames:Se.listOfProductionSites,rowClickHandlersMap:new Map}},props:{kpiDataObjects:{type:Array,default:()=>[],required:!0},reportingPeriodsOfDataSets:{type:Array,default:()=>[]},kpiNameMappings:{type:Object,default:()=>({})},kpiInfoMappings:{type:Object,default:()=>({})},subAreaNameMappings:{type:Object,default:()=>({})}},created(){setTimeout(()=>{this.rowClickHandlersMap=ve("sfdrDataTable",()=>this.expandedRowGroups,e=>this.expandedRowGroups=e)})},unmounted(){De(this.rowClickHandlersMap),this.rowClickHandlersMap=new Map},mounted(){this.kpiDataObjectsToDisplay=this.kpiDataObjects},methods:{openModalAndDisplayValuesInSubTable(e,t){this.$dialog.open(we,{props:{header:t,modal:!0,dismissableMask:!0},data:{listOfRowContents:e,columnHeaders:this.listOfProductionSitesConvertedNames}})}}});const qn=e=>(Z("data-v-1e8d8276"),e=e(),ee(),e),Un={class:"card"},Gn=["data-test"],zn=["title"],jn=["onClick"],Wn=qn(()=>l("em",{class:"material-icons","aria-hidden":"true",title:""}," dataset ",-1)),Vn={key:2},Yn=["id"];function xn(e,t,a,n,i,u){const c=h("Column"),p=h("DataTable"),f=X("tooltip");return o(),r("div",Un,[g(p,{value:e.kpiDataObjectsToDisplay,rowGroupMode:"subheader",groupRowsBy:"subAreaKey",dataKey:"subAreaKey",sortField:"subAreaKey",sortOrder:1,sortMode:"single",expandableRowGroups:!0,expandedRowGroups:e.expandedRowGroups,"onUpdate:expandedRowGroups":t[0]||(t[0]=d=>e.expandedRowGroups=d)},{groupheader:v(d=>[l("span",{id:d.data.subAreaKey,"data-table-id":"sfdrDataTable","data-row-header-click":""},b(e.subAreaNameMappings[d.data.subAreaKey]?e.subAreaNameMappings[d.data.subAreaKey]:d.data.subAreaKey),9,Yn)]),default:v(()=>[g(c,{bodyClass:"headers-bg",headerClass:"horizontal-headers-size",field:"kpiKey",header:"KPIs"},{body:v(d=>[l("span",{"data-test":d.data.kpiKey,class:"table-left-label"},b(e.kpiNameMappings[d.data.kpiKey]?e.kpiNameMappings[d.data.kpiKey]:d.data.kpiKey),9,Gn),$((o(),r("em",{class:"material-icons info-icon","aria-hidden":"true",title:e.kpiNameMappings[d.data.kpiKey]?e.kpiNameMappings[d.data.kpiKey]:""},[F("info")],8,zn)),[[f,{value:e.kpiInfoMappings[d.data.kpiKey]?e.kpiInfoMappings[d.data.kpiKey]:""},void 0,{top:!0}]])]),_:1}),(o(!0),r(D,null,T(e.reportingPeriodsOfDataSets,d=>(o(),C(c,{headerClass:"horizontal-headers-size",field:d.dataId,header:d.reportingPeriod,key:d.dataId},{body:v(({data:s})=>[Array.isArray(s[d.dataId])&&s[d.dataId].length?(o(),r("a",{key:0,onClick:m=>e.openModalAndDisplayValuesInSubTable(s[d.dataId],e.kpiNameMappings[s.kpiKey]),class:"link"},[F('Show "'+b(e.kpiNameMappings[s.kpiKey])+'" ',1),Wn],8,jn)):typeof s[d.dataId]=="object"&&s[d.dataId]!==null?(o(),r(D,{key:1},[F(b(s[d.dataId].value??""),1)],64)):(o(),r("span",Vn,b(Array.isArray(s[d.dataId])?"":s[d.dataId]),1))]),_:2},1032,["field","header"]))),128)),g(c,{field:"subAreaKey",header:"Impact Area"})]),_:1},8,["value","expandedRowGroups"])])}const Qn=P(Hn,[["render",xn],["__scopeId","data-v-1e8d8276"]]),Jn={dataDate:"Data Date",fiscalYearDeviation:"Fiscal Year Deviation",fiscalYearEnd:"Fiscal Year End",referencedReports:"Referenced Reports",annualReport:"Annual Report",groupLevelAnnualReport:"Group Level Annual Report",annualReportDate:"Annual Report Date",annualReportCurrency:"Annual Report Currency",sustainabilityReport:"Sustainability Report",groupLevelSustainabilityReport:"Group Level Sustainability Report",sustainabilityReportDate:"Sustainability Report Date",sustainabilityReportCurrency:"Sustainability Report Currency",integratedReport:"Integrated Report",groupLevelIntegratedReport:"Group Level Sustainability Report",integratedReportDate:"Integrated Report Date",integratedReportCurrency:"Integrated Report Currency",esefReport:"ESEF Report",groupLevelEsefReport:"Group Level ESEF Report",esefReportDate:"ESEF Report Date",esefReportCurrency:"ESEF Report Currency",scopeOfEntities:"Scope Of Entities",isGroupLevel:"Is Group Level",reportDate:"Report Date",currency:"Currency",reference:"Reference",reportedCasesOfBriberyCorruption:"Reported Cases Of Bribery Corruption",reportedConvictionsOfBriberyCorruption:"Reported Convictions Of Bribery Corruption",reportedFinesOfBriberyCorruption:"Reported Fines Of Bribery Corruption",primaryForestAndWoodedLandOfNativeSpeciesExposure:"Primary Forest And Wooded Land Of Native Species Exposure",protectedAreasExposure:"Protected Areas Exposure",rareOrEndangeredEcosystemsExposure:"Rare Or Endangered Ecosystems Exposure",inorganicPollutants:"Inorganic Pollutants",airPollutants:"Air Pollutants",ozoneDepletionSubstances:"Ozone Depletion Substances",carbonReductionInitiatives:"Carbon Reduction Initiatives",highImpactClimateSectorEnergyConsumptionNaceA:"High Impact Climate Sector Energy Consumption NACE A",highImpactClimateSectorEnergyConsumptionNaceB:"High Impact Climate Sector Energy Consumption NACE B",highImpactClimateSectorEnergyConsumptionNaceC:"High Impact Climate Sector Energy Consumption NACE C",highImpactClimateSectorEnergyConsumptionNaceD:"High Impact Climate Sector Energy Consumption NACE D",highImpactClimateSectorEnergyConsumptionNaceE:"High Impact Climate Sector Energy Consumption NACE E",highImpactClimateSectorEnergyConsumptionNaceF:"High Impact Climate Sector Energy Consumption NACE F",highImpactClimateSectorEnergyConsumptionNaceG:"High Impact Climate Sector Energy Consumption NACE G",highImpactClimateSectorEnergyConsumptionNaceH:"High Impact Climate Sector Energy Consumption NACE H",highImpactClimateSectorEnergyConsumptionNaceL:"High Impact Climate Sector Energy Consumption NACE L",nonRenewableEnergyConsumption:"Non-Renewable Energy Consumption",nonRenewableEnergyConsumptionCoal:"Non-Renewable Energy Consumption Coal",nonRenewableEnergyConsumptionCrudeOil:"Non-Renewable Energy Consumption Crude Oil",nonRenewableEnergyConsumptionFossilFuels:"Non-Renewable Energy Consumption Fossil Fuels",nonRenewableEnergyConsumptionLignite:"Non-Renewable Energy Consumption Lignite",nonRenewableEnergyConsumptionNaturalGas:"Non-Renewable Energy Consumption Natural Gas",nonRenewableEnergyConsumptionNuclearEnergy:"Non-Renewable Energy Consumption Nuclear Energy",nonRenewableEnergyConsumptionOther:"Non-Renewable Energy Consumption Other",nonRenewableEnergyProduction:"Non-Renewable Energy Production",renewableEnergyConsumption:"Renewable Energy Consumption",renewableEnergyProduction:"Renewable Energy Production",totalHighImpactClimateSectorEnergyConsumption:"Total High Impact Climate Sector Energy Consumption",enterpriseValue:"Enterprise Value",fossilFuelSectorExposure:"Fossil Fuel Sector Exposure",scope1:"Scope 1",scope2:"Scope 2",scope3:"Scope 3",securitiesNotCertifiedAsGreen:"Securities Not Certified As Green",humanRightsDueDiligence:"Human Rights Due Diligence",humanRightsPolicy:"Human Rights Policy",reportedChildLabourIncidents:"Reported Child Labour Incidents",reportedForcedOrCompulsoryLabourIncidents:"Reported Forced Or Compulsory Labour Incidents",reportedIncidentsOfHumanRights:"Reported Incidents Of Human Rights",traffickingInHumanBeingsPolicy:"Trafficking In Human Beings Policy",averageGrossHourlyEarningsFemaleEmployees:"Average Gross Hourly Earnings Female Employees",averageGrossHourlyEarningsMaleEmployees:"Average Gross Hourly Earnings Male Employees",briberyCorruptionPolicy:"Bribery Corruption Policy",ceoToEmployeePayGap:"CEO to Employee Pay Gap",childForcedDiscriminationPolicy:"Child Forced Discrimination Policy",controversialWeaponsExposure:"Controversial Weapons Exposure",corruptionLegalProceedings:"Corruption Legal Proceedings",environmentalPolicy:"Environmental Policy",fairBusinessMarketingAdvertisingPolicy:"Fair Business Marketing Advertising Policy",fairCompetitionPolicy:"Fair Competition Policy",femaleBoardMembers:"Female Board Members",humanRightsDueDiligencePolicy:"Human Rights Due Diligence Policy",humanRightsLegalProceedings:"Human Rights Legal Proceedings",iloCoreLabourStandards:"ILO Core Labour Standards",iso14001:"ISO 14001 Certificate",maleBoardMembers:"Male Board Members",oecdGuidelinesForMultinationalEnterprisesPolicy:"OECD Guidelines For Multinational Enterprises Policy",rateOfAccidents:"Rate Of Accidents",reportedIncidentsOfDiscrimination:"Reported Incidents Of Discrimination",sanctionsIncidentsOfDiscrimination:"Sanctions Incidents Of Discrimination",technologiesExpertiseTransferPolicy:"Technologies Expertise Transfer Policy",transparencyDisclosurePolicy:"Transparency Disclosure Policy",unGlobalCompactPrinciplesCompliancePolicy:"UN Global Compact Principles Compliance Policy",violationOfTaxRulesAndRegulation:"Violation Of Tax Rules And Regulation",whistleblowerProtectionPolicy:"Whistleblower Protection Policy",workdaysLost:"Workdays Lost",workplaceAccidentPreventionPolicy:"Workplace Accident Prevention Policy",biodiversityProtectionPolicy:"Biodiversity Protection Policy",deforestationPolicy:"Deforestation Policy",hazardousWaste:"Hazardous Waste",landDegradationDesertificationSoilSealingExposure:"Land Degradation Desertification Soil Sealing Exposure",manufactureOfAgrochemicalPesticidesProducts:"Manufacture Of Agrochemical Pesticides Products",sustainableAgriculturePolicy:"Sustainable Agriculture Policy",sustainableOceansAndSeasPolicy:"Sustainable Oceans And Seas Policy",threatenedSpeciesExposure:"Threatened Species Exposure",wasteNonRecycled:"Waste Non Recycled",emissionsToWater:"Emissions To Water",waterConsumption:"Water Consumption",waterManagementPolicy:"Water Management Policy",waterReused:"Water Reused",waterStressAreaExposure:"Water Stress Area Exposure",dataSource:"Data Source",quality:"Quality",comment:"Comment",tagName:"Tag Name",page:"Page",raport:"Raport",supplierCodeOfConduct:"Supplier Code Of Conduct",grievanceHandlingMechanism:"Grievance Handling Mechanism",totalRevenue:"Total Revenue"},Xn={dataDate:"The date until when the information collected is valid",fiscalYearDeviation:"Does the fiscal year deviate from the calender year?",fiscalYearEnd:"The date the fiscal year ends",referencedReports:"Does your company have a current annual report, sustainability report, integrated report or ESEF report? If yes, please share the information with us.",annualReport:"Link to Annual Report",groupLevelAnnualReport:"Is Annual Report on a Group level",annualReportDate:"The date for which the information presented in the report is valid through",annualReportCurrency:"The 3-letter alpha code that represents the currency used in the report",sustainabilityReport:"Link to Sustainability Report",groupLevelSustainabilityReport:"Is Sustainability Report on a Group level",sustainabilityReportDate:"The date for which the information presented in the report is valid through",sustainabilityReportCurrency:"The 3-letter alpha code that represents the currency used in the report",integratedReport:"Link to Integrated Report",groupLevelIntegratedReport:"Is Sustainability Report on a Group level",integratedReportDate:"The date for which the information presented in the report is valid through",integratedReportCurrency:"The 3-letter alpha code that represents the currency used in the report",esefReport:"Link to ESEF Report",groupLevelEsefReport:"Is ESEF Report on a Group level",esefReportDate:"The date for which the information presented in the report is valid through",esefReportCurrency:"The 3-letter alpha code that represents the currency used in the report",scopeOfEntities:"Does a list of legal entities covered by Sust./Annual/Integrated/ESEF report match with a list of legal entities covered by Audited Consolidated Financial Statement ",isGroupLevel:"Is the report on a Group Level",reportDate:"The date for which the information presented in the report is valid through",currency:"The 3-letter alpha code that represents the currency used in the report",reference:"The original report in PDF format",reportedCasesOfBriberyCorruption:"Number of cases with identified insufficiencies in actions taken to address breaches in procedures and standards of anti-corruption and anti-bribery",reportedConvictionsOfBriberyCorruption:"Numbers of convictions for violations of anti-corruption and anti-bribery laws",reportedFinesOfBriberyCorruption:"Amount of fines for violations of anti-corruption and anti-bribery laws.",primaryForestAndWoodedLandOfNativeSpeciesExposure:"Does the company have sites/operations located in primary forest and other wooded land, that is forest and other wooded land of native species, where there is no clearly visible indication of human activity and the ecological processes are not significantly disturbed - where activities of the company negatively affect those areas?",protectedAreasExposure:"Does the company have sites/operations located in areas designated by law or by the relevant competent authority for nature protection purposes, unless evidence is provided that the production of that raw material did not interfere with those nature protection purposes - where activities of the company negatively affect those areas?",rareOrEndangeredEcosystemsExposure:"Does the company have sites/operations located in  areas designated for the protection of rare, threatened or endangered ecosystems or species recognised by international agreements or included in lists drawn up by intergovernmental organisations or the International Union for the Conservation of Nature, subject to their recognition by the Commission (Commission may also recognise areas for the protection of rare, threatened or endangered ecosystems or species recognised by international agreements or included in lists drawn up by intergovernmental organisations or the International Union for the Conservation of Nature), unless evidence is provided that the production of that raw material did not interfere with those nature protection purposes  - where activities of the company negatively affect those areas?",inorganicPollutants:"Amount of emissions of Inorganic Pollutants",airPollutants:"Amount of emissions of Air Pollutants",ozoneDepletionSubstances:"Amount of emissions of Ozone Depletion Substances",carbonReductionInitiatives:"Has policies and procedures for a carbon emission reduction initiative aimed at aligning with the Paris Agreement. Has programs to reduce carbon emissions",highImpactClimateSectorEnergyConsumptionNaceA:"Total energy consumption per high impact climate sector",highImpactClimateSectorEnergyConsumptionNaceB:"Total energy consumption per high impact climate sector",highImpactClimateSectorEnergyConsumptionNaceC:"Total energy consumption per high impact climate sector",highImpactClimateSectorEnergyConsumptionNaceD:"Total energy consumption per high impact climate sector",highImpactClimateSectorEnergyConsumptionNaceE:"Total energy consumption per high impact climate sector",highImpactClimateSectorEnergyConsumptionNaceF:"Total energy consumption per high impact climate sector",highImpactClimateSectorEnergyConsumptionNaceG:"Total energy consumption per high impact climate sector",highImpactClimateSectorEnergyConsumptionNaceH:"Total energy consumption per high impact climate sector",highImpactClimateSectorEnergyConsumptionNaceL:"Total energy consumption per high impact climate sector",nonRenewableEnergyConsumption:"Value of energy consumed from non-renewable energy sources",nonRenewableEnergyConsumptionCoal:"Energy consumption by non-renewable energy sources such as coal",nonRenewableEnergyConsumptionCrudeOil:"Energy consumption by non-renewable energy sources such as crude oil",nonRenewableEnergyConsumptionFossilFuels:"Total amount of non-renewable energy consumption",nonRenewableEnergyConsumptionLignite:"Energy consumption by non-renewable energy sources such as lignite",nonRenewableEnergyConsumptionNaturalGas:"Energy consumption by non-renewable energy sources such as natural gas",nonRenewableEnergyConsumptionNuclearEnergy:"Energy consumption by non-renewable energy sources such as nuclear energy (Uranium)",nonRenewableEnergyConsumptionOther:"Energy consumption by non-renewable energy sources from any other available (used) non-renewable source of energy",nonRenewableEnergyProduction:"Value of energy produced from non-renewable energy sources",renewableEnergyConsumption:"Value of energy consumed from renewable energy sources",renewableEnergyProduction:"Value of energy produced from renewable energy sources",totalHighImpactClimateSectorEnergyConsumption:"Total energy consumption per high impact climate sector",enterpriseValue:"Enterprise value calculated as the sum, at fiscal year-end, of the market capitalisation of ordinary shares, the market capitalisation of preferred shares, and the book value of total debt and non-controlling interests, without the deduction of cash or cash equivalents",fossilFuelSectorExposure:"Does the company derive any revenues from fossil fuels?",scope1:"Scope 1 carbon emissions, namely emissions generated from sources that are controlled by the company that issues the underlying assets",scope2:"Scope 2 carbon emissions, namely emissions from the consumption of purchased electricity, steam, or other sources of energy generated upstream from the company that issues the underlying assets",scope3:"Scope 3 carbon emissions, namely all indirect emissions that are not covered by scope 1 and 2, that occur in the value chain of the reporting company, including both upstream and downstream emissions, in particular for sectors with a high impact on climate change and its mitigation",securitiesNotCertifiedAsGreen:"Does the company have investments not certified as green under a future EU legal act setting up an EU Green Bond Standard?",humanRightsDueDiligence:"Does the company have a due diligence process to identify, prevent, mitigate and address adverse human rights impacts?",humanRightsPolicy:"Does the company have a human rights policy in place?",reportedChildLabourIncidents:"Does the company exposed to operations and suppliers at significant risk of incidents of child labour exposed to hazardous work, in terms of of geographic areas or type of operation?",reportedForcedOrCompulsoryLabourIncidents:"Does the company exposed to operations and suppliers at significant risk of incidents of forced or compulsory labour in terms in terms of geographic areas and/or the type of operation?",reportedIncidentsOfHumanRights:"Number of cases of severe human rights issues and incidents connected to the company.",traffickingInHumanBeingsPolicy:"Does the company have a policies and procedures against trafficking in human beings ?",averageGrossHourlyEarningsFemaleEmployees:"Average gross hourly earnings of female employees",averageGrossHourlyEarningsMaleEmployees:"Average gross hourly earnings of male employees",briberyCorruptionPolicy:"Does the company have a policies and control systems in place to fight corruption ?",ceoToEmployeePayGap:"Ratio of the annual total compensation for the highest compensated individual to the median annual total compensation for all employees (excluding the highest-compensated individual)",childForcedDiscriminationPolicy:"Does the company have a policies and procedures to abolish all forms of child labour, forced labour and eliminate discrimination in the workplace?",controversialWeaponsExposure:"Is the company involved in the manufacture or selling of controversial weapons such as anti-personnel mines, cluster munitions, chemical weapons and biological weapons?",corruptionLegalProceedings:"Has the company been involved in corruption related legal proceedings?",environmentalPolicy:"Does the company have a statement of environmental policy?",fairBusinessMarketingAdvertisingPolicy:"Does the company have a policies and procedures in place to apply fair business, marketing and advertising practices and to guarantee the safety and quality of the goods and services ? ",fairCompetitionPolicy:"Does the company have a policies and procedures in place related to fair competition and anti-competitive cartels?",femaleBoardMembers:"Number of females on the board. Board means the administrative, management or supervisory body of a company",humanRightsDueDiligencePolicy:"Does the company have a policies and procedures to support/respect human rights and carry out due diligence to ensure that the business activities do not have a negative human rights impact?",humanRightsLegalProceedings:"Does the company have been involved in Human Rights related legal proceedings?",iloCoreLabourStandards:"Does the company abide by ILO Core Labour Standards?",iso14001:"Does the company have an ISO 14001 certificate?",maleBoardMembers:"Number of females on the board. Board means the administrative, management or supervisory body of a company",oecdGuidelinesForMultinationalEnterprisesPolicy:"Does the company have policies and procedures in place to monitor compliance with the UNGC principles or OECD Guidelines for Multinational Enterprises or grievance /complaints handling mechanisms to address violations of the UNGC principles or OECD Guidelines for Multinational Enterprises?",rateOfAccidents:"What is the Rate Of Accidents in the company?",reportedIncidentsOfDiscrimination:"Number of incidents of discrimination reported",sanctionsIncidentsOfDiscrimination:"Number of discrimination related incidents reported that lead to any kind of penalty and/or fine",technologiesExpertiseTransferPolicy:"Does the company have a policies and procedures in place to permit the transfer and rapid dissemination of technologies and expertise ?",transparencyDisclosurePolicy:"Does the company have a discloses policies related to transparency?",unGlobalCompactPrinciplesCompliancePolicy:"Does the company have policies and procedures in place to monitor compliance with the UNGC principles or OECD Guidelines for Multinational Enterprises or grievance /complaints handling mechanisms to address violations of the UNGC principles or OECD Guidelines for Multinational Enterprises?",violationOfTaxRulesAndRegulation:"Does the company makes contribution to public finances within the framework of applicable law and regulations, in accordance with the tax rules and regulations of the host countries and co-operate with the tax authorities?",whistleblowerProtectionPolicy:"Does the company have policies and procedures for the protection of whistleblowers?",workdaysLost:"Number of workdays lost to injuries, accidents, fatalities or illness",workplaceAccidentPreventionPolicy:"Does the company have a workplace accident prevention policy?",biodiversityProtectionPolicy:"Does the company have a biodiversity policy in place which covers operational sites owned, leased, managed in, or adjacent to, a protected area or an area of high biodiversity value outside protected areas?",deforestationPolicy:"Deforestation’ means the human-induced conversion of forested land to non-forested land, which can be permanent, when this change is definitive, or temporary when this change is part of a cycle that includes natural or assisted regeneration, according to the Intergovernmental Science-Policy Platform on Biodiversity and Ecosystem Services (IPBES) as referred to in paragraph 100 of Decision No 1386/2013/EU of the European Parliament and of the Council.",hazardousWaste:"Tonnes of hazardous waste generated, which are Explosives, Oxidizing substances, Highly flammable, Flammable, Harmful, Toxic, Carcinogenic, Corrosive, Infectious, Toxic for reproduction, Mutagenic, waste which releases toxic or very toxic gases in contact with water, air or an acid, Sensitizing, Ecotoxic, waste capable by any means after disposal of yielding substance  which possesses any of the characteristics listed above.",landDegradationDesertificationSoilSealingExposure:"Do the company's activities cause land degradation, desertification or soil sealing?",manufactureOfAgrochemicalPesticidesProducts:"Is the company involved in the manufacture of pesticides and other agrochemical products?",sustainableAgriculturePolicy:"Does the company have sustainable land/agriculture practices or policies?",sustainableOceansAndSeasPolicy:"Does the company have sustainable oceans/seas practices or policies?",threatenedSpeciesExposure:"Does the company involved in operations that affect threatened species?",wasteNonRecycled:"Tonnes of non-recycled waste generated by the company.",emissionsToWater:"Tonnes of Emissions To Water generated by the company.",waterConsumption:"Amount of water consumed by the company",waterManagementPolicy:"Does the company have a policies and procedures for water management?",waterReused:"Amount of water reused/reclaimed by the company",waterStressAreaExposure:"Does the company have sites located in areas of high water stress without a water management policy?",supplierCodeOfConduct:"Does the company have a Supplier Code Of Conduct (against unsafe working conditions, precarious work, child labour and forced labour)?",grievanceHandlingMechanism:"Does the company have a grievance/complaints handling mechanism related to employee matters?",totalRevenue:"Total Revenue for the financial year. I.e., Income arising in the course of an entity's ordinary activities., the amounts derived from the sale of products and the provision of services after deducting sales rebates and value added tax and other taxes directly linked to turnover. Overall turnover is equivalent to a firm's total revenues over some period of time"},Zn={antiCorruptionAndAntiBribery:"Anti-corruption and anti-bribery",biodiversity:"Biodiversity",childLabour:"Child labour",emissions:"Emissions",energyPerformance:"Energy performance",evidenceCertificatesAndAttestations:"Evidence, certificates and attestations",forcedLabourSlaveryAndDebtBondage:"Forced labour, slavery and debt bondage",freedomOfAssociation:"Freedom of association",_general:"General",greenhouseGasEmissions:"Greenhouse gas emissions",greenSecurities:"Green securities",grievanceMechanism:"Grievance mechanism",humanRights:"Human rights",osh:"OSH",codeOfConduct:"Code Of Conduct",riskManagement:"Risk management",socialAndEmployeeMatters:"Social and employee matters",water:"Water",waste:"Waste",environment:"Environment"},eo=w({name:"SfdrPanel",components:{SfdrDataTable:Qn},data(){return{firstRender:!0,waitingForData:!0,sfdrDataAndMetaInfo:[],listOfColumnIdentifierObjects:[],kpiDataObjects:[],sfdrKpisNameMappings:Jn,sfdrKpisInfoMappings:Xn,sfdrSubAreasNameMappings:Zn}},props:G,watch:{companyId(){this.listOfColumnIdentifierObjects=[],this.fetchSfdrData()},singleDataMetaInfoToDisplay(){this.firstRender||(this.listOfColumnIdentifierObjects=[],this.fetchSfdrData())}},setup(){return{getKeycloakPromise:E("getKeycloakPromise")}},created(){this.fetchSfdrData(),this.firstRender=!1},methods:{async fetchSfdrData(){try{this.waitingForData=!0;const e=await new M(I(this.getKeycloakPromise)()).getSfdrDataControllerApi();if(this.singleDataMetaInfoToDisplay){const t=(await e.getCompanyAssociatedSfdrData(this.singleDataMetaInfoToDisplay.dataId)).data.data;this.sfdrDataAndMetaInfo=[{metaInfo:this.singleDataMetaInfoToDisplay,data:t}]}else this.sfdrDataAndMetaInfo=(await e.getAllCompanySfdrData(I(this.companyId))).data;this.convertSfdrDataToFrontendFormat(),this.waitingForData=!1}catch(e){console.error(e)}},createKpiDataObjects(e,t,a,n){let i=-1;const u={subAreaKey:a=="general"?`_${a}`:a,kpiKey:e,[n]:t};i=this.kpiDataObjects.findIndex(c=>c.kpiKey===e),i!==-1?Object.assign(this.kpiDataObjects[i],u):this.kpiDataObjects.push(u)},createColumnIdentifierObject(e){var n,i;const t=((n=e.metaInfo)==null?void 0:n.dataId)??"",a=((i=e.metaInfo)==null?void 0:i.reportingPeriod)??"";return{dataId:t,reportingPeriod:a}},createKpiDataObjectsForSfdrDataProps(e,t){Object.entries(e).map(n=>(n[1]==null&&(n[1]=""),n)).forEach(n=>{const[i,u]=n;Object.entries(u).forEach(c=>{const[p,f]=c;this.createKpiDataObjects(p,f,i,t)})})},convertSfdrDataToFrontendFormat(){const e=this.sfdrDataAndMetaInfo.map(t=>{const a=this.createColumnIdentifierObject(t);return Object.values(t.data).filter(n=>n!==null).forEach(n=>{this.createKpiDataObjectsForSfdrDataProps(n,a.dataId)}),a});this.listOfColumnIdentifierObjects=te(e)}}}),to={key:0,class:"d-center-div text-center px-7 py-4"},ao=l("p",{class:"font-medium text-xl"},"Loading SFDR Data...",-1),no=l("em",{class:"pi pi-spinner pi-spin","aria-hidden":"true",style:{"z-index":"20",color:"#e67f3f"}},null,-1),oo=[ao,no],io={key:1};function ro(e,t,a,n,i,u){const c=h("SfdrDataTable");return o(),r(D,null,[e.waitingForData?(o(),r("div",to,oo)):y("",!0),e.kpiDataObjects.length&&!e.waitingForData?(o(),r("div",io,[g(c,{"data-test":"sfdrDataTable",kpiDataObjects:e.kpiDataObjects,reportingPeriodsOfDataSets:e.listOfColumnIdentifierObjects,kpiNameMappings:e.sfdrKpisNameMappings,kpiInfoMappings:e.sfdrKpisInfoMappings,subAreaNameMappings:e.sfdrSubAreasNameMappings},null,8,["kpiDataObjects","reportingPeriodsOfDataSets","kpiNameMappings","kpiInfoMappings","subAreaNameMappings"])])):y("",!0)],64)}const so=P(eo,[["render",ro]]),lo=w({name:"ThreeLayerTable",components:{TwoLayerDataTable:Ae,DataTable:B,Column:H},data(){return{expandedGroup:new Set([0]),resultKpiData:null,arrayOfReportingPeriodWithDataId:[],mapOfKpiKeysToDataObjects:new Map,mapOfCategoryKeysToDataObjectArrays:new Map,importantCategoryKeys:["general"],importantSubcategoryKeys:["general","basicInformation","masterData"]}},props:{dataModel:{type:Array,required:!0},dataAndMetaInfo:{type:Array,required:!0},formatValueForDisplay:{type:Function,default:(e,t)=>t},modalColumnHeaders:{type:Object,default:()=>({})},sortBySubcategoryKey:{type:Boolean,default:!0},unfoldSubcategories:{type:Boolean,default:!1}},mounted(){this.triggerConversionOfDataForDisplay()},watch:{dataAndMetaInfo(){this.triggerConversionOfDataForDisplay()}},emits:["dataConverted"],methods:{createKpiDataObjects(e,t,a,n,i){var f;const u=I(a.fields.find(d=>d.name===e)),c={categoryKey:this.importantCategoryKeys.includes(n.name)?`_${n.name}`:n.name,categoryLabel:n.label?n.label:n.name,subcategoryKey:this.importantSubcategoryKeys.includes(a.name)?`_${a.name}`:a.name,subcategoryLabel:a.label?a.label:a.name,kpiKey:e,kpiLabel:u!=null&&u.label?u.label:e,kpiDescription:u!=null&&u.description?u.description:"",kpiFormFieldComponent:(u==null?void 0:u.component)??"",content:{[i]:this.formatValueForDisplay(u,t)??""}},p=`${e}+${a.name}+${n.name}`;this.mapOfKpiKeysToDataObjects.has(p)&&Object.assign(c.content,(f=this.mapOfKpiKeysToDataObjects.get(p))==null?void 0:f.content),this.mapOfKpiKeysToDataObjects.set(p,c),this.resultKpiData=c},convertDataToFrontendFormat(){this.arrayOfReportingPeriodWithDataId=[],this.dataAndMetaInfo.length&&this.dataAndMetaInfo.forEach(e=>{var n,i;const t=((n=e.metaInfo)==null?void 0:n.dataId)??"",a=((i=e.metaInfo)==null?void 0:i.reportingPeriod)??"";this.arrayOfReportingPeriodWithDataId.push({dataId:t,reportingPeriod:a});for(const[u,c]of Object.entries(e.data)){if(u=="toApiModel"||c==null)continue;const p=[],f=I(this.dataModel.find(d=>d.name===u));this.iterateThroughSubcategories(c,u,f,t,p,e.data),this.mapOfCategoryKeysToDataObjectArrays.set(f.label,p)}}),this.arrayOfReportingPeriodWithDataId=te(this.arrayOfReportingPeriodWithDataId),this.$emit("dataConverted")},iterateThroughSubcategories(e,t,a,n,i,u){for(const[c,p]of Object.entries(e))p!=null&&this.iterateThroughSubcategoryKpis(p,t,c,a,n,i,u)},iterateThroughSubcategoryKpis(e,t,a,n,i,u,c){for(const[p,f]of Object.entries(e)){const d=I(n.subcategories.find(m=>m.name===a));I(d.fields.find(m=>m.name==p)).showIf(c.toApiModel())&&(this.createKpiDataObjects(p,f,d,n,i),u.push(this.resultKpiData))}},shouldCategoryBeRendered(e){const t=I(this.dataModel.find(a=>a.label===e));return this.dataAndMetaInfo.some(a=>t.showIf(a.data.toApiModel()))},colorOfCategory(e){return I(this.dataModel.find(t=>t.label===e)).color},toggleExpansion(e){this.expandedGroup.has(e)?this.expandedGroup.delete(e):this.expandedGroup.add(e)},triggerConversionOfDataForDisplay(){this.dataAndMetaInfo.length>0&&this.convertDataToFrontendFormat()}}});const co={key:0},uo=["onClick"],po=["data-test"],fo={class:"pt-2 pr-3 d-cursor-pointer d-chevron-style"},mo={key:0,class:"pr-1 pi pi-chevron-down d-chevron-font"},ho={key:1,class:"pr-1 pt-1 pi pi-chevron-right d-chevron-font"};function go(e,t,a,n,i,u){const c=h("Column"),p=h("DataTable"),f=h("TwoLayerDataTable");return $((o(),r("div",null,[g(p,{tableClass:"onlyHeaders"},{default:v(()=>[g(c,{headerStyle:"width: 30vw;",headerClass:"horizontal-headers-size first-horizontal-headers-size",header:"KPIs"}),(o(!0),r(D,null,T(e.arrayOfReportingPeriodWithDataId,d=>(o(),C(c,{headerClass:"horizontal-headers-size",headerStyle:"width: 30vw;",header:d.reportingPeriod,key:d.dataId},null,8,["header"]))),128))]),_:1}),(o(!0),r(D,null,T(e.mapOfCategoryKeysToDataObjectArrays,(d,s)=>(o(),r("div",{key:s,class:"d-table-style"},[e.shouldCategoryBeRendered(d[0])?(o(),r("div",co,[l("div",null,[l("div",{class:"pt-2 pl-2 pb-2 w-full d-cursor-pointer border-bottom-table p-2",onClick:m=>e.toggleExpansion(s)},[l("span",{class:K(`p-badge badge-${e.colorOfCategory(d[0])}`),"data-test":d[0]},b(d[0].toUpperCase()),11,po),l("button",fo,[e.expandedGroup.has(s)?(o(),r("span",mo)):(o(),r("span",ho))])],8,uo)]),$(l("div",null,[g(f,{"data-test":"TwoLayerTest",arrayOfKpiDataObjects:d[1],"list-of-reporting-periods-with-data-id":e.arrayOfReportingPeriodWithDataId,headerInputStyle:"display: none;","modal-column-headers":e.modalColumnHeaders,"sort-by-subcategory-key":e.sortBySubcategoryKey,"unfold-subcategories":e.unfoldSubcategories},null,8,["arrayOfKpiDataObjects","list-of-reporting-periods-with-data-id","modal-column-headers","sort-by-subcategory-key","unfold-subcategories"])],512),[[U,e.expandedGroup.has(s)]])])):y("",!0)]))),128))],512)),[[U,e.mapOfCategoryKeysToDataObjectArrays.size>0]])}const oe=P(lo,[["render",go],["__scopeId","data-v-1cb83a91"]]);function Re(e){return{metaInfo:e.metaInfo,data:{...e.data,toApiModel:()=>e.data}}}function yo(e,t){return e.name=="sector"?t.map(a=>S(a)):e.component=="PercentageFormField"?N(t):typeof t=="number"?ne(t):t}const bo=w({name:"P2pPanel",components:{ThreeLayerTable:oe},data(){return{DataTypeEnum:R,firstRender:!0,waitingForData:!0,p2pDataAndMetaInfo:[],p2pDataModel:We}},props:G,watch:{companyId(){this.fetchP2pData().catch(e=>console.log(e))},singleDataMetaInfoToDisplay(){this.firstRender||this.fetchP2pData().catch(e=>console.log(e))}},setup(){return{getKeycloakPromise:E("getKeycloakPromise")}},created(){this.fetchP2pData().catch(e=>console.log(e)),this.firstRender=!1},methods:{formatValueForDisplay:yo,getViewModelWithIdentityApiModel:Re,humanizeString:S,async fetchP2pData(){try{this.waitingForData=!0;const e=await new M(I(this.getKeycloakPromise)()).getP2pDataControllerApi();if(this.singleDataMetaInfoToDisplay){const t=(await e.getCompanyAssociatedP2pData(this.singleDataMetaInfoToDisplay.dataId)).data.data;this.p2pDataAndMetaInfo=[{metaInfo:this.singleDataMetaInfoToDisplay,data:t}]}else this.p2pDataAndMetaInfo=(await e.getAllCompanyP2pData(I(this.companyId))).data}catch(e){console.error(e)}},handleFinishedDataConversion(){this.waitingForData=!1}}}),vo={key:0,class:"d-center-div text-center px-7 py-4"},Do={class:"font-medium text-xl"},Io=l("em",{class:"pi pi-spinner pi-spin","aria-hidden":"true",style:{"z-index":"20",color:"#e67f3f"}},null,-1);function Co(e,t,a,n,i,u){const c=h("ThreeLayerTable");return o(),r(D,null,[e.waitingForData?(o(),r("div",vo,[l("p",Do,"Loading "+b(e.humanizeString(e.DataTypeEnum.P2p))+" Data...",1),Io])):y("",!0),$(l("div",null,[g(c,{"data-model":e.p2pDataModel,"data-and-meta-info":e.p2pDataAndMetaInfo.map(p=>e.getViewModelWithIdentityApiModel(p)),onDataConverted:e.handleFinishedDataConversion,"format-value-for-display":e.formatValueForDisplay},null,8,["data-model","data-and-meta-info","onDataConverted","format-value-for-display"])],512),[[U,!e.waitingForData]])],64)}const wo=P(bo,[["render",Co]]),Po=[{name:"general",label:"General",color:"orange",showIf:()=>!0,subcategories:[{name:"basicInformation",label:"Basic Information",fields:[{name:"sector",label:"Sector",description:"Please select the industry sector in which your company was mainly active in the relevant fiscal year.",unit:"",component:"NaceCodeFormField",evidenceDesired:!1,required:!0,showIf:()=>!0,validation:"required|length:1"},{name:"addressOfHeadquarters",label:"Address Of Headquarters",description:"Please provide the full address of your company's headquarters in the relevant fiscal year.",unit:"",component:"AddressFormField",evidenceDesired:!1,required:!0,showIf:()=>!0,validation:"required"},{name:"numberOfEmployees",label:"Number of Employees",description:"Please provide the number of workforce employed by your company in the relevant fiscal year.",unit:"",component:"NumberFormField",evidenceDesired:!1,required:!0,showIf:()=>!0,validation:"required"},{name:"fiscalYearStart",label:"Fiscal Year Start",description:"Please provide the starting date of the company's fiscal year to which you refer.",unit:"",component:"DateFormField",evidenceDesired:!1,required:!0,showIf:()=>!0,validation:"required"}]},{name:"companyFinancials",label:"Company Financials",fields:[{name:"revenueInEur",label:"Revenue in EUR",description:"Please provide your company's revenue in the relevant year in Euro.",unit:"",component:"NumberFormField",evidenceDesired:!1,required:!1,showIf:()=>!0},{name:"operatingCostInEur",label:"Operating Cost in EUR",description:"Please provide your company's operating cost in the relevant fiscal year in Euro.",unit:"",component:"NumberFormField",evidenceDesired:!1,required:!1,showIf:()=>!0},{name:"capitalAssetsInEur",label:"Capital assets in EUR",description:"Please provide the value of your company's capital assets in the relevant fiscal year in Euro.",unit:"",component:"NumberFormField",evidenceDesired:!1,required:!1,showIf:()=>!0}]}]},{name:"production",label:"Production",color:"orange",showIf:()=>!0,subcategories:[{name:"sites",label:"Sites",fields:[{name:"listOfProductionSites",label:"List of Production Sites",description:"Please provide the percentage of revenue generated at the provided main branch/production site or your headquarters relative to your company's total revenue in the relevant fiscal year.",unit:"",component:"ProductionSitesFormFieldSme",evidenceDesired:!1,required:!1,showIf:()=>!0}]},{name:"products",label:"Products",fields:[{name:"listOfProducts",label:"List of Products",description:"Please provide the HS-Code of the product category generating the highest revenue in your company in the relevant fiscal year. Please use the provided link to identify the product category code.",unit:"",component:"ProductsFormFieldSme",evidenceDesired:!1,required:!1,showIf:()=>!0}]}]},{name:"power",label:"Power",color:"yellow",showIf:()=>!0,subcategories:[{name:"investments",label:"Investments",fields:[{name:"percentageOfInvestmentsInEnhancingEnergyEfficiency",label:"Percentage of investments in enhancing energy efficiency",description:"Please provide the fraction of your company's total investments that was primarily spent to enhance energy efficiency in the last fiscal year.",unit:"",component:"RadioButtonsFormField",evidenceDesired:!1,options:[{label:"< 1%",value:"LessThan1"},{label:"1-5%",value:"Between1And5"},{label:"5-10%",value:"Between5And10"},{label:"10-15%",value:"Between10And15"},{label:"15-20%",value:"Between15And20"},{label:"20-25%",value:"Between20And25"},{label:"> 25%",value:"GreaterThan25"}],required:!1,showIf:()=>!0}]},{name:"consumption",label:"Consumption",fields:[{name:"powerConsumptionInMwh",label:"Power consumption in MWh",description:"Please provide your company's power consumption in the relevant fiscal year in MWh.",unit:"",component:"NumberFormField",evidenceDesired:!1,required:!1,showIf:()=>!0},{name:"powerFromRenewableSources",label:"power from renewable sources",description:"Please provide information whether your company has been primarily using power from renewable sources in the relevant fiscal year.",unit:"",component:"YesNoFormField",evidenceDesired:!1,required:!1,showIf:()=>!0,certificateRequiredIfYes:!1},{name:"energyConsumptionHeatingAndHotWater",label:"Energy consumption heating and hot water",description:"Please provide your company's power consumption for heating and hot water generation in the relevant fiscal year in MWh.",unit:"",component:"NumberFormField",evidenceDesired:!1,required:!1,showIf:()=>!0},{name:"primaryEnergySourceForHeatingAndHotWater",label:"Primary energy source for heating and hot water",description:"Please provide the energy source primarily used by your company for heating/hot water generation in the relevant fiscal year.",unit:"",component:"RadioButtonsFormField",evidenceDesired:!1,options:[{label:"Oil",value:"oil"},{label:"Gas",value:"gas"},{label:"Electric",value:"electric"},{label:"District Heating",value:"district heating"}],required:!1,showIf:()=>!0},{name:"energyConsumptionCoveredByOwnRenewablePowerGeneration",label:"Energy consumption covered by own renewable power generation",description:"Please provide the portion of consumed power generated by your own renewable sources relative to your company's total power consumption in the relevant fiscal year.",unit:"",component:"RadioButtonsFormField",evidenceDesired:!1,options:[{label:"< 25%",value:"LessThan25"},{label:"25-50%",value:"Between25And50"},{label:"50-75%",value:"Between50And75"},{label:"> 75%",value:"GreaterThan75"}],required:!1,showIf:()=>!0}]}]},{name:"insurances",label:"Insurances",color:"blue",showIf:()=>!0,subcategories:[{name:"naturalHazards",label:"Natural Hazards",fields:[{name:"insuranceAgainstNaturalHazards",label:"Insurance against natural hazards",description:"Please provide information whether your company has insurance against natural hazards at its branch/production site generating most revenue, or its headquarters.",unit:"",component:"YesNoFormField",evidenceDesired:!1,required:!1,showIf:()=>!0,certificateRequiredIfYes:!1},{name:"amountCoveredByInsuranceAgainstNaturalHazards",label:"Amount covered by insurance against natural hazards",description:"Please provide the amount covered by the insurance in EUR. In case your company has different policies for different natural hazards please provide the average amount covered.",unit:"",component:"NumberFormField",evidenceDesired:!1,required:!1,showIf:e=>{var t,a;return((a=(t=e==null?void 0:e.insurances)==null?void 0:t.naturalHazards)==null?void 0:a.insuranceAgainstNaturalHazards)==="Yes"}},{name:"naturalHazardsCovered",label:"Natural Hazards covered",description:"Please identify all natural hazards covered by your insurance.",unit:"",component:"MultiSelectFormField",evidenceDesired:!1,options:[{label:"Hail",value:"hail"},{label:"Wind",value:"wind"},{label:"Flooding",value:"flooding"},{label:"Earth Quakes",value:"earth quakes"},{label:"Avalanches",value:"avalanches"},{label:"Snow",value:"snow"}],required:!1,showIf:e=>{var t,a;return((a=(t=e==null?void 0:e.insurances)==null?void 0:t.naturalHazards)==null?void 0:a.insuranceAgainstNaturalHazards)==="Yes"},placeholder:"Select Options"}]}]}],To={listOfProductionSites:{nameOfProductionSite:"Name",addressOfProductionSite:"Address",percentageOfTotalRevenue:"Percentage of Total Revenue"},listOfProducts:{name:"Product Name",percentageOfTotalRevenue:"Percentage of Total Revenue"}},Ao=w({name:"SmePanel",components:{ThreeLayerTable:oe},data(){return{DataTypeEnum:R,smeDataModel:Po,firstRender:!0,waitingForData:!0,smeDataAndMetaInfo:[],smeModalColumnHeaders:To}},props:G,watch:{companyId(){this.fetchSmeData().catch(e=>console.log(e))},singleDataMetaInfoToDisplay(){this.firstRender||this.fetchSmeData().catch(e=>console.log(e))}},setup(){return{getKeycloakPromise:E("getKeycloakPromise")}},created(){this.fetchSmeData().catch(e=>console.log(e)),this.firstRender=!1},methods:{getViewModelWithIdentityApiModel:Re,humanizeString:S,async fetchSmeData(){try{this.waitingForData=!0;const e=await new M(I(this.getKeycloakPromise)()).getSmeDataControllerApi();if(this.singleDataMetaInfoToDisplay){const t=(await e.getCompanyAssociatedSmeData(this.singleDataMetaInfoToDisplay.dataId)).data.data;this.smeDataAndMetaInfo=[{metaInfo:this.singleDataMetaInfoToDisplay,data:t}]}else this.smeDataAndMetaInfo=(await e.getAllCompanySmeData(I(this.companyId))).data}catch(e){console.error(e)}},handleFinishedDataConversion(){this.waitingForData=!1},formatValueForDisplay(e,t){const a=["revenueInEur","operatingCostInEur","capitalAssetsInEur","amountCoveredByInsuranceAgainstNaturalHazards"],n=["percentageOfInvestmentsInEnhancingEnergyEfficiency","energyConsumptionCoveredByOwnRenewablePowerGeneration"];return t==null?t:e.name=="addressOfHeadquarters"?this.formatAddress(t):n.includes(e.name)?I(I(e.options).find(i=>i.value===t).label):e.name=="listOfProductionSites"?t.map(u=>({nameOfProductionSite:u.nameOfProductionSite,addressOfProductionSite:u.addressOfProductionSite,percentageOfTotalRevenue:u.percentageOfTotalRevenue?`${u.percentageOfTotalRevenue} %`:void 0})):e.name=="sector"?J(t):e.name=="listOfProducts"?t.map(u=>({name:u.name,percentageOfTotalRevenue:u.percentageOfTotalRevenue?`${u.percentageOfTotalRevenue} %`:void 0})):a.includes(e.name)?ge(t):t},formatAddress(e){function t(p){return p!=null&&p!=""}function a(p){const f=Object.entries(e).find(d=>d[0]==p);return f?f[1]:void 0}let n="";const i=a("streetAndHouseNumber");t(i)&&(n+=`${I(i)}
`);const u=a("postalCode");t(u)&&(n+=`${I(u)} `),n+=`${I(a("city"))}
`;const c=a("state");return t(c)&&(n+=`${I(c)}, `),n+=I(a("country")),n}}}),So={key:0,class:"d-center-div text-center px-7 py-4"},Ro={class:"font-medium text-xl"},Fo=l("em",{class:"pi pi-spinner pi-spin","aria-hidden":"true",style:{"z-index":"20",color:"#e67f3f"}},null,-1);function Oo(e,t,a,n,i,u){const c=h("ThreeLayerTable");return o(),r(D,null,[e.waitingForData?(o(),r("div",So,[l("p",Ro,"Loading "+b(e.humanizeString(e.DataTypeEnum.Sme))+" Data...",1),Fo])):y("",!0),$(l("div",null,[g(c,{"data-model":e.smeDataModel,"data-and-meta-info":e.smeDataAndMetaInfo.map(p=>e.getViewModelWithIdentityApiModel(p)),onDataConverted:e.handleFinishedDataConversion,"format-value-for-display":e.formatValueForDisplay,"modal-column-headers":e.smeModalColumnHeaders},null,8,["data-model","data-and-meta-info","onDataConverted","format-value-for-display","modal-column-headers"])],512),[[U,!e.waitingForData]])],64)}const Eo=P(Ao,[["render",Oo]]),Mo=[{name:"general",label:"General",color:"orange",showIf:()=>!0,subcategories:[{name:"general",label:"General",fields:[{name:"fiscalYearDeviation",label:"Fiscal Year Deviation",description:"Fiscal Year (Deviation/ No Deviation)",unit:"",component:"RadioButtonsFormField",evidenceDesired:!1,options:[{label:"Deviation",value:"Deviation"},{label:"No Deviation",value:"NoDeviation"}],required:!1,showIf:()=>!0},{name:"fiscalYearEnd",label:"Fiscal Year End",description:"The date the fiscal year ends",unit:"",component:"DateFormField",evidenceDesired:!1,required:!0,showIf:()=>!0,validation:"required"},{name:"scopeOfEntities",label:"Scope Of Entities",description:"Does a list of legal entities covered by Sust./Annual/Integrated/ESEF report match with a list of legal entities covered by Audited Consolidated Financial Statement ",unit:"",component:"YesNoNaFormField",evidenceDesired:!1,required:!1,showIf:()=>!0,certificateRequiredIfYes:!1},{name:"euTaxonomyActivityLevelReporting",label:"EU Taxonomy Activity Level Reporting",description:"Activity Level disclosure",unit:"",component:"YesNoFormField",evidenceDesired:!1,required:!1,showIf:()=>!0,certificateRequiredIfYes:!1},{name:"numberOfEmployees",label:"Number Of Employees",description:"Total number of employees (including temporary workers)",unit:"",component:"NumberFormField",evidenceDesired:!1,required:!1,showIf:()=>!0},{name:"nfrdMandatory",label:"NFRD Mandatory",description:"The reporting obligation for companies whose number of employees is greater or equal to 500",unit:"",component:"YesNoFormField",evidenceDesired:!1,required:!1,showIf:()=>!0,certificateRequiredIfYes:!1}]}]},{name:"assurance",label:"Assurance",showIf:()=>!0,subcategories:[{name:"assurance",label:"Assurance",fields:[{name:"levelOfAssurance",label:"Level of Assurance",description:"Level of Assurance of the EU Taxonomy disclosure (Reasonable Assurance, Limited Assurance, None)",unit:"",component:"UndefinedFormField",evidenceDesired:!0,required:!1,showIf:()=>!0},{name:"assuranceProvider",label:"Assurance Provider",description:"Provider of the Assurance",unit:"",component:"UndefinedFormField",evidenceDesired:!0,required:!1,showIf:()=>!0}]}]},{name:"revenue",label:"Revenue",color:"green",showIf:()=>!0,subcategories:[{name:"totalAmount",label:"Total Revenue",fields:[{name:"quality",label:"Quality",description:"The quality of the provided data",unit:"",component:"UndefinedFormField",evidenceDesired:!1,required:!1,showIf:()=>!0},{name:"value",label:"Value",description:"The provided data",unit:"",component:"UndefinedFormField",evidenceDesired:!1,required:!1,showIf:()=>!0},{name:"dataSource",label:"Data Source",description:"",unit:"",component:"UndefinedFormField",evidenceDesired:!1,required:!1,showIf:()=>!1},{name:"comment",label:"Comment",description:"",unit:"",component:"UndefinedFormField",evidenceDesired:!1,required:!1,showIf:()=>!1},{name:"unit",label:"Currency",description:"",unit:"",component:"UndefinedFormField",evidenceDesired:!1,required:!1,showIf:()=>!0}]},{name:"eligibleShare",label:"Eligible Revenue",fields:[{name:"relativeShareInPercent",label:"Percentage",description:"The relative share on the financial asset",unit:"",component:"PercentageFormField",evidenceDesired:!1,required:!1,showIf:()=>!0},{name:"absoluteShare",label:"Absolute share",description:"The absolute share on the financial asset",unit:"",component:"UndefinedFormField",evidenceDesired:!1,required:!1,showIf:()=>!0}]},{name:"alignedShare",label:"Aligned Revenue",fields:[{name:"relativeShareInPercent",label:"Percentage",description:"The relative share on the financial asset",unit:"",component:"PercentageFormField",evidenceDesired:!1,required:!1,showIf:()=>!0},{name:"absoluteShare",label:"Absolute share",description:"The absolute share on the financial asset",unit:"",component:"UndefinedFormField",evidenceDesired:!1,required:!1,showIf:()=>!0},{name:"substantialContributionToClimateChangeMitigationInPercent",label:"Substantial Contribution to Climate Change Mitigation",showIf:()=>!0,description:"",component:"PercentageFormField"},{name:"substantialContributionToClimateChangeAdaptionInPercent",label:"Substantial Contribution to Climate Change Adaption",showIf:()=>!0,description:"",component:"PercentageFormField"},{name:"substantialContributionToSustainableUseAndProtectionOfWaterAndMarineResourcesInPercent",label:"Substantial Contribution to Sustainable Use and Protection of Water and Marine Resources",showIf:()=>!0,description:"",component:"PercentageFormField"},{name:"substantialContributionToTransitionToACircularEconomyInPercent",label:"Substantial Contribution to Transition to a Circular Economy",showIf:()=>!0,description:"",component:"PercentageFormField"},{name:"substantialContributionToPollutionPreventionAndControlInPercent",label:"Substantial Contribution to Pollution Prevention and Control",showIf:()=>!0,description:"",component:"PercentageFormField"},{name:"substantialContributionToProtectionAndRestorationOfBiodiversityAndEcosystemsInPercent",label:"Substantial Contribution to Protection and Restoration of Biodiversity and Ecosystems",showIf:()=>!0,description:"",component:"PercentageFormField"},{name:"alignedActivities",label:"Aligned Revenue per Activity",description:"",unit:"",component:"AlignedActivitiesDataTable",evidenceDesired:!1,required:!1,showIf:()=>!0}]},{name:"nonAlignedShare",label:"Non-Aligned Revenue",fields:[{name:"relativeShareInPercent",label:"Percentage",description:"The relative share on the financial asset",unit:"",component:"PercentageFormField",evidenceDesired:!1,required:!1,showIf:()=>!0},{name:"absoluteShare",label:"Absolute share",description:"The absolute share on the financial asset",unit:"",component:"UndefinedFormField",evidenceDesired:!1,required:!1,showIf:()=>!0},{name:"nonAlignedActivities",label:"Non-Aligned Revenue per Activity",description:"",unit:"",component:"NonAlignedActivitiesDataTable",evidenceDesired:!1,required:!1,showIf:()=>!0}]},{name:"nonEligibleShare",label:"Non-Eligible Revenue",fields:[{name:"relativeShareInPercent",label:"Percentage",description:"The relative share on the financial asset",unit:"",component:"PercentageFormField",evidenceDesired:!1,required:!1,showIf:()=>!0},{name:"absoluteShare",label:"Absolute share",description:"The absolute share on the financial asset",unit:"",component:"UndefinedFormField",evidenceDesired:!1,required:!1,showIf:()=>!0}]},{name:"enablingShare",label:"Enabling Revenue",fields:[{name:"enablingShareInPercent",label:"Enabling Revenue",description:"",unit:"",component:"PercentageFormField",evidenceDesired:!1,required:!1,showIf:()=>!0}]},{name:"transitionalShare",label:"Transitional Revenue",fields:[{name:"transitionalShareInPercent",label:"Transitional Revenue",description:"",unit:"",component:"PercentageFormField",evidenceDesired:!1,required:!1,showIf:()=>!0}]}]},{name:"capex",label:"CapEx",color:"yellow",showIf:()=>!0,subcategories:[{name:"totalAmount",label:"Total CapEx",fields:[{name:"quality",label:"Quality",description:"The quality of the provided data",unit:"",component:"UndefinedFormField",evidenceDesired:!1,required:!1,showIf:()=>!0},{name:"value",label:"Value",description:"The provided data",unit:"",component:"UndefinedFormField",evidenceDesired:!1,required:!1,showIf:()=>!0},{name:"dataSource",label:"Data Source",description:"",unit:"",component:"UndefinedFormField",evidenceDesired:!1,required:!1,showIf:()=>!1},{name:"comment",label:"Comment",description:"",unit:"",component:"UndefinedFormField",evidenceDesired:!1,required:!1,showIf:()=>!1},{name:"unit",label:"Currency",description:"",unit:"",component:"UndefinedFormField",evidenceDesired:!1,required:!1,showIf:()=>!0}]},{name:"eligibleShare",label:"Eligible CapEx",fields:[{name:"relativeShareInPercent",label:"Percentage",description:"The relative share on the financial asset",unit:"",component:"PercentageFormField",evidenceDesired:!1,required:!1,showIf:()=>!0},{name:"absoluteShare",label:"Absolute share",description:"The absolute share on the financial asset",unit:"",component:"UndefinedFormField",evidenceDesired:!1,required:!1,showIf:()=>!0}]},{name:"alignedShare",label:"Aligned CapEx",fields:[{name:"relativeShareInPercent",label:"Percentage",description:"The relative share on the financial asset",unit:"",component:"PercentageFormField",evidenceDesired:!1,required:!1,showIf:()=>!0},{name:"absoluteShare",label:"Absolute share",description:"The absolute share on the financial asset",unit:"",component:"UndefinedFormField",evidenceDesired:!1,required:!1,showIf:()=>!0},{name:"substantialContributionToClimateChangeMitigationInPercent",label:"Substantial Contribution to Climate Change Mitigation",showIf:()=>!0,description:"",component:"PercentageFormField"},{name:"substantialContributionToClimateChangeAdaptionInPercent",label:"Substantial Contribution to Climate Change Adaption",showIf:()=>!0,description:"",component:"PercentageFormField"},{name:"substantialContributionToSustainableUseAndProtectionOfWaterAndMarineResourcesInPercent",label:"Substantial Contribution to Sustainable Use and Protection of Water and Marine Resources",showIf:()=>!0,description:"",component:"PercentageFormField"},{name:"substantialContributionToTransitionToACircularEconomyInPercent",label:"Substantial Contribution to Transition to a Circular Economy",showIf:()=>!0,description:"",component:"PercentageFormField"},{name:"substantialContributionToPollutionPreventionAndControlInPercent",label:"Substantial Contribution to Pollution Prevention and Control",showIf:()=>!0,description:"",component:"PercentageFormField"},{name:"substantialContributionToProtectionAndRestorationOfBiodiversityAndEcosystemsInPercent",label:"Substantial Contribution to Protection and Restoration of Biodiversity and Ecosystems",showIf:()=>!0,description:"",component:"PercentageFormField"},{name:"alignedActivities",label:"Aligned CapEx per Activity",description:"",unit:"",component:"AlignedActivitiesDataTable",evidenceDesired:!1,required:!1,showIf:()=>!0}]},{name:"nonAlignedShare",label:"Non-Aligned CapEx",fields:[{name:"relativeShareInPercent",label:"Percentage",description:"The relative share on the financial asset",unit:"",component:"PercentageFormField",evidenceDesired:!1,required:!1,showIf:()=>!0},{name:"absoluteShare",label:"Absolute share",description:"The absolute share on the financial asset",unit:"",component:"UndefinedFormField",evidenceDesired:!1,required:!1,showIf:()=>!0},{name:"nonAlignedActivities",label:"Non-Aligned CapEx per Activity",description:"",unit:"",component:"NonAlignedActivitiesDataTable",evidenceDesired:!1,required:!1,showIf:()=>!0}]},{name:"nonEligibleShare",label:"Non-Eligible CapEx",fields:[{name:"relativeShareInPercent",label:"Percentage",description:"The relative share on the financial asset",unit:"",component:"PercentageFormField",evidenceDesired:!1,required:!1,showIf:()=>!0},{name:"absoluteShare",label:"Absolute share",description:"The absolute share on the financial asset",unit:"",component:"UndefinedFormField",evidenceDesired:!1,required:!1,showIf:()=>!0}]},{name:"enablingShare",label:"Enabling CapEx",fields:[{name:"enablingShareInPercent",label:"Enabling CapEx",description:"",unit:"",component:"PercentageFormField",evidenceDesired:!1,required:!1,showIf:()=>!0}]},{name:"transitionalShare",label:"Transitional CapEx",fields:[{name:"transitionalShareInPercent",label:"Transitional CapEx",description:"",unit:"",component:"PercentageFormField",evidenceDesired:!1,required:!1,showIf:()=>!0}]}]},{name:"opex",label:"OpEx",color:"blue",showIf:()=>!0,subcategories:[{name:"totalAmount",label:"Total OpEx",fields:[{name:"quality",label:"Quality",description:"The quality of the provided data",unit:"",component:"UndefinedFormField",evidenceDesired:!1,required:!1,showIf:()=>!0},{name:"value",label:"Value",description:"The provided data",unit:"",component:"UndefinedFormField",evidenceDesired:!1,required:!1,showIf:()=>!0},{name:"dataSource",label:"Data Source",description:"",unit:"",component:"UndefinedFormField",evidenceDesired:!1,required:!1,showIf:()=>!1},{name:"comment",label:"Comment",description:"",unit:"",component:"UndefinedFormField",evidenceDesired:!1,required:!1,showIf:()=>!1},{name:"unit",label:"Currency",description:"",unit:"",component:"UndefinedFormField",evidenceDesired:!1,required:!1,showIf:()=>!0}]},{name:"eligibleShare",label:"Eligible OpEx",fields:[{name:"relativeShareInPercent",label:"Percentage",description:"The relative share on the financial asset",unit:"",component:"PercentageFormField",evidenceDesired:!1,required:!1,showIf:()=>!0},{name:"absoluteShare",label:"Absolute share",description:"The absolute share on the financial asset",unit:"",component:"UndefinedFormField",evidenceDesired:!1,required:!1,showIf:()=>!0}]},{name:"alignedShare",label:"Aligned OpEx",fields:[{name:"relativeShareInPercent",label:"Percentage",description:"The relative share on the financial asset",unit:"",component:"PercentageFormField",evidenceDesired:!1,required:!1,showIf:()=>!0},{name:"absoluteShare",label:"Absolute share",description:"The absolute share on the financial asset",unit:"",component:"UndefinedFormField",evidenceDesired:!1,required:!1,showIf:()=>!0},{name:"substantialContributionToClimateChangeMitigationInPercent",label:"Substantial Contribution to Climate Change Mitigation",showIf:()=>!0,description:"",component:"PercentageFormField"},{name:"substantialContributionToClimateChangeAdaptionInPercent",label:"Substantial Contribution to Climate Change Adaption",showIf:()=>!0,description:"",component:"PercentageFormField"},{name:"substantialContributionToSustainableUseAndProtectionOfWaterAndMarineResourcesInPercent",label:"Substantial Contribution to Sustainable Use and Protection of Water and Marine Resources",showIf:()=>!0,description:"",component:"PercentageFormField"},{name:"substantialContributionToTransitionToACircularEconomyInPercent",label:"Substantial Contribution to Transition to a Circular Economy",showIf:()=>!0,description:"",component:"PercentageFormField"},{name:"substantialContributionToPollutionPreventionAndControlInPercent",label:"Substantial Contribution to Pollution Prevention and Control",showIf:()=>!0,description:"",component:"PercentageFormField"},{name:"substantialContributionToProtectionAndRestorationOfBiodiversityAndEcosystemsInPercent",label:"Substantial Contribution to Protection and Restoration of Biodiversity and Ecosystems",showIf:()=>!0,description:"",component:"PercentageFormField"},{name:"alignedActivities",label:"Aligned OpEx per Activity",description:"",unit:"",component:"AlignedActivitiesDataTable",evidenceDesired:!1,required:!1,showIf:()=>!0}]},{name:"nonAlignedShare",label:"Non-Aligned OpEx",fields:[{name:"relativeShareInPercent",label:"Percentage",description:"The relative share on the financial asset",unit:"",component:"PercentageFormField",evidenceDesired:!1,required:!1,showIf:()=>!0},{name:"absoluteShare",label:"Absolute share",description:"The absolute share on the financial asset",unit:"",component:"UndefinedFormField",evidenceDesired:!1,required:!1,showIf:()=>!0},{name:"nonAlignedActivities",label:"Non-Aligned OpEx per Activity",description:"",unit:"",component:"NonAlignedActivitiesDataTable",evidenceDesired:!1,required:!1,showIf:()=>!0}]},{name:"nonEligibleShare",label:"Non-Eligible OpEx",fields:[{name:"relativeShareInPercent",label:"Percentage",description:"The relative share on the financial asset",unit:"",component:"PercentageFormField",evidenceDesired:!1,required:!1,showIf:()=>!0},{name:"absoluteShare",label:"Absolute share",description:"The absolute share on the financial asset",unit:"",component:"UndefinedFormField",evidenceDesired:!1,required:!1,showIf:()=>!0}]},{name:"enablingShare",label:"Enabling OpEx",fields:[{name:"enablingShareInPercent",label:"Enabling OpEx",description:"",unit:"",component:"PercentageFormField",evidenceDesired:!1,required:!1,showIf:()=>!0}]},{name:"transitionalShare",label:"Transitional OpEx",fields:[{name:"transitionalShareInPercent",label:"Transitional OpEx",description:"",unit:"",component:"PercentageFormField",evidenceDesired:!1,required:!1,showIf:()=>!0}]}]}];class _{constructor(t){k(this,"general");k(this,"assurance");k(this,"revenue");k(this,"capex");k(this,"opex");var a,n,i,u,c,p,f,d;this.general={general:{fiscalYearDeviation:(a=t.general)==null?void 0:a.fiscalYearDeviation,fiscalYearEnd:(n=t.general)==null?void 0:n.fiscalYearEnd,scopeOfEntities:(i=t.general)==null?void 0:i.scopeOfEntities,euTaxonomyActivityLevelReporting:(u=t.general)==null?void 0:u.euTaxonomyActivityLevelReporting,numberOfEmployees:(c=t.general)==null?void 0:c.numberOfEmployees,nfrdMandatory:(p=t.general)==null?void 0:p.nfrdMandatory}},this.assurance=((d=(f=t.general)==null?void 0:f.assurance)==null?void 0:d.assurance)==null?void 0:{assurance:{levelOfAssurance:t.general.assurance.assurance,assuranceProvider:t.general.assurance.provider}},this.revenue=_.convertDetailsPerCashFlowApiModelToViewModel(t.revenue),this.capex=_.convertDetailsPerCashFlowApiModelToViewModel(t.capex),this.opex=_.convertDetailsPerCashFlowApiModelToViewModel(t.opex)}toApiModel(){var t,a,n,i,u,c,p,f,d,s,m,A,O,L;return{general:{fiscalYearDeviation:(a=(t=this.general)==null?void 0:t.general)==null?void 0:a.fiscalYearDeviation,fiscalYearEnd:(i=(n=this.general)==null?void 0:n.general)==null?void 0:i.fiscalYearEnd,scopeOfEntities:(c=(u=this.general)==null?void 0:u.general)==null?void 0:c.scopeOfEntities,nfrdMandatory:(f=(p=this.general)==null?void 0:p.general)==null?void 0:f.nfrdMandatory,euTaxonomyActivityLevelReporting:(s=(d=this.general)==null?void 0:d.general)==null?void 0:s.euTaxonomyActivityLevelReporting,assurance:this.assurance==null?void 0:{assurance:(m=this.assurance)==null?void 0:m.assurance.levelOfAssurance,provider:(A=this.assurance)==null?void 0:A.assurance.assuranceProvider},numberOfEmployees:(L=(O=this.general)==null?void 0:O.general)==null?void 0:L.numberOfEmployees},revenue:_.convertDetailsPerCashFlowViewModelToApiModel(this.revenue),capex:_.convertDetailsPerCashFlowViewModelToApiModel(this.capex),opex:_.convertDetailsPerCashFlowViewModelToApiModel(this.opex)}}static convertDetailsPerCashFlowApiModelToViewModel(t){if(t!=null)return{totalAmount:t.totalAmount,eligibleShare:t.eligibleShare,alignedShare:{...t.alignedShare??{},substantialContributionToClimateChangeMitigationInPercent:t.substantialContributionToClimateChangeMitigationInPercent,substantialContributionToClimateChangeAdaptionInPercent:t.substantialContributionToClimateChangeAdaptionInPercent,substantialContributionToSustainableUseAndProtectionOfWaterAndMarineResourcesInPercent:t.substantialContributionToSustainableUseAndProtectionOfWaterAndMarineResourcesInPercent,substantialContributionToTransitionToACircularEconomyInPercent:t.substantialContributionToTransitionToACircularEconomyInPercent,substantialContributionToPollutionPreventionAndControlInPercent:t.substantialContributionToPollutionPreventionAndControlInPercent,substantialContributionToProtectionAndRestorationOfBiodiversityAndEcosystemsInPercent:t.substantialContributionToProtectionAndRestorationOfBiodiversityAndEcosystemsInPercent,alignedActivities:t.alignedActivities},nonAlignedShare:{...t.nonAlignedShare??{},nonAlignedActivities:t.nonAlignedActivities},nonEligibleShare:t.nonEligibleShare,enablingShare:{enablingShareInPercent:t.enablingShareInPercent},transitionalShare:{transitionalShareInPercent:t.transitionalShareInPercent}}}static convertDetailsPerCashFlowViewModelToApiModel(t){var a,n,i,u,c,p,f,d,s,m;if(t!=null)return{totalAmount:t.totalAmount,nonEligibleShare:t.nonEligibleShare,eligibleShare:t.eligibleShare,nonAlignedShare:t.nonAlignedShare,alignedShare:t.alignedShare,nonAlignedActivities:(a=t.nonAlignedShare)==null?void 0:a.nonAlignedActivities,alignedActivities:(n=t.alignedShare)==null?void 0:n.alignedActivities,substantialContributionToClimateChangeMitigationInPercent:(i=t.alignedShare)==null?void 0:i.substantialContributionToClimateChangeMitigationInPercent,substantialContributionToClimateChangeAdaptionInPercent:(u=t.alignedShare)==null?void 0:u.substantialContributionToClimateChangeAdaptionInPercent,substantialContributionToSustainableUseAndProtectionOfWaterAndMarineResourcesInPercent:(c=t.alignedShare)==null?void 0:c.substantialContributionToSustainableUseAndProtectionOfWaterAndMarineResourcesInPercent,substantialContributionToTransitionToACircularEconomyInPercent:(p=t.alignedShare)==null?void 0:p.substantialContributionToTransitionToACircularEconomyInPercent,substantialContributionToPollutionPreventionAndControlInPercent:(f=t.alignedShare)==null?void 0:f.substantialContributionToPollutionPreventionAndControlInPercent,substantialContributionToProtectionAndRestorationOfBiodiversityAndEcosystemsInPercent:(d=t.alignedShare)==null?void 0:d.substantialContributionToProtectionAndRestorationOfBiodiversityAndEcosystemsInPercent,enablingShareInPercent:(s=t.enablingShare)==null?void 0:s.enablingShareInPercent,transitionalShareInPercent:(m=t.transitionalShare)==null?void 0:m.transitionalShareInPercent}}}class ko{constructor(t){k(this,"metaInfo");k(this,"data");this.metaInfo=t.metaInfo,this.data=new _(t.data)}toApiModel(){return{metaInfo:this.metaInfo,data:this.data.toApiModel()}}}const _o=w({components:{DocumentLink:Y},inject:["dialogRef"],name:"PreviousReportsModal",data(){return{reportingPeriods:[],referencedReportsList:[],indexOfNewestReportingPeriod:9999}},created(){const t=this.dialogRef.data;this.reportingPeriods=t.reportingPeriodsForTable,this.referencedReportsList=t.referencedReportsForModal,this.indexOfNewestReportingPeriod=this.reportingPeriods.length-t.indexOfNewestReportingPeriodForModal-1,this.reportingPeriods.reverse(),this.referencedReportsList.reverse()}});const $o={class:"dataland-dialog dataland-dialog-sm","data-test":"previousReportsList"},Lo={key:0};function No(e,t,a,n,i,u){const c=h("DocumentLink");return o(),r("div",$o,[(o(!0),r(D,null,T(e.referencedReportsList,(p,f)=>(o(),r("div",{key:f,class:"row"},[f!==e.indexOfNewestReportingPeriod?(o(),r("div",Lo,[l("h4",null,b(`Company Reports (${e.reportingPeriods[f]})`),1),(o(!0),r(D,null,T(p,(d,s,m)=>(o(),r("div",{key:m,class:"row mb-2","data-test":"previousReportsList"},[g(c,{"download-name":s,reference:d.reference,"show-icon":""},null,8,["download-name","reference"])]))),128))])):y("",!0)]))),128))])}const Ko=P(_o,[["render",No],["__scopeId","data-v-8273a802"]]),Bo=w({name:"ShowMultipleReportsBanner",components:{DocumentLink:Y},data(){return{indexOfNewestReportingPeriod:-1}},props:{reports:{type:Array,required:!0},reportingPeriods:{type:Array,required:!0}},mounted(){this.indexOfNewestReportingPeriod=this.calculateIndexOfNewestReportingPeriod(this.reportingPeriods)},methods:{openModalAndDisplayPreviousReportsInTable(e){const t={reportingPeriodsForTable:e,referencedReportsForModal:this.reports,indexOfNewestReportingPeriodForModal:this.indexOfNewestReportingPeriod};this.$dialog.open(Ko,{props:{header:"Previous years reports",modal:!0,dismissableMask:!0},data:t})},calculateIndexOfNewestReportingPeriod(e){let t=0,a=0;for(let n=0;n<e.length;n++)Number(e[n])>a&&(a=Number(e[n]),t=n);return t},doPreviousReportsExist(e,t){if(!e)return!1;let a=!1;return e.forEach((n,i)=>{i!=t&&n&&(a=!0)}),a}}}),Ho={class:"next-to-each-other my-4"},qo={class:"m-0","data-test":"frameworkNewDataTableTitle"},Uo={id:"reportList"};function Go(e,t,a,n,i,u){const c=h("DocumentLink");return o(),r("div",Ho,[l("h4",qo,b(`Data extracted from the company report. Company Reports(${e.reportingPeriods[e.indexOfNewestReportingPeriod]}):`),1),l("span",Uo,[(o(!0),r(D,null,T(e.reports[e.indexOfNewestReportingPeriod],(p,f,d)=>(o(),r("span",{key:d,class:"link-in-list"},[g(c,{"data-test":"documentLinkTest","download-name":f,reference:p.reference,"font-style":"font-semibold"},null,8,["download-name","reference"])]))),128))]),e.doPreviousReportsExist(e.reports,e.indexOfNewestReportingPeriod)?(o(),r("span",{key:0,class:"link font-semibold underline mr-0 ml-auto",onClick:t[0]||(t[0]=p=>e.openModalAndDisplayPreviousReportsInTable(e.reportingPeriods)),"data-test":"previousReportsLinkToModal"},"Previous years reports ")):y("",!0)])}const zo=P(Bo,[["render",Go]]),jo=w({name:"EuTaxonomyForNonFinancialsPanel",components:{ThreeLayerTable:oe,ShowMultipleReportsBanner:zo},data(){return{DataTypeEnum:R,firstRender:!0,waitingForData:!0,waitingForReports:!0,convertedDataAndMetaInfo:[],euTaxonomyForNonFinancialsModalColumnHeaders:nn,euTaxonomyForNonFinancialsDisplayDataModel:Mo,dataSet:null,dataAndMetaInfoSets:null,extractedReportsAndReportingPeriods:null}},props:G,watch:{companyId(){this.fetchEuTaxonomyData().catch(e=>console.log(e))},singleDataMetaInfoToDisplay(){this.firstRender||this.fetchEuTaxonomyData().catch(e=>console.log(e))}},setup(){return{getKeycloakPromise:E("getKeycloakPromise")}},created(){this.fetchEuTaxonomyData().catch(e=>console.log(e)),this.firstRender=!1},methods:{humanizeString:S,async fetchEuTaxonomyData(){try{let e;this.waitingForData=!0;const t=await new M(I(this.getKeycloakPromise)()).getEuTaxonomyDataForNonFinancialsControllerApi();if(this.singleDataMetaInfoToDisplay){const a=(await t.getCompanyAssociatedEuTaxonomyDataForNonFinancials(this.singleDataMetaInfoToDisplay.dataId)).data.data;e=[{metaInfo:this.singleDataMetaInfoToDisplay,data:a}],this.dataSet=a,this.dataAndMetaInfoSets=e}else e=(await t.getAllCompanyEuTaxonomyDataForNonFinancials(I(this.companyId))).data,this.dataAndMetaInfoSets=e;this.extractedReportsAndReportingPeriods=this.extractReportsAndReportingPeriodsFromDataAndMetaInfoSets(this.dataAndMetaInfoSets),this.convertedDataAndMetaInfo=e.map(a=>new ko(a))}catch(e){console.error(e)}},handleFinishedDataConversion(){this.waitingForData=!1},isKpiObjectAmountWithCurrency(e){return typeof e=="object"&&"amount"in e&&(typeof e.amount=="number"||e.amount===null)&&"currency"in e&&(typeof e.currency=="string"||e.currency===null)},isKpiObjectAssuranceLevel(e){return typeof e=="string"?Object.values(Ve).includes(e):!1},isKpiObjectFiscalYearDeviation(e){return typeof e=="string"?Object.values(Xe).includes(e):!1},formatValueForDisplay(e,t){return t==null?t:this.isKpiObjectFiscalYearDeviation(t)||this.isKpiObjectAssuranceLevel(t)?S(t):e.component=="PercentageFormField"?N(t):this.isKpiObjectAmountWithCurrency(t)?ae(t):typeof t=="number"?ne(t):t},extractReportsAndReportingPeriodsFromDataAndMetaInfoSets(e){const t=[];let a;for(const i of e)a=i.metaInfo.reportingPeriod,a&&t.push(a);const n=e.map(i=>{var u,c;return(c=(u=i==null?void 0:i.data)==null?void 0:u.general)==null?void 0:c.referencedReports});return this.waitingForReports=!1,[n,t]}}}),Wo={key:0,class:"d-center-div text-center px-7 py-4"},Vo={class:"font-medium text-xl"},Yo=l("em",{class:"pi pi-spinner pi-spin","aria-hidden":"true",style:{"z-index":"20",color:"#e67f3f"}},null,-1),xo={"data-test":"multipleReportsBanner"};function Qo(e,t,a,n,i,u){const c=h("ShowMultipleReportsBanner"),p=h("ThreeLayerTable");return o(),r(D,null,[e.waitingForData?(o(),r("div",Wo,[l("p",Vo,"Loading "+b(e.humanizeString(e.DataTypeEnum.EutaxonomyNonFinancials))+" Data...",1),Yo])):y("",!0),$(l("div",xo,[e.extractedReportsAndReportingPeriods&&e.extractedReportsAndReportingPeriods[0]&&e.extractedReportsAndReportingPeriods[1]?(o(),C(c,{key:0,"data-test":"multipleReportsBanner","reporting-periods":e.extractedReportsAndReportingPeriods[1],reports:e.extractedReportsAndReportingPeriods[0]},null,8,["reporting-periods","reports"])):y("",!0),g(p,{"data-test":"ThreeLayerTableTest","data-model":e.euTaxonomyForNonFinancialsDisplayDataModel,"data-and-meta-info":e.convertedDataAndMetaInfo,onDataConverted:e.handleFinishedDataConversion,"format-value-for-display":e.formatValueForDisplay,"modal-column-headers":e.euTaxonomyForNonFinancialsModalColumnHeaders,"sort-by-subcategory-key":!1,"unfold-subcategories":!0},null,8,["data-model","data-and-meta-info","onDataConverted","format-value-for-display","modal-column-headers"])],512),[[U,!e.waitingForData]])],64)}const Jo=P(jo,[["render",Qo]]),Xo=w({name:"ViewMultipleDatasetsDisplayBase",components:{EuTaxonomyForNonFinancialsPanel:Jo,P2pPanel:wo,DatasetDisplayStatusIndicator:Ce,SfdrPanel:so,LksgPanel:Bn,ViewFrameworkBase:Ie,SmePanel:Eo},props:{companyId:{type:String},dataType:{type:String},dataId:{type:String},reportingPeriod:{type:String},viewInPreviewMode:{type:Boolean,default:!1}},data(){return{isWaitingForListOfDataIdsToDisplay:!0,isListOfDataIdsToDisplayFound:!1,receivedMapOfDistinctReportingPeriodsToActiveDataMetaInfo:{},singleDataMetaInfoToDisplay:null,humanizeString:S,isDataIdInUrlInvalid:!1,isReportingPeriodInUrlInvalid:!1,humanizedDataDescription:S(this.dataType),DataTypeEnum:R}},setup(){return{getKeycloakPromise:E("getKeycloakPromise")}},watch:{dataId(e){e?(this.setFlagsToDataNotFoundState(),this.getMetaDataForDataId(e)):this.reportingPeriod||this.setSingleDataMetaInfoToDisplay(null)},reportingPeriod(e){if(e){const t=this.receivedMapOfDistinctReportingPeriodsToActiveDataMetaInfo.get(e);t?this.getMetaDataForDataId(t.dataId).catch(a=>console.log("Retrieving meta data information for data ID "+t.dataId+" failed with error "+String(a))):this.isReportingPeriodInUrlInvalid=!0}else this.dataId||this.setSingleDataMetaInfoToDisplay(null)}},methods:{setFlagsToDataFoundState(){this.isListOfDataIdsToDisplayFound=!0,this.isDataIdInUrlInvalid=!1,this.isReportingPeriodInUrlInvalid=!1},setFlagsToDataNotFoundState(){this.isListOfDataIdsToDisplayFound=!1,this.isDataIdInUrlInvalid=!1,this.isReportingPeriodInUrlInvalid=!1},handleInvalidDataIdPassedInUrl(){this.isDataIdInUrlInvalid=!0,this.isListOfDataIdsToDisplayFound=!1},handleInvalidReportingPeriodPassedInUrl(){this.isReportingPeriodInUrlInvalid=!0,this.isListOfDataIdsToDisplayFound=!1},setSingleDataMetaInfoToDisplay(e){this.setFlagsToDataFoundState(),this.singleDataMetaInfoToDisplay=e},async getMetaDataForDataId(e){var t;try{const i=(await(await new M(I(this.getKeycloakPromise)()).getMetaDataControllerApi()).getDataMetaInfo(e)).data;i.companyId!=this.companyId||i.dataType!=this.dataType?this.handleInvalidDataIdPassedInUrl():this.setSingleDataMetaInfoToDisplay(i)}catch(a){((t=a.response)==null?void 0:t.status)==404&&this.handleInvalidDataIdPassedInUrl()}},async createListOfDataMetaInfoForDisplayedDatasets(){if(this.dataId)await this.getMetaDataForDataId(this.dataId);else if(!this.dataId&&this.reportingPeriod){const e=this.receivedMapOfDistinctReportingPeriodsToActiveDataMetaInfo.get(this.reportingPeriod);e?this.setSingleDataMetaInfoToDisplay(e):this.handleInvalidReportingPeriodPassedInUrl()}else this.setFlagsToDataFoundState()},handleUpdateActiveDataMetaInfo(e){this.receivedMapOfDistinctReportingPeriodsToActiveDataMetaInfo=e,this.createListOfDataMetaInfoForDisplayedDatasets().catch(t=>console.log("Retrieving data meta info failed with error "+String(t))),this.isWaitingForListOfDataIdsToDisplay=!1}}}),Zo={key:0},ei={class:"grid"},ti={class:"col-12 text-left"},ai={class:"mb-0","data-test":"frameworkDataTableTitle"},ni={class:"col-12"},oi={key:1,class:"col-12 text-left"},ii={key:2,class:"col-12 text-left","data-test":"noDataForThisFrameworkPresentErrorIndicator"},ri={key:3,"data-test":"noDataForThisDataIdPresentErrorIndicator"},si={key:4,"data-test":"noDataForThisReportingPeriodPresentErrorIndicator"};function li(e,t,a,n,i,u){const c=h("DatasetDisplayStatusIndicator"),p=h("EuTaxonomyForNonFinancialsPanel"),f=h("LksgPanel"),d=h("SfdrPanel"),s=h("P2pPanel"),m=h("SmePanel"),A=h("ViewFrameworkBase");return o(),C(A,{companyID:e.companyId,dataType:e.dataType,singleDataMetaInfoToDisplay:e.singleDataMetaInfoToDisplay,onUpdateActiveDataMetaInfoForChosenFramework:e.handleUpdateActiveDataMetaInfo,viewInPreviewMode:e.viewInPreviewMode},{content:v(()=>[e.isListOfDataIdsToDisplayFound?(o(),r("div",Zo,[g(c,{"displayed-dataset":e.singleDataMetaInfoToDisplay,"received-map-of-reporting-periods-to-active-data-meta-info":e.receivedMapOfDistinctReportingPeriodsToActiveDataMetaInfo,"is-multiview":!0},null,8,["displayed-dataset","received-map-of-reporting-periods-to-active-data-meta-info"]),l("div",ei,[l("div",ti,[l("h2",ai,b(e.humanizeString(e.dataType)),1)]),l("div",ni,[e.dataType===e.DataTypeEnum.EutaxonomyNonFinancials?(o(),C(p,{key:0,companyId:e.companyId,singleDataMetaInfoToDisplay:e.singleDataMetaInfoToDisplay},null,8,["companyId","singleDataMetaInfoToDisplay"])):y("",!0),e.dataType===e.DataTypeEnum.Lksg?(o(),C(f,{key:1,companyId:e.companyId,singleDataMetaInfoToDisplay:e.singleDataMetaInfoToDisplay},null,8,["companyId","singleDataMetaInfoToDisplay"])):y("",!0),e.dataType===e.DataTypeEnum.Sfdr?(o(),C(d,{key:2,companyId:e.companyId,singleDataMetaInfoToDisplay:e.singleDataMetaInfoToDisplay},null,8,["companyId","singleDataMetaInfoToDisplay"])):y("",!0),e.dataType===e.DataTypeEnum.P2p?(o(),C(s,{key:3,"company-id":e.companyId,"single-data-meta-info-to-display":e.singleDataMetaInfoToDisplay},null,8,["company-id","single-data-meta-info-to-display"])):y("",!0),e.dataType===e.DataTypeEnum.Sme?(o(),C(m,{key:4,"company-id":e.companyId,"single-data-meta-info-to-display":e.singleDataMetaInfoToDisplay},null,8,["company-id","single-data-meta-info-to-display"])):y("",!0)])])])):y("",!0),e.isWaitingForListOfDataIdsToDisplay?(o(),r("div",oi,[l("h2",null,"Checking if "+b(e.humanizeString(e.dataType))+" data available...",1)])):y("",!0),!e.isListOfDataIdsToDisplayFound&&!e.isWaitingForListOfDataIdsToDisplay?(o(),r("div",ii,[l("h2",null,"No "+b(e.humanizedDataDescription)+" data present for this company.",1)])):y("",!0),e.isDataIdInUrlInvalid?(o(),r("div",ri,[l("h2",null," No "+b(e.humanizedDataDescription)+" data could be found for the data ID passed in the URL for this company and framework. ",1)])):y("",!0),e.isReportingPeriodInUrlInvalid?(o(),r("div",si,[l("h2",null," No "+b(e.humanizedDataDescription)+" data could be found for the reporting period passed in the URL for this company. ",1)])):y("",!0)]),_:1},8,["companyID","dataType","singleDataMetaInfoToDisplay","onUpdateActiveDataMetaInfoForChosenFramework","viewInPreviewMode"])}const di=P(Xo,[["render",li]]),ci=w({name:"ViewFrameworkData",components:{AuthenticationWrapper:Ue,ViewSingleDatasetDisplayBase:Ya,ViewMultipleDatasetsDisplayBase:di},props:{companyId:{type:String},dataType:{type:String},dataId:{type:String},reportingPeriod:{type:String},viewInPreviewMode:{type:Boolean,default:!1}},mounted(){if(!this.dataType)return this.gotoNotFound();if(!this.singleViewFrameworks.includes(this.dataType)&&!this.multiViewFrameworks.includes(this.dataType))return this.gotoNotFound()},methods:{gotoNotFound(){this.$router.push("/nocontent")}},data(){return{singleViewFrameworks:[R.EutaxonomyFinancials],multiViewFrameworks:[R.EutaxonomyNonFinancials,R.Lksg,R.Sfdr,R.P2p,R.Sme]}}});function ui(e,t,a,n,i,u){const c=h("ViewSingleDatasetDisplayBase"),p=h("ViewMultipleDatasetsDisplayBase"),f=h("AuthenticationWrapper");return o(),C(f,{"disable-authentication-wrapper":e.viewInPreviewMode},{default:v(()=>[e.singleViewFrameworks.includes(e.dataType)?(o(),C(c,{key:0,dataType:e.dataType,companyId:e.companyId,dataId:e.dataId,reportingPeriod:e.reportingPeriod,viewInPreviewMode:e.viewInPreviewMode},null,8,["dataType","companyId","dataId","reportingPeriod","viewInPreviewMode"])):y("",!0),e.multiViewFrameworks.includes(e.dataType)?(o(),C(p,{key:1,dataType:e.dataType,companyId:e.companyId,dataId:e.dataId,reportingPeriod:e.reportingPeriod,viewInPreviewMode:e.viewInPreviewMode},null,8,["dataType","companyId","dataId","reportingPeriod","viewInPreviewMode"])):y("",!0)]),_:1},8,["disable-authentication-wrapper"])}const Ki=P(ci,[["render",ui]]);export{Ki as default};
//# sourceMappingURL=ViewFrameworkData-117748b2.js.map
