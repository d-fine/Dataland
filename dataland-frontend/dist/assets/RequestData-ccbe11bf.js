import{s as M}from"./fileupload.esm-50975a08.js";import{s as L}from"./message.esm-cee7d787.js";import{d as b,_ as w,r as i,o as t,n as _,w as n,a as s,R as y,s as I,c as r,x as S,v as u,j as p,h as g,f as l,i as U,y as N,e as q,Z as x,F as H,t as Z,p as j,g as z}from"./index-fc17b7c3.js";import{a as O,A as V}from"./ApiClients-630cb537.js";import{a as W,T as X}from"./TheHeader-9e72102b.js";import{g as K}from"./PredefinedComponentOptionsGetter-68573d76.js";import{s as Y,f as Q,r as G}from"./NumberConversionUtils-a6075dfc.js";import{T as J}from"./TheFooter-99cc7efe.js";import{D as ee}from"./DatalandSettings-e91c35b0.js";import"./index.esm-50a5ad4b.js";import"./index.esm-4b969458.js";import"./index.esm-84118ff3.js";import"./card.esm-8b790707.js";import"./tooltip.esm-6a520ff9.js";import"./StringHumanizer-b303955c.js";const se=b(K("InfoCard")),te={class:"text-center"};function oe(e,o,c,m,F,P){const h=i("Card");return t(),_(h,{class:"bg-white d-infocard d-card mr-2"},{title:n(()=>[]),content:n(()=>[s("div",te,[y(e.$slots,"default")])]),_:3})}const ne=w(se,[["render",oe]]),ie=b({name:"ProgressBar",components:{PrimeProgressBar:Y,PrimeButton:I},props:{processHasStarted:{type:Boolean,default:!1},processIsFinished:{type:Boolean,default:!1},wasProcessSuccessful:{type:Boolean,default:!1},processResultMessage:{type:String},progressTitle:{type:String},progressInPercent:{type:Number,default:0}},methods:{returnToHome(){this.$router.push("/")}}}),re={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"22",fill:"none"},ae=s("path",{fill:"#4BB917",d:"M25.8 8.387c-.907-4.6-4.947-8.054-9.8-8.054A9.994 9.994 0 0 0 7.133 5.72 7.992 7.992 0 0 0 0 13.667c0 4.413 3.587 8 8 8h17.333A6.67 6.67 0 0 0 32 15c0-3.52-2.733-6.373-6.2-6.613ZM14.28 16.72c-.52.52-1.36.52-1.88 0l-2.8-2.787c-.52-.52-.52-1.36 0-1.88.52-.52 1.36-.52 1.88 0l1.853 1.854 5.974-5.974c.52-.52 1.36-.52 1.88 0 .52.52.52 1.36 0 1.88L14.28 16.72Z"},null,-1),le=[ae];function ce(e,o){return t(),r("svg",re,le)}const de={render:ce};const pe={id:"centralized-container",class:"col-6 col-offset-3 p-0"},ue={id:"result-message-container",class:"ml-3 mr-3"},me={id:"dataland-progress-bar-absolute-positioned-container"},he={id:"current-progress-title",class:"pb-5 m-0"},_e={key:0,src:de,alt:"success-img"},fe={key:1,id:"dont-close-warning",class:"mt-5"},ge=s("span",{class:"pl-3 pr-3 pt-1 pb-1 bg-white border-1 progressbar-window-indication font-semibold"}," Please don't close the window ",-1),ve=[ge];function Se(e,o,c,m,F,P){const h=i("PrimeProgressBar"),f=i("PrimeButton");return t(),r("div",pe,[s("div",ue,[e.processIsFinished?(t(),r("div",{key:0,class:S(["p-2 mb-5 mt-8 border-2 p-message",[e.wasProcessSuccessful?"p-message-bordered-success":"p-message-error"]])},u(e.processResultMessage),3)):p("",!0)]),s("div",me,[s("h1",he,[e.wasProcessSuccessful?(t(),r("img",_e)):p("",!0),g(" "+u(e.progressTitle),1)]),e.processHasStarted||e.wasProcessSuccessful?(t(),r("div",{key:0,id:"progress-container",class:S({"progressbar-finished":e.processIsFinished})},[l(h,{value:e.progressInPercent,showValue:!1},null,8,["value"]),s("p",{id:"current-progress-percentage",class:S([[e.processIsFinished?"progressbar-finished":"text-primary"],"m-2 font-medium text-3xl"])},u(e.progressInPercent+"%"),3)],2)):p("",!0),e.processIsFinished?p("",!0):(t(),r("div",fe,ve)),y(e.$slots,"options"),e.processIsFinished?(t(),_(f,{key:2,label:"return to home",class:"mt-6 p-button-sm border-2 uppercase text-primary d-letters bg-white-alpha-10",name:"back_to_home_button",onClick:e.returnToHome},null,8,["onClick"])):p("",!0)])])}const be=w(ie,[["render",Se]]),we=b({name:"RequestData",components:{AuthenticationWrapper:O,PrimeButton:I,TheHeader:W,TheContent:X,InfoCard:ne,ProgressBar:be,FileUpload:M,FileSelectMessage:L,TheFooter:J},setup(){return{getKeycloakPromise:U("getKeycloakPromise"),fileUpload:N()}},data(){return{uploadProgressInPercent:0,isInviteSuccessful:!1,inviteResultMessage:"No invite result message available.",submissionFinished:!1,submissionInProgress:!1,maxFileSize:ee,selectedFile:null}},computed:{submissionProgressTitle(){return this.submissionFinished?this.isInviteSuccessful?"Success":"Submission failed":"Submitting file"}},methods:{createNewRequest(){this.$router.go()},clearSelection(){this.selectedFile=null},handleSelectFile(e){var c;const o=e.files;o.length>1?(this.selectedFile=o[1],(c=this.fileUpload)==null||c.files.shift()):this.selectedFile=o[0]},formatBytes(e){return Q(e,x)},formatProgressPercentage(e){return G(e,0)},chooseFiles(){var e;(e=this.fileUpload)==null||e.choose()},getSelectedFile(){var e;return(e=this.fileUpload)==null?void 0:e.files[0]},async handleSubmission(){this.submissionInProgress=!0,await this.uploadSelectedFile(),this.submissionFinished=!0,this.submissionInProgress=!1},readInviteStatusFromResponse(e){this.isInviteSuccessful=e.data.wasInviteSuccessful??!1,this.inviteResultMessage=e.data.inviteResultMessage??"No response from server."},async uploadSelectedFile(){const e=this.getSelectedFile();try{const c=await(await new V(q(this.getKeycloakPromise)()).getInviteControllerApi()).submitInvite(e,{onUploadProgress:m=>{this.uploadProgressInPercent=m.loaded/m.total*100}});this.readInviteStatusFromResponse(c)}catch(o){console.error(o)}}}}),Fe={xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"none"},Pe=s("path",{fill:"#E67F3F",d:"M10 0C4.48 0 0 4.48 0 10s4.48 10 10 10 10-4.48 10-10S15.52 0 10 0Zm5 11h-4v4H9v-4H5V9h4V5h2v4h4v2Z"},null,-1),ye=[Pe];function Ie(e,o){return t(),r("svg",Fe,ye)}const $e={render:Ie},Ce={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none"},Te=s("g",{"clip-path":"url(#a)"},[s("path",{fill:"#E67F3F",d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2Zm4.3 14.3a.996.996 0 0 1-1.41 0L12 13.41 9.11 16.3a.996.996 0 1 1-1.41-1.41L10.59 12 7.7 9.11A.996.996 0 1 1 9.11 7.7L12 10.59l2.89-2.89a.996.996 0 1 1 1.41 1.41L13.41 12l2.89 2.89c.38.38.38 1.02 0 1.41Z"})],-1),Be=s("defs",null,[s("clipPath",{id:"a"},[s("path",{fill:"#fff",d:"M0 0h24v24H0z"})])],-1),ke=[Te,Be];function Re(e,o){return t(),r("svg",Ce,ke)}const Ae={render:Re};const a=e=>(j("data-v-2ec41038"),e=e(),z(),e),Ee={key:0,class:"mt-6 pl-3 pr-3",id:"new-data-request"},De={class:"flex justify-content-between align-items-center"},Me=a(()=>s("span",{class:"font-medium text-left col-6"},"Submit a new data request for more companies or frameworks",-1)),Le=a(()=>s("a",{class:"pr-3 text-primary font-semibold"},"NEW DATA REQUEST",-1)),Ue=a(()=>s("img",{src:$e,alt:"remove-file-button"},null,-1)),Ne=[Le,Ue],qe={key:1},xe={class:"pl-4 col-5 text-left"},He=a(()=>s("h3",{class:"py-4"},"Request companies data for EU Taxonomy, SFDR or LkSG.",-1)),Ze={id:"download-section",class:"mb-6"},je=a(()=>s("h2",null,"Download",-1)),ze=a(()=>s("div",{class:"mt-3"},[s("a",{class:"text-primary",href:"/static/Dataland_Request_Template.xlsx",id:"download-data-request-excel-template",download:""}," DOWNLOAD - EXCEL TEMPLATE .XLS ")],-1)),Oe={id:"upload-section",class:"mb-6"},Ve=a(()=>s("h2",null,"Upload",-1)),We=a(()=>s("div",null,null,-1)),Xe={key:0},Ke=a(()=>s("p",{class:"m-0"},"Your selected Excel file for the upload:",-1)),Ye={class:"flex align-items-center justify-content-between"},Qe={class:"font-semibold mr-2"},Ge={class:"font-light mr-4"},Je=["onClick"],es={class:"flex align-items-center justify-content-center flex-column surface-0"},ss=a(()=>s("em",{class:"pi pi-cloud-upload p-3 text-6xl text-400"},null,-1)),ts={class:"flex align-items-center"},os=a(()=>s("p",null,"+ Drag and drop a file or",-1)),ns={class:"m-0 fixed bottom-0 surface-900 h-4rem w-full align-items-center"},is={class:"flex justify-content-end flex-wrap"},rs={class:"flex align-items-center justify-content-center m-2"};function as(e,o,c,m,F,P){const h=i("TheHeader"),f=i("InfoCard"),$=i("ProgressBar"),C=i("FileSelectMessage"),T=i("FileUpload"),B=i("PrimeButton"),k=i("TheContent"),R=i("TheFooter"),A=i("AuthenticationWrapper");return t(),_(A,null,{default:n(()=>[l(h),l(k,{class:"min-h-screen paper-section"},{default:n(()=>[e.submissionInProgress||e.submissionFinished?(t(),_($,{key:0,processHasStarted:e.submissionInProgress,processIsFinished:e.submissionFinished,wasProcessSuccessful:e.isInviteSuccessful,processResultMessage:e.inviteResultMessage,progressTitle:e.submissionProgressTitle,progressInPercent:e.formatProgressPercentage(e.uploadProgressInPercent)},{options:n(()=>[e.submissionFinished?(t(),r("div",Ee,[l(f,null,{default:n(()=>[s("div",De,[Me,s("div",{class:"flex align-items-center",onClick:o[0]||(o[0]=(...d)=>e.createNewRequest&&e.createNewRequest(...d))},Ne)])]),_:1})])):p("",!0)]),_:1},8,["processHasStarted","processIsFinished","wasProcessSuccessful","processResultMessage","progressTitle","progressInPercent"])):(t(),r("div",qe,[s("div",xe,[He,s("div",Ze,[je,l(f,{class:"mb-3 font-medium"},{default:n(()=>[g(" Download and fill the EXCEL template with your request and upload it below. "),ze]),_:1})]),s("div",Oe,[Ve,l(T,{ref:"fileUpload",mode:"advanced",auto:!1,accept:".xlsx",maxFileSize:e.maxFileSize,fileLimit:1,onSelect:e.handleSelectFile,onRemove:e.clearSelection},{header:n(()=>[We]),content:n(({files:d,removeFileCallback:E,messages:D})=>[(t(!0),r(H,null,Z(D,v=>(t(),_(C,{key:v,severity:"error",onClose:e.onMessageClose},{default:n(()=>[g(u(v),1)]),_:2},1032,["onClose"]))),128)),d.length>0?(t(),r("div",Xe,[Ke,s("div",Ye,[s("div",null,[s("span",Qe,u(d[0].name),1),s("span",Ge,u("("+e.formatBytes(d[0].size)+")"),1)]),s("img",{src:Ae,alt:"remove-file-button",onClick:v=>E()},null,8,Je)])])):p("",!0)]),empty:n(()=>[s("div",es,[ss,s("div",ts,[os,s("a",{class:"text-primary font-medium pl-1",onClick:o[1]||(o[1]=(...d)=>e.chooseFiles&&e.chooseFiles(...d))},"BROWSE")])])]),_:1},8,["maxFileSize","onSelect","onRemove"])])]),s("div",ns,[s("div",is,[s("div",rs,[l(B,{label:"Submit",class:"uppercase p-button p-button-sm d-letters justify-content-center w-6rem mr-3",name:"submit_request_button",onClick:e.handleSubmission,disabled:!e.selectedFile},{default:n(()=>[g(" Submit ")]),_:1},8,["onClick","disabled"])])])])]))]),_:1}),l(R)]),_:1})}const Ps=w(we,[["render",as],["__scopeId","data-v-2ec41038"]]);export{Ps as default};
//# sourceMappingURL=RequestData-ccbe11bf.js.map
