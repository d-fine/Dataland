import{a as $,T as L}from"./TheHeader-eb83e8ed.js";import{A as b,a as q}from"./ApiClients-7a2ff0a1.js";import{B as U}from"./BackButton-62e8462f.js";import{s as k}from"./card.esm-8809c91f.js";import{d as D,a3 as B,s as R,i as T,e as g,_ as A,r,o as c,n as y,w as p,h as v,a as n,f as o,c as h,F as S,t as O,v as K,j as H,y as E,N as M,T as W}from"./index-24faf217.js";import{S as j,F as z,A as Y}from"./FailMessage-74c5e5ef.js";import{I as d,s as G,S as X}from"./SearchResultHighlighter-aad94e53.js";import{a as J}from"./CountryCodeConverter-6f45ec32.js";import{U as Q,c as Z}from"./ValidationsUtils-25a0d912.js";import{T as _}from"./tooltip.esm-a074da23.js";import{A as x}from"./AuthorizationWrapper-fe4af734.js";import{T as ee}from"./TheFooter-d3426612.js";import"./message.esm-ade3cb90.js";import"./index.esm-60308354.js";import"./index.esm-5605f6f6.js";import"./virtualscroller.esm-e9bfc7ed.js";const ae={companyName:"Company Name",companyAlternativeNames:"Company Alternative Names",companyLegalForm:"Company Legal Form",headquarters:"Headquarters",headquartersPostalCode:"Headquarters Postal Code",countryCode:"Country Code",sector:"Sector",isin:"ISIN",permId:"PermID",lei:"LEI",duns:"D-U-N-S Number",vatNumber:"VAT Number",ticker:"Ticker",companyRegistrationNumber:"Company Registration Number",website:"Website"},oe={companyName:"Name of the company",companyAlternativeNames:"Short names or aliases of the company",companyLegalForm:"Legal Form means, for example, „Public Limited Company (PLC)‟, Private Limited Company (Ltd)‟, „Limited Liability Partnership (LLP)‟, „Partnership without Limited Liability‟ or „Sole Trader‟, or the equivalent in the jurisdiction in which company based",headquarters:"City where the headquarters of the company are located",headquartersPostalCode:"Postal code of the headquarters",countryCode:"Country where the headquarters of the company are located",sector:"GICS classification, “Sector” level",isin:"A 12-digit alphanumeric code that uniquely identifies a specific security",permId:"An open standard from Refinitiv",lei:"The Legal Entity Identifier (LEI) is a 20-character alphanumeric string",duns:"A unique nine-digit identifier for businesses",ticker:"An abbreviation used to identify financial instruments on stock exchanges",vatNumber:"Every VAT identification number begins with a country-code followed by a block of digits or characters",companyRegistrationNumber:"Identification number assigned to a company in the commercial register",website:"Company website"},te=["Energy","Materials","Industrials","Consumer Discretionary","Consumer Staples","Health Care","Financial Services","Information Technology","Communication Services","Utilities","Real Estate"],ne=D({name:"CreateCompany",components:{UploadFormHeader:Q,Card:k,FormKit:B,PrimeButton:R,SuccessMessage:j,FailMessage:z},directives:{tooltip:_},emits:["companyCreated"],setup(){return{getKeycloakPromise:T("getKeycloakPromise")}},data:()=>({companyName:"",companyAlternativeNames:[],companyLegalForm:"",headquarters:"",headquartersPostalCode:"",countryCode:"",lei:"",isin:"",ticker:"",permId:"",duns:"",companyRegistrationNumber:"",vatNumber:"",sector:"",website:"",checkCustomInputs:Z,identifiers:{},enteredCompanyAlternativeName:"",allCountryCodes:J(),postCompanyProcessed:!1,message:"",uploadSucceded:!1,messageCounter:0,companyDataExplanations:oe,companyDataNames:ae,gicsSectors:te,IdentifierType:d}),methods:{async identifierDoesNotExistValidator(e,a){try{return await(await new b(g(this.getKeycloakPromise)()).getCompanyDataControllerApi()).existsIdentifier(a,e.value),!1}catch(m){if(m.response.status==404)return!0;throw m}},setIdentifier(e,a){a!==""&&(this.identifiers[e]=[a])},collectIdentifiers(){this.identifiers={},this.setIdentifier(d.Lei,this.lei),this.setIdentifier(d.Isin,this.isin),this.setIdentifier(d.Ticker,this.ticker),this.setIdentifier(d.PermId,this.permId),this.setIdentifier(d.Duns,this.duns),this.setIdentifier(d.CompanyRegistrationNumber,this.companyRegistrationNumber),this.setIdentifier(d.VatNumber,this.vatNumber)},addCompanyAlternativeName(){this.enteredCompanyAlternativeName!==""&&!this.companyAlternativeNames.includes(this.enteredCompanyAlternativeName)&&this.companyAlternativeNames.push(this.enteredCompanyAlternativeName),this.enteredCompanyAlternativeName=""},removeAlternativeName(e){this.companyAlternativeNames.splice(e-1,1)},getCompanyInformation(){return this.addCompanyAlternativeName(),this.collectIdentifiers(),{companyName:this.companyName,companyAlternativeNames:this.companyAlternativeNames,companyLegalForm:this.companyLegalForm,headquarters:this.headquarters,headquartersPostalCode:this.headquartersPostalCode,sector:this.sector,identifiers:this.identifiers,countryCode:this.countryCode,isTeaserCompany:!1,website:this.website}},async postCompanyInformation(){this.messageCounter++;try{const e=this.getCompanyInformation();if(this.identifiers.length===0)this.message="Please specify at least one company identifier.",this.uploadSucceded=!1;else{const u=(await(await new b(g(this.getKeycloakPromise)()).getCompanyDataControllerApi()).postCompany(e)).data.companyId;this.$emit("companyCreated",u),this.$formkit.reset("createCompanyForm"),this.companyAlternativeNames=new Array,this.message="New company has the ID: "+u,this.uploadSucceded=!0}}catch(e){console.error(e),e instanceof Y?this.message="An error occurred: "+e.message:this.message="An unexpected error occurred. Please try again or contact the support team if the issue persists.",this.uploadSucceded=!1}finally{this.postCompanyProcessed=!0}}}}),ie={class:"uploadFormWrapper"},se=n("h4",null,"Name & location",-1),re={class:"flex align-items-center form-field-label"},le=["onClick"],me={class:"next-to-each-other"},pe=n("h4",null,"Identifier",-1),de=n("h4",null,"GICS classification",-1);function ce(e,a,m,u,I,V){const s=r("UploadFormHeader"),i=r("FormKit"),l=r("PrimeButton"),C=r("SuccessMessage"),f=r("FailMessage"),N=r("Card");return c(),y(N,{class:"bg-white"},{title:p(()=>[v("Create a Company")]),content:p(()=>[n("div",ie,[o(i,{actions:!1,type:"form",id:"createCompanyForm",onSubmit:e.postCompanyInformation,onSubmitInvalid:e.checkCustomInputs},{default:p(()=>[se,o(s,{label:e.companyDataNames.companyName,description:e.companyDataExplanations.companyName,"is-required":!0},null,8,["label","description"]),o(i,{name:"companyName",modelValue:e.companyName,"onUpdate:modelValue":a[0]||(a[0]=t=>e.companyName=t),type:"text",placeholder:e.companyDataNames.companyName,validation:"required","validation-label":"Company Name"},null,8,["modelValue","placeholder"]),n("div",re,[o(s,{label:e.companyDataNames.companyAlternativeNames,description:e.companyDataExplanations.companyAlternativeNames},null,8,["label","description"]),o(l,{disabled:this.enteredCompanyAlternativeName==="",onClick:e.addCompanyAlternativeName,name:"addAlternativeName",label:"Add",class:"p-button-text",icon:"pi pi-plus"},null,8,["disabled","onClick"])]),o(i,{name:"alternativeName",modelValue:e.enteredCompanyAlternativeName,"onUpdate:modelValue":a[1]||(a[1]=t=>e.enteredCompanyAlternativeName=t),type:"text",placeholder:"Company alternative name"},null,8,["modelValue"]),(c(!0),h(S,null,O(e.companyAlternativeNames.length,t=>(c(),h("span",{key:t,class:"form-list-item"},[v(K(e.companyAlternativeNames[t-1])+" ",1),n("em",{onClick:w=>e.removeAlternativeName(t),class:"material-icons"},"close",8,le)]))),128)),n("div",me,[n("div",null,[o(s,{label:e.companyDataNames.headquarters,description:e.companyDataExplanations.headquarters,"is-required":!0},null,8,["label","description"]),o(i,{name:"headquarters",modelValue:e.headquarters,"onUpdate:modelValue":a[2]||(a[2]=t=>e.headquarters=t),type:"text",placeholder:"City",validation:"required","validation-label":"Headquarters"},null,8,["modelValue"])]),n("div",null,[o(s,{label:e.companyDataNames.countryCode,description:e.companyDataExplanations.countryCode,"is-required":!0},null,8,["label","description"]),o(i,{name:"countryCode",modelValue:e.countryCode,"onUpdate:modelValue":a[3]||(a[3]=t=>e.countryCode=t),type:"select",placeholder:"Select",validation:"required","validation-label":"Country Code",options:e.allCountryCodes},null,8,["modelValue","options"])])]),o(s,{label:e.companyDataNames.headquartersPostalCode,description:e.companyDataExplanations.headquartersPostalCode},null,8,["label","description"]),o(i,{name:"headquartersPostalCode",modelValue:e.headquartersPostalCode,"onUpdate:modelValue":a[4]||(a[4]=t=>e.headquartersPostalCode=t),type:"text",placeholder:e.companyDataNames.headquartersPostalCode},null,8,["modelValue","placeholder"]),o(s,{label:e.companyDataNames.companyLegalForm,description:e.companyDataExplanations.companyLegalForm},null,8,["label","description"]),o(i,{name:"companyLegalForm",modelValue:e.companyLegalForm,"onUpdate:modelValue":a[5]||(a[5]=t=>e.companyLegalForm=t),type:"text",placeholder:e.companyDataNames.companyLegalForm},null,8,["modelValue","placeholder"]),o(s,{label:e.companyDataNames.website,description:e.companyDataExplanations.website},null,8,["label","description"]),o(i,{name:"website",modelValue:e.website,"onUpdate:modelValue":a[6]||(a[6]=t=>e.website=t),type:"text",placeholder:e.companyDataNames.website},null,8,["modelValue","placeholder"]),pe,o(i,{type:"group",config:{validationMessages:{identifierDoesNotExistValidator:"There already exists a company with this ID"},validationRules:{identifierDoesNotExistValidator:e.identifierDoesNotExistValidator},validationVisibility:"live"}},{default:p(()=>[o(s,{label:e.companyDataNames.lei,description:e.companyDataExplanations.lei},null,8,["label","description"]),o(i,{name:"lei",modelValue:e.lei,"onUpdate:modelValue":a[7]||(a[7]=t=>e.lei=t),type:"text",placeholder:e.companyDataNames.lei,validation:`identifierDoesNotExistValidator:${e.IdentifierType.Lei}`},null,8,["modelValue","placeholder","validation"]),o(s,{label:e.companyDataNames.isin,description:e.companyDataExplanations.isin},null,8,["label","description"]),o(i,{name:"isin",modelValue:e.isin,"onUpdate:modelValue":a[8]||(a[8]=t=>e.isin=t),type:"text",placeholder:e.companyDataNames.isin,validation:`identifierDoesNotExistValidator:${e.IdentifierType.Isin}`},null,8,["modelValue","placeholder","validation"]),o(s,{label:e.companyDataNames.ticker,description:e.companyDataExplanations.ticker},null,8,["label","description"]),o(i,{name:"ticker",modelValue:e.ticker,"onUpdate:modelValue":a[9]||(a[9]=t=>e.ticker=t),type:"text",placeholder:e.companyDataNames.ticker,validation:`identifierDoesNotExistValidator:${e.IdentifierType.Ticker}`},null,8,["modelValue","placeholder","validation"]),o(s,{label:e.companyDataNames.permId,description:e.companyDataExplanations.permId},null,8,["label","description"]),o(i,{name:"permId",modelValue:e.permId,"onUpdate:modelValue":a[10]||(a[10]=t=>e.permId=t),type:"text",placeholder:e.companyDataNames.permId,validation:`identifierDoesNotExistValidator:${e.IdentifierType.PermId}`},null,8,["modelValue","placeholder","validation"]),o(s,{label:e.companyDataNames.duns,description:e.companyDataExplanations.duns},null,8,["label","description"]),o(i,{name:"duns",modelValue:e.duns,"onUpdate:modelValue":a[11]||(a[11]=t=>e.duns=t),type:"text",placeholder:e.companyDataNames.duns,validation:`identifierDoesNotExistValidator:${e.IdentifierType.Duns}`},null,8,["modelValue","placeholder","validation"]),o(s,{label:e.companyDataNames.companyRegistrationNumber,description:e.companyDataExplanations.companyRegistrationNumber},null,8,["label","description"]),o(i,{name:"companyRegistrationNumber",modelValue:e.companyRegistrationNumber,"onUpdate:modelValue":a[12]||(a[12]=t=>e.companyRegistrationNumber=t),type:"text",placeholder:e.companyDataNames.companyRegistrationNumber,validation:`identifierDoesNotExistValidator:${e.IdentifierType.CompanyRegistrationNumber}`},null,8,["modelValue","placeholder","validation"]),o(s,{label:e.companyDataNames.vatNumber,description:e.companyDataExplanations.vatNumber},null,8,["label","description"]),o(i,{name:"vatNumber",modelValue:e.vatNumber,"onUpdate:modelValue":a[13]||(a[13]=t=>e.vatNumber=t),type:"text",placeholder:e.companyDataNames.vatNumber,validation:`identifierDoesNotExistValidator:${e.IdentifierType.VatNumber}`},null,8,["modelValue","placeholder","validation"])]),_:1},8,["config"]),de,o(s,{label:e.companyDataNames.sector,description:e.companyDataExplanations.sector},null,8,["label","description"]),o(i,{name:"sector",modelValue:e.sector,"onUpdate:modelValue":a[14]||(a[14]=t=>e.sector=t),type:"select",placeholder:"Please choose",options:e.gicsSectors},null,8,["modelValue","options"]),o(l,{type:"submit",label:"ADD COMPANY",name:"addCompany"})]),_:1},8,["onSubmit","onSubmitInvalid"]),e.postCompanyProcessed?(c(),h(S,{key:0},[e.uploadSucceded?(c(),y(C,{key:0,message:e.message,messageId:e.messageCounter},null,8,["message","messageId"])):(c(),y(f,{key:1,message:e.message,messageId:e.messageCounter},null,8,["message","messageId"]))],64)):H("",!0)])]),_:1})}const ue=A(ne,[["render",ce]]),ye=D({setup(){return{getKeycloakPromise:T("getKeycloakPromise"),autocomplete:E()}},name:"CompaniesOnlySearchBar",components:{AutoComplete:G,SearchResultHighlighter:X},mounted(){var m;((m=this.autocomplete)==null?void 0:m.$refs).focusInput.focus()},data:function(){return{searchBarInput:"",latestValidSearchString:"",autocompleteArray:[]}},watch:{searchBarInput(e){this.saveCurrentSearchStringIfValid(e)}},methods:{saveCurrentSearchStringIfValid(e){e&&typeof e=="string"&&(this.latestValidSearchString=e)},async pushToChooseFrameworkForDataUploadPageForItem(e){await this.$router.push(`/companies/${e.value.companyId}/frameworks/upload`)},async searchCompanyName(e){try{const m=await(await new b(g(this.getKeycloakPromise)()).getCompanyDataControllerApi()).getCompaniesBySearchString(e.query);this.autocompleteArray=m.data}catch(a){console.error(a)}}}}),he={class:"p-fluid"},Ce={class:"p-input-icon-left p-input-icon-right"},fe=n("i",{class:"pi pi-search d-framework-searchbar-input-icon","aria-hidden":"true",style:{"z-index":"20",color:"#958d7c"}},null,-1),Ne=n("i",{class:"pi pi-search pl-3 pr-3","aria-hidden":"true"},null,-1);function be(e,a,m,u,I,V){const s=r("SearchResultHighlighter"),i=r("AutoComplete");return c(),h("span",he,[n("span",Ce,[fe,o(i,{inputId:"company_search_bar_standard",ref:"autocomplete",modelValue:e.searchBarInput,"onUpdate:modelValue":a[0]||(a[0]=l=>e.searchBarInput=l),suggestions:e.autocompleteArray,minLength:3,optionLabel:"companyName",autoOptionFocus:!1,placeholder:"Search company by name or identifier",inputClass:"h-3rem d-framework-searchbar-input",panelClass:"d-framework-searchbar-panel",style:{"z-index":"10"},onComplete:a[1]||(a[1]=l=>e.searchCompanyName(l)),onItemSelect:a[2]||(a[2]=l=>e.pushToChooseFrameworkForDataUploadPageForItem(l))},{option:p(l=>[Ne,o(s,{text:l.option.companyName,searchString:e.latestValidSearchString},null,8,["text","searchString"])]),_:1},8,["modelValue","suggestions"])])])}const ge=A(ye,[["render",be]]),ve=D({name:"ChooseCompany",components:{TheFooter:ee,AuthorizationWrapper:x,AuthenticationWrapper:q,BackButton:U,TheHeader:$,TheContent:L,CompaniesOnlySearchBar:ge,CreateCompany:ue,Card:k},data(){return{KEYCLOAK_ROLE_UPLOADER:M}},setup(){return{option2Container:E()}},methods:{autoScrollToCreateACompanyForm(){this.option2Container&&this.option2Container.scrollIntoView({behavior:"smooth"})},handleCompanyCreated(e){setTimeout(()=>{this.$router.push(`/companies/${e}/frameworks/upload`)},W)}}}),De={class:"grid"},Ae={class:"col-9"},Ie={id:"option1Container",class:"grid bottom-border-section"},Ve=n("div",{id:"option1Label",class:"col-3 p-3"},[n("h4",{id:"option1Title"},"Option 01"),n("h3",null,"Select a company"),n("p",null,"Select the company for which you would like to add a new dataset.")],-1),we={class:"col-9 d-card"},Se=n("div",{class:"mb-3"},[n("span",null,"Type at least 3 characters to search for companies on Dataland:")],-1),ke={class:"mt-6"},Te=n("span",null,"Can't find the company? ",-1),Ee={id:"option2Container",ref:"option2Container",class:"grid"},Fe=n("div",{id:"option2Label",class:"col-3 p-3"},[n("h4",{id:"option2Title"},"Option 02"),n("h3",null,"Add a new company"),n("p",null," If you want to add a dataset for a new company, you first have to create the company. To create a new company, all mandatory * fields must be filled. ")],-1),Pe={id:"createCompanyForm",class:"col-9 d-card"};function $e(e,a,m,u,I,V){const s=r("TheHeader"),i=r("BackButton"),l=r("CompaniesOnlySearchBar"),C=r("CreateCompany"),f=r("Card"),N=r("TheContent"),t=r("AuthorizationWrapper"),w=r("TheFooter"),F=r("AuthenticationWrapper");return c(),y(F,null,{default:p(()=>[o(s),o(t,{"required-role":e.KEYCLOAK_ROLE_UPLOADER},{default:p(()=>[o(N,null,{default:p(()=>[o(i,{id:"backButton",label:"BACK"}),o(f,{class:"col-12 text-left page-wrapper-card"},{title:p(()=>[v("New Dataset - Company")]),content:p(()=>[n("div",De,[n("div",Ae,[n("div",Ie,[Ve,n("div",we,[Se,o(l),n("div",ke,[Te,n("a",{onClick:a[0]||(a[0]=(...P)=>e.autoScrollToCreateACompanyForm&&e.autoScrollToCreateACompanyForm(...P)),class:"cursor-pointer text-primary font-semibold"},"Add it.")])])]),n("div",Ee,[Fe,n("div",Pe,[o(C,{onCompanyCreated:e.handleCompanyCreated},null,8,["onCompanyCreated"])])],512)])])]),_:1})]),_:1})]),_:1},8,["required-role"]),o(w)]),_:1})}const Qe=A(ve,[["render",$e]]);export{Qe as default};
//# sourceMappingURL=ChooseCompanyForFrameworkDataUpload-0eb77db6.js.map
